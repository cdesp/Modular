  5)   0000 00          		 NOP	;
  6)   0001 C3 00 02    		 JP START	;
  7)   0004 C3 89 02    		 JP MENU	;
  8)   0007 02          		 VERSION DEFB 2 ; AT ADDR=7	; AT ADDR=7
  9)   0008 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   000C 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0010 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0014 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0018 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   001C 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0020 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0024 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0028 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   002C 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0030 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
  9)   0034 00 00 00 00 		 DEFS $30 ;SKIP $30 BYTES	;SKIP $30 BYTES
 12)   0038 C3 E3 05    		 JP INTSER	;
 15)   003B 00 00 00 00 		 ALIGN 256	;
 15)   003F 00 00 00 00 		 ALIGN 256	;
 15)   0043 00 00 00 00 		 ALIGN 256	;
 15)   0047 00 00 00 00 		 ALIGN 256	;
 15)   004B 00 00 00 00 		 ALIGN 256	;
 15)   004F 00 00 00 00 		 ALIGN 256	;
 15)   0053 00 00 00 00 		 ALIGN 256	;
 15)   0057 00 00 00 00 		 ALIGN 256	;
 15)   005B 00 00 00 00 		 ALIGN 256	;
 15)   005F 00 00 00 00 		 ALIGN 256	;
 15)   0063 00 00 00 00 		 ALIGN 256	;
 15)   0067 00 00 00 00 		 ALIGN 256	;
 15)   006B 00 00 00 00 		 ALIGN 256	;
 15)   006F 00 00 00 00 		 ALIGN 256	;
 15)   0073 00 00 00 00 		 ALIGN 256	;
 15)   0077 00 00 00 00 		 ALIGN 256	;
 15)   007B 00 00 00 00 		 ALIGN 256	;
 15)   007F 00 00 00 00 		 ALIGN 256	;
 15)   0083 00 00 00 00 		 ALIGN 256	;
 15)   0087 00 00 00 00 		 ALIGN 256	;
 15)   008B 00 00 00 00 		 ALIGN 256	;
 15)   008F 00 00 00 00 		 ALIGN 256	;
 15)   0093 00 00 00 00 		 ALIGN 256	;
 15)   0097 00 00 00 00 		 ALIGN 256	;
 15)   009B 00 00 00 00 		 ALIGN 256	;
 15)   009F 00 00 00 00 		 ALIGN 256	;
 15)   00A3 00 00 00 00 		 ALIGN 256	;
 15)   00A7 00 00 00 00 		 ALIGN 256	;
 15)   00AB 00 00 00 00 		 ALIGN 256	;
 15)   00AF 00 00 00 00 		 ALIGN 256	;
 15)   00B3 00 00 00 00 		 ALIGN 256	;
 15)   00B7 00 00 00 00 		 ALIGN 256	;
 15)   00BB 00 00 00 00 		 ALIGN 256	;
 15)   00BF 00 00 00 00 		 ALIGN 256	;
 15)   00C3 00 00 00 00 		 ALIGN 256	;
 15)   00C7 00 00 00 00 		 ALIGN 256	;
 15)   00CB 00 00 00 00 		 ALIGN 256	;
 15)   00CF 00 00 00 00 		 ALIGN 256	;
 15)   00D3 00 00 00 00 		 ALIGN 256	;
 15)   00D7 00 00 00 00 		 ALIGN 256	;
 15)   00DB 00 00 00 00 		 ALIGN 256	;
 15)   00DF 00 00 00 00 		 ALIGN 256	;
 15)   00E3 00 00 00 00 		 ALIGN 256	;
 15)   00E7 00 00 00 00 		 ALIGN 256	;
 15)   00EB 00 00 00 00 		 ALIGN 256	;
 15)   00EF 00 00 00 00 		 ALIGN 256	;
 15)   00F3 00 00 00 00 		 ALIGN 256	;
 15)   00F7 00 00 00 00 		 ALIGN 256	;
 15)   00FB 00 00 00 00 		 ALIGN 256	;
 15)   00FF 00          		 ALIGN 256	;
 18)   0100 C3 2D 19    		     JP MYOS_CLRSCN	;
 19)   0103 C3 30 19    		     JP MYOS_PUTIME	;
 20)   0106 C3 41 19    		     JP MYOS_GETIME	;
 21)   0109 C3 52 19    		     JP MYOS_PUTCSR	;
 22)   010C C3 64 19    		     JP MYOS_GETCSR	;
 23)   010F C3 73 19    		     JP MYOS_OSRDCH	;
 24)   0112 C3 30 1B    		     JP MYOS_PROMPT	;
 25)   0115 C3 7E 19    		     JP MYOS_OSWRCH	;
 26)   0118 C3 5E 1B    		     JP MYOS_OSKEY	;
 27)   011B C3 9A 1B    		     JP MYOS_OSINIT	;
 28)   011E C3 91 1D    		     JP MYOS_OSLINE	;
 29)   0121 C3 66 1C    		     JP MYOS_OSCLI	;
 30)   0124 C3 F3 1C    		     JP MYOS_OSBPUT 	;
 31)   0127 C3 F3 1C    		     JP MYOS_OSBGET 	;
 32)   012A C3 F3 1C    		     JP MYOS_OSSTAT 	;
 33)   012D C3 F3 1C    		     JP MYOS_OSSHUT 	;
 34)   0130 C3 F3 1C    		     JP MYOS_OSOPEN 	;
 35)   0133 C3 F3 1C    		     JP MYOS_OSCALL 	;
 36)   0136 C3 DA 17    		     JP MYOS_OSSAVE 	;
 37)   0139 C3 03 18    		     JP MYOS_OSLOAD 	;
 38)   013C C3 F3 1C    		     JP MYOS_GETPTR 	;
 39)   013F C3 F3 1C    		     JP MYOS_PUTPTR 	;
 40)   0142 C3 F3 1C    		     JP MYOS_GETEXT 	;
 41)   0145 C3 F6 1C    		     JP MYOS_RESET 	;
 42)   0148 C3 8A 1B    		     JP MYOS_TRAP	;
 43)   014B C3 8D 1B    		     JP MYOS_LTRAP  	;
 44)   014E C3 FE 1C    		     JP MYOS_CLG	;
 45)   0151 C3 16 1D    		     JP MYOS_COLOUR	;
 46)   0154 C3 21 1D    		     JP MYOS_DRAW	;
 47)   0157 C3 47 1D    		     JP MYOS_ENVEL	;
 48)   015A C3 0A 1D    		     JP MYOS_GCOL	;
 49)   015D C3 F7 1C    		     JP MYOS_MODE	;
 50)   0160 C3 2B 1D    		     JP MYOS_MOVE	;
 51)   0163 C3 35 1D    		     JP MYOS_PLOT	;
 52)   0166 C3 47 1D    		     JP MYOS_SOUND	;
 53)   0169 C3 47 1D    		     JP MYOS_ADVAL	;
 54)   016C C3 3F 1D    		     JP MYOS_POINT	;
 55)   016F C3 47 1D    		     JP MYOS_GETIMS	;
 56)   0172 C3 47 1D    		     JP MYOS_PUTIMS    	;
 58)   0175 00 00 00 00 		 ALIGN 256     	;
 58)   0179 00 00 00 00 		 ALIGN 256     	;
 58)   017D 00 00 00 00 		 ALIGN 256     	;
 58)   0181 00 00 00 00 		 ALIGN 256     	;
 58)   0185 00 00 00 00 		 ALIGN 256     	;
 58)   0189 00 00 00 00 		 ALIGN 256     	;
 58)   018D 00 00 00 00 		 ALIGN 256     	;
 58)   0191 00 00 00 00 		 ALIGN 256     	;
 58)   0195 00 00 00 00 		 ALIGN 256     	;
 58)   0199 00 00 00 00 		 ALIGN 256     	;
 58)   019D 00 00 00 00 		 ALIGN 256     	;
 58)   01A1 00 00 00 00 		 ALIGN 256     	;
 58)   01A5 00 00 00 00 		 ALIGN 256     	;
 58)   01A9 00 00 00 00 		 ALIGN 256     	;
 58)   01AD 00 00 00 00 		 ALIGN 256     	;
 58)   01B1 00 00 00 00 		 ALIGN 256     	;
 58)   01B5 00 00 00 00 		 ALIGN 256     	;
 58)   01B9 00 00 00 00 		 ALIGN 256     	;
 58)   01BD 00 00 00 00 		 ALIGN 256     	;
 58)   01C1 00 00 00 00 		 ALIGN 256     	;
 58)   01C5 00 00 00 00 		 ALIGN 256     	;
 58)   01C9 00 00 00 00 		 ALIGN 256     	;
 58)   01CD 00 00 00 00 		 ALIGN 256     	;
 58)   01D1 00 00 00 00 		 ALIGN 256     	;
 58)   01D5 00 00 00 00 		 ALIGN 256     	;
 58)   01D9 00 00 00 00 		 ALIGN 256     	;
 58)   01DD 00 00 00 00 		 ALIGN 256     	;
 58)   01E1 00 00 00 00 		 ALIGN 256     	;
 58)   01E5 00 00 00 00 		 ALIGN 256     	;
 58)   01E9 00 00 00 00 		 ALIGN 256     	;
 58)   01ED 00 00 00 00 		 ALIGN 256     	;
 58)   01F1 00 00 00 00 		 ALIGN 256     	;
 58)   01F5 00 00 00 00 		 ALIGN 256     	;
 58)   01F9 00 00 00 00 		 ALIGN 256     	;
 58)   01FD 00 00 00    		 ALIGN 256     	;
 47)   0200 F3          		@START: DI	;
 48)   0201 21 00 A0    		 LD HL,$A000 ;TEMPORARY INTERRUPT SERVICE IN RAM	;TEMPORARY INTERRUPT SERVICE IN RAM
 49)   0204 3E ED       		 LD A,$ED ;RETI	;RETI
 50)   0206 77          		 LD (HL),A	;
 51)   0207 23          		 INC HL	;
 52)   0208 3E 4D       		 LD A,$4D ;RETI	;RETI
 53)   020A 77          		 LD (HL),A	;
 63)   020B 06 05       		CN1: LD B,5	;
 64)   020D 0E 00       		AGN1: LD C,0	;
 65)   020F 3E 00       		 LD A,0	;
 66)   0211 ED 79       		 OUT (C),A	;
 67)   0213 0E 00       		 LD C,0	;
 68)   0215 3E FF       		 LD A,255	;
 69)   0217 ED 79       		 OUT (C),A	;
 70)   0219 10 F2       		 DJNZ AGN1	;
 75)   021B 11 01 00    		 LD DE,1	;
 76)   021E 3E 00       		 LD A,0 ;WRITE 0	;WRITE 0
 77)   0220 4F          		 LD C,A	;
 78)   0221 21 00 80    		 LD HL,RAMAD 	;
 79)   0224 06 08       		 LD B,8	;
 80)   0226 77          		AGN2: LD (HL),A	;
 81)   0227 4E          		 LD C,(HL)	;
 82)   0228 B9          		 CP C	;
 83)   0229 C2 43 02    		 JP NZ, ERR	;
 84)   022C 19          		 ADD HL,DE	;
 85)   022D C6 20       		 ADD A,32 ;WRITE +32	;WRITE +32
 86)   022F 4F          		 LD C,A	;
 87)   0230 10 F4       		 DJNZ AGN2	;
 89)   0232 06 05       		 LD B,5	;
 90)   0234 0E 08       		AGN3: LD C,00001000B ;LLH ON 138 Y1 OUT	;LLH ON 138 Y1 OUT
 91)   0236 3E 40       		 LD A,64	;
 92)   0238 ED 79       		 OUT (C),A	;
 93)   023A C6 80       		 ADD A,128	;
 94)   023C ED 79       		 OUT (C),A 	;
 95)   023E 10 F4       		 DJNZ AGN3  ; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8	; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8
 96)   0240 C3 4C 02    		 JP BOOT	;
 99)   0243 0E 38       		ERR: LD C,00111000B ;HHH ON 138 Y7 OUT	;HHH ON 138 Y7 OUT
100)   0245 3E 40       		 LD A,64	;
101)   0247 ED 79       		 OUT (C),A	;
103)   0249 C3 43 02    		 JP ERR ;DO AGAIN PORT 1	;DO AGAIN PORT 1
107)   024C F3          		@BOOT: DI	;
108)   024D ED 56       		 IM 1 	;
109)   024F 31 F0 FF    		 LD SP,STACKP 	;
110)   0252 CD FE 03    		 CALL EPROMOFF	;
111)   0255 CD 90 0E    		 CALL KEYBDATON 	;
114)   0258 CD 51 05    		 CALL RS_INI ;RS232 INITIALIZE	;RS232 INITIALIZE
115)   025B 21 1A 05    		 LD HL,STR00	;
116)   025E CD 79 05    		 CALL RS_TXT	;
124)   0261 CD 34 06    		 CALL LCD_INIT	;
125)   0264 21 3F 00    		 LD HL,COL_BLUE	;
126)   0267 22 03 83    		 LD (BCOLOR),HL	;
127)   026A 21 C0 FF    		 LD HL,COL_YELLOW	;
128)   026D 22 01 83    		 LD (FCOLOR),HL	;
129)   0270 21 07 05    		 LD HL,STRSCR 	;
130)   0273 CD 79 05    		 CALL RS_TXT	;
131)   0276 CD 38 0E    		 CALL LCD_CLRSCR  	;
132)   0279 3E 00       		 LD A,0	;
133)   027B 32 0D 83    		 LD (CURSORX),A	;
134)   027E 3E 00       		 LD A,0	;
135)   0280 32 0E 83    		 LD (CURSORY),A  	;
136)   0283 21 63 04    		 LD HL,STR0  ;LCD INIT MSG	;LCD INIT MSG
137)   0286 CD 78 0E    		 CALL LCD_MSG	;
145)   0289 AF          		 XOR A	;
146)   028A 32 0F 83    		 LD (SCRLN),A	;
147)   028D 21 D8 04    		 LD HL,STRMN	;
148)   0290 CD 79 05    		 CALL RS_TXT ;OUTPUT MENU COMMANDS AT RS232 	;OUTPUT MENU COMMANDS AT RS232
149)   0293 21 30 05    		 LD HL,STR01	;
150)   0296 CD 79 05    		 CALL RS_TXT ;OUTPUT WAITING AT RS232	;OUTPUT WAITING AT RS232
157)   0299 21 2E 04    		 LD HL,SMENU	;
158)   029C 3E 05       		 LD A,5	;
159)   029E 32 0D 83    		 LD (CURSORX),A	;
160)   02A1 3E 02       		 LD A,2	;
161)   02A3 32 0E 83    		 LD (CURSORY),A  	;
162)   02A6 CD 78 0E    		 CALL LCD_MSG	;
164)   02A9 CD 04 03    		 CALL GET_CHAR ;TAKE A CHAR FROM RS232 OR PS2 KEYB	;TAKE A CHAR FROM RS232 OR PS2 KEYB
167)   02AC FE 55       		 CP 'U' ;UPLOAD PROGRAM	;UPLOAD PROGRAM
168)   02AE CC 33 03    		 CALL Z, UPLOD	;
169)   02B1 FE 58       		 CP 'X'	;
170)   02B3 CA 25 03    		 JP Z,EXEC	;
171)   02B6 FE 54       		 CP 'T'	;
172)   02B8 CC AA 03    		 CALL Z,RSTST	;
173)   02BB FE 53       		 CP 'S'	;
174)   02BD CC DC 03    		 CALL Z,TXTSCR	;
175)   02C0 FE 49       		 CP 'I'	;
176)   02C2 CC 6A 03    		 CALL Z,UPLOD2	;
177)   02C5 FE 59       		 CP 'Y'	;
178)   02C7 CC C0 03    		 CALL Z,RSTST2	;
179)   02CA FE 48       		 CP 'H'	;
180)   02CC CC CF 03    		 CALL Z,XMTST	;
181)   02CF FE 4A       		 CP 'J'	;
182)   02D1 CC 8F 03    		 CALL Z,DNLOD	;
185)   02D4 FE 43       		 CP 'C'	;
186)   02D6 CC 38 0E    		 CALL Z,LCD_CLRSCR	;
187)   02D9 FE 42       		 CP 'B'	;
188)   02DB CA 00 40    		 JP Z,BBCBASIC	;
190)   02DE C3 89 02    		 JP MENU	;
197)   02E1 CD 67 1D    		@GET_CHARNW: CALL CHKCURS	;
198)   02E4 AF          		 XOR A 	;
200)   02E5 CD AC 05    		 CALL RS_KEYRD ;CHAR IN RS232?	;CHAR IN RS232?
201)   02E8 28 04       		 JR Z,CNW_TST2 	;
202)   02EA CD 83 05    		 CALL RS_RX ; GET THAT CHAR	; GET THAT CHAR
203)   02ED C9          		 RET	;
206)   02EE CD 82 0F    		 CALL READCHAR ;GET THE KEY FROM USB KEYBOARD (HAS A TIMEOUT)	;GET THE KEY FROM USB KEYBOARD (HAS A TIMEOUT)
207)   02F1 FE 00       		 CP 0         ;IF KEY=0 THEN IT IS INVALID	;IF KEY=0 THEN IT IS INVALID
208)   02F3 C8          		 RET Z        ;EXIT IF Z TODO LOOP THIS FOR 10MS THEN EXIT	;EXIT IF Z TODO LOOP THIS FOR 10MS THEN EXIT
211)   02F4 F5          		 PUSH AF	;
212)   02F5 CD 6A 05    		 CALL RS_TX	;
213)   02F8 3E 0A       		 LD A,10	;
214)   02FA CD 6A 05    		 CALL RS_TX	;
215)   02FD 3E 0D       		 LD A,13	;
216)   02FF CD 6A 05    		 CALL RS_TX	;
217)   0302 F1          		 POP AF	;
218)   0303 C9          		 RET	;
223)   0304 AF          		@GET_CHAR: XOR A	;
226)   0305 CD AC 05    		 CALL RS_KEYRD ;CHAR IN RS232?	;CHAR IN RS232?
227)   0308 28 04       		 JR Z,CW_TST2	;
228)   030A CD 83 05    		 CALL RS_RX ; GET THAT CHAR	; GET THAT CHAR
229)   030D C9          		 RET	;
236)   030E CD 82 0F    		 CALL READCHAR ;GET THE KEY FROM USB KEYBOARD (HAS A TIMEOUT)	;GET THE KEY FROM USB KEYBOARD (HAS A TIMEOUT)
237)   0311 FE 00       		 CP 0         ;IF KEY=0 THEN IT IS INVALID	;IF KEY=0 THEN IT IS INVALID
238)   0313 28 EF       		 JR Z,GET_CHAR	;
241)   0315 F5          		 PUSH AF	;
242)   0316 CD 6A 05    		 CALL RS_TX	;
243)   0319 3E 0A       		 LD A,10	;
244)   031B CD 6A 05    		 CALL RS_TX	;
245)   031E 3E 0D       		 LD A,13	;
246)   0320 CD 6A 05    		 CALL RS_TX	;
247)   0323 F1          		 POP AF	;
248)   0324 C9          		 RET	;
259)   0325 3E 05       		 LD A,5	;
260)   0327 CD 69 18    		 CALL SCPRN  	;
262)   032A 11 8E 83    		 LD DE,PRGEX	;
263)   032D 1A          		 LD A,(DE)	;
264)   032E 6F          		 LD L,A	;
265)   032F 13          		 INC DE	;
266)   0330 1A          		 LD A,(DE)	;
267)   0331 67          		 LD H,A	;
268)   0332 E9          		 JP (HL)	;
275)   0333 F3          		UPLOD: DI 	;
280)   0334 CD 83 05    		 CALL RS_RX ;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
281)   0337 6F          		 LD L,A	;
282)   0338 CD 83 05    		 CALL RS_RX	;
283)   033B 67          		 LD H,A	;
284)   033C CD 83 05    		 CALL RS_RX ;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
285)   033F 4F          		 LD C,A	;
286)   0340 CD 83 05    		 CALL RS_RX	;
287)   0343 47          		 LD B,A	;
289)   0344 11 8E 83    		 LD DE,PRGEX ;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
290)   0347 7D          		 LD A,L	;
291)   0348 12          		 LD (DE),A	;
292)   0349 13          		 INC DE	;
293)   034A 7C          		 LD A,H	;
294)   034B 12          		 LD (DE),A	;
296)   034C FE 80       		 CP $80	;
297)   034E DC 08 04    		 CALL C,EPROMON ;C ROM IN 0-8000 NC ROM IN 8000-FFFF ;SET ROM WRITABLE = '0'	;C ROM IN 0-8000 NC ROM IN 8000-FFFF ;SET ROM WRITABLE = '0'
299)   0351 E5          		NORWR: PUSH HL	;
300)   0352 CD 83 05    		NXB: CALL RS_RX	;
301)   0355 77          		 LD (HL),A	;
302)   0356 23          		 INC HL	;
303)   0357 0B          		 DEC BC	;
304)   0358 78          		 LD A,B	;
305)   0359 B1          		 OR C	;
306)   035A 20 F6       		 JR NZ,NXB ;LOOP ALL BYTES 	;LOOP ALL BYTES
307)   035C CD FE 03    		 CALL EPROMOFF	;
312)   035F 3E 05       		 LD A,5 	;
313)   0361 CD 69 18    		 CALL SCPRN  	;
314)   0364 CD 76 18    		 CALL DELAY	;
316)   0367 E1          		 POP HL	;
319)   0368 FB          		 EI	;
320)   0369 C9          		 RET	;
324)   036A F3          		UPLOD2: DI	;
329)   036B CD 83 05    		 CALL RS_RX ;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
330)   036E 6F          		 LD L,A	;
331)   036F CD 83 05    		 CALL RS_RX	;
332)   0372 67          		 LD H,A	;
333)   0373 CD 83 05    		 CALL RS_RX ;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
334)   0376 4F          		 LD C,A	;
335)   0377 CD 83 05    		 CALL RS_RX	;
336)   037A 47          		 LD B,A	;
338)   037B 11 8E 83    		 LD DE,PRGEX ;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
339)   037E 7D          		 LD A,L	;
340)   037F 12          		 LD (DE),A	;
341)   0380 13          		 INC DE	;
342)   0381 7C          		 LD A,H	;
343)   0382 12          		 LD (DE),A	;
345)   0383 CD 83 05    		NXB2: CALL RS_RX	;
346)   0386 77          		 LD (HL),A	;
347)   0387 23          		 INC HL	;
348)   0388 0B          		 DEC BC	;
349)   0389 78          		 LD A,B	;
350)   038A B1          		 OR C	;
351)   038B 20 F6       		 JR NZ,NXB2 ;LOOP ALL BYTES   	;LOOP ALL BYTES
353)   038D FB          		 EI	;
355)   038E C9          		 RET	;
366)   038F CD 83 05    		 CALL RS_RX ;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
367)   0392 6F          		 LD L,A	;
368)   0393 CD 83 05    		 CALL RS_RX	;
369)   0396 67          		 LD H,A	;
370)   0397 CD 83 05    		 CALL RS_RX ;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
371)   039A 4F          		 LD C,A	;
372)   039B CD 83 05    		 CALL RS_RX	;
373)   039E 47          		 LD B,A	;
375)   039F 7E          		NXB3: LD A,(HL)	;
376)   03A0 CD 6A 05    		 CALL RS_TX ;SEND BYTE	;SEND BYTE
377)   03A3 23          		 INC HL	;
378)   03A4 0B          		 DEC BC	;
379)   03A5 78          		 LD A,B	;
380)   03A6 B1          		 OR C	;
381)   03A7 20 F6       		 JR NZ,NXB3 ;LOOP ALL BYTES    	;LOOP ALL BYTES
382)   03A9 C9          		 RET	;
384)   03AA 00          		RSTST: NOP ;GET A KEY FROM RS232	;GET A KEY FROM RS232
385)   03AB 06 0A       		 LD B,10	;
386)   03AD C5          		TEN: PUSH BC	;
387)   03AE CD 83 05    		 CALL RS_RX	;
389)   03B1 CD 6A 05    		 CALL RS_TX ;SEND BACK THE CHAR	;SEND BACK THE CHAR
391)   03B4 3E 20       		 LD A,' '	;
393)   03B6 3E 52       		 LD A,'R'	;
396)   03B8 CD 83 18    		 CALL DEL2	;
398)   03BB C1          		 POP BC	;
399)   03BC 10 EF       		 DJNZ TEN	;
401)   03BE AF          		 XOR A	;
402)   03BF C9          		 RET	;
404)   03C0 00          		RSTST2: NOP ;TEST RECEIVING AND SENDING 255 BYTES	;TEST RECEIVING AND SENDING 255 BYTES
405)   03C1 06 FF       		 LD B,255	;
406)   03C3 C5          		TEN2: PUSH BC	;
407)   03C4 CD 83 05    		 CALL RS_RX	;
409)   03C7 CD 6A 05    		 CALL RS_TX ;SEND BACK THE CHAR 	;SEND BACK THE CHAR
411)   03CA C1          		 POP BC	;
412)   03CB 10 F6       		 DJNZ TEN2	;
413)   03CD AF          		 XOR A	;
414)   03CE C9          		 RET	;
417)   03CF 00          		XMTST: NOP ;TEST XMIT ALL 8 BITS	;TEST XMIT ALL 8 BITS
418)   03D0 06 FF       		 LD B,255	;
419)   03D2 C5          		TEN3: PUSH BC	;
420)   03D3 78          		 LD A,B	;
421)   03D4 CD 6A 05    		 CALL RS_TX ;SEND THE BYTE	;SEND THE BYTE
422)   03D7 C1          		 POP BC	;
423)   03D8 10 F8       		 DJNZ TEN3	;
424)   03DA AF          		 XOR A	;
425)   03DB C9          		 RET	;
427)   03DC C9          		TXTSCR: RET	;
434)   03DD 04          		@FF_OFF: INC B  ; DO 0-7 TO 1-8	; DO 0-7 TO 1-8
435)   03DE AF          		      XOR A	;
436)   03DF 37          		      SCF	;
437)   03E0 17          		SBAGN: RLA        ; MOVE IT TO THE RIGHT PLACE	; MOVE IT TO THE RIGHT PLACE
438)   03E1 10 FD       		      DJNZ SBAGN	;
439)   03E3 2F          		      CPL     ;INVERSE BITS ON A	;INVERSE BITS ON A
440)   03E4 47          		      LD B,A	;
441)   03E5 21 87 83    		      LD HL,FFSTAT	;
442)   03E8 7E          		      LD A,(HL)	;
443)   03E9 A0          		      AND B        ;ZERO THE BIT	;ZERO THE BIT
444)   03EA 77          		      LD (HL),A	;
445)   03EB D3 08       		      OUT (DEVFFS),A	;
446)   03ED C9          		      RET	;
449)   03EE 04          		@FF_ON: INC B  ; DO 0-7 TO 1-8	; DO 0-7 TO 1-8
450)   03EF AF          		      XOR A	;
451)   03F0 37          		      SCF	;
452)   03F1 17          		SBAGN: RLA        ; MOVE IT TO THE RIGHT PLACE	; MOVE IT TO THE RIGHT PLACE
453)   03F2 10 FD       		      DJNZ SBAGN	;
454)   03F4 47          		      LD B,A	;
455)   03F5 21 87 83    		      LD HL,FFSTAT	;
456)   03F8 7E          		      LD A,(HL)	;
457)   03F9 B0          		      OR B        ;SET THE BIT	;SET THE BIT
458)   03FA 77          		      LD (HL),A	;
459)   03FB D3 08       		      OUT (DEVFFS),A	;
460)   03FD C9          		      RET	;
462)   03FE E5          		@EPROMOFF: PUSH HL	;
463)   03FF C5          		      PUSH BC	;
464)   0400 06 00       		      LD B,0	;
465)   0402 CD DD 03    		      CALL FF_OFF	;
466)   0405 C1          		      POP BC	;
467)   0406 E1          		      POP HL	;
468)   0407 C9          		      RET	;
470)   0408 E5          		@EPROMON: PUSH HL	;
471)   0409 C5          		         PUSH BC	;
472)   040A 06 00       		     LD B,0	;
473)   040C CD EE 03    		     CALL FF_ON	;
474)   040F C1          		     POP BC	;
475)   0410 E1          		     POP HL	;
476)   0411 C9          		     RET	;
482)   0412 F5          		SOUTAS: PUSH AF  ;SERIAL PRINT ASCII IN DECIMAL	;SERIAL PRINT ASCII IN DECIMAL
483)   0413 26 00       		 LD H,0	;
484)   0415 6F          		 LD L,A	;
485)   0416 11 95 83    		 LD DE,MYNUM	;
486)   0419 CD 9D 18    		 CALL OUTASC	;
488)   041C 3E 0A       		 LD A,10	;
489)   041E 12          		 LD (DE),A	;
490)   041F 13          		 INC DE	;
491)   0420 3E 0D       		 LD A,13	;
492)   0422 12          		 LD (DE),A	;
493)   0423 13          		 INC DE	;
494)   0424 AF          		 XOR A	;
495)   0425 12          		 LD (DE),A	;
497)   0426 21 95 83    		 LD HL,MYNUM	;
498)   0429 CD 79 05    		 CALL RS_TXT	;
499)   042C F1          		 POP AF	;
500)   042D C9          		 RET	;
505)   042E 55 49 3A 55 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0432 50 20 4A 3A 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0436 44 4E 20 58 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   043A 3A 52 55 4E 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   043E 20 54 59 48 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0442 3A 52 53 20 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0446 53 3A 44 49 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   044A 53 50 20 43 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   044E 3A 43 4C 53 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0452 20 4C 3A 4C 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   0456 43 44 53 54 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   045A 20 42 3A 42 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
505)   045E 41 53 49 43 		SMENU DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
506)   0462 00          		 DB 0	;
508)   0463 4C 43 44 20 		STR0 DEFM "LCD INITIALIZED"	;
508)   0467 49 4E 49 54 		STR0 DEFM "LCD INITIALIZED"	;
508)   046B 49 41 4C 49 		STR0 DEFM "LCD INITIALIZED"	;
508)   046F 5A 45 44    		STR0 DEFM "LCD INITIALIZED"	;
509)   0472 00          		 DB 0	;
511)   0473 52 53 32 33 		STR1 DEFM "RS232 INIT"	;
511)   0477 32 20 49 4E 		STR1 DEFM "RS232 INIT"	;
511)   047B 49 54       		STR1 DEFM "RS232 INIT"	;
512)   047D 00          		 DB 0	;
514)   047E 50 52 4F 47 		STR2 DEFM "PROGRAM HALTED"	;
514)   0482 52 41 4D 20 		STR2 DEFM "PROGRAM HALTED"	;
514)   0486 48 41 4C 54 		STR2 DEFM "PROGRAM HALTED"	;
514)   048A 45 44       		STR2 DEFM "PROGRAM HALTED"	;
515)   048C 00          		 DB 0	;
517)   048D 57 41 49 54 		STR02 DEFM "WAITING..."	;
517)   0491 49 4E 47 2E 		STR02 DEFM "WAITING..."	;
517)   0495 2E 2E       		STR02 DEFM "WAITING..."	;
518)   0497 00          		 DB 0	;
520)   0498 50 52 47 20 		DATTR DEFM "PRG TRANSFERED"	;
520)   049C 54 52 41 4E 		DATTR DEFM "PRG TRANSFERED"	;
520)   04A0 53 46 45 52 		DATTR DEFM "PRG TRANSFERED"	;
520)   04A4 45 44       		DATTR DEFM "PRG TRANSFERED"	;
521)   04A6 00          		 DB 0	;
523)   04A7 52 45 43 45 		DATST DEFM "RECEIVING..."	;
523)   04AB 49 56 49 4E 		DATST DEFM "RECEIVING..."	;
523)   04AF 47 2E 2E 2E 		DATST DEFM "RECEIVING..."	;
524)   04B3 00          		 DB 0 	;
526)   04B4 50 52 47 20 		SPRGX DEFM "PRG EXECUTE"	;
526)   04B8 45 58 45 43 		SPRGX DEFM "PRG EXECUTE"	;
526)   04BC 55 54 45    		SPRGX DEFM "PRG EXECUTE"	;
527)   04BF 00          		 DB 0	;
529)   04C0 49 4D 41 47 		STIMG DEFM "IMAGE COPY"	;
529)   04C4 45 20 43 4F 		STIMG DEFM "IMAGE COPY"	;
529)   04C8 50 59       		STIMG DEFM "IMAGE COPY"	;
530)   04CA 00          		 DB 0	;
532)   04CB 53 43 52 45 		TXTMES DEFM "SCREEN READY"	;
532)   04CF 45 4E 20 52 		TXTMES DEFM "SCREEN READY"	;
532)   04D3 45 41 44 59 		TXTMES DEFM "SCREEN READY"	;
533)   04D7 00          		 DB 0	;
535)   04D8 55 49 3A 55 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04DC 50 20 4A 3A 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04E0 44 4E 20 58 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04E4 3A 52 55 4E 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04E8 20 54 59 48 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04EC 3A 52 53 20 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04F0 53 3A 44 49 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04F4 53 50 20 43 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04F8 3A 43 4C 53 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   04FC 20 42 3A 42 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
535)   0500 41 53 49 43 		STRMN DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS B:BASIC"	;
536)   0504 0A 0D 00    		 DB 10,13,0	;
538)   0507 43 4C 45 41 		STRSCR DEFM "CLEARING SCREEN."	;
538)   050B 52 49 4E 47 		STRSCR DEFM "CLEARING SCREEN."	;
538)   050F 20 53 43 52 		STRSCR DEFM "CLEARING SCREEN."	;
538)   0513 45 45 4E 2E 		STRSCR DEFM "CLEARING SCREEN."	;
539)   0517 0A 0D 00    		 DB 10,13,0	;
541)   051A 0A 0D       		STR00 DB 10,13	;
542)   051C 52 53 32 33 		 DEFM "RS232 INITIALIZED"	;
542)   0520 32 20 49 4E 		 DEFM "RS232 INITIALIZED"	;
542)   0524 49 54 49 41 		 DEFM "RS232 INITIALIZED"	;
542)   0528 4C 49 5A 45 		 DEFM "RS232 INITIALIZED"	;
542)   052C 44          		 DEFM "RS232 INITIALIZED"	;
543)   052D 0A 0D 00    		 DB 10,13,0	;
545)   0530 0A 0D       		STR01 DB 10,13	;
546)   0532 57 41 49 54 		 DEFM "WAITING..."	;
546)   0536 49 4E 47 2E 		 DEFM "WAITING..."	;
546)   053A 2E 2E       		 DEFM "WAITING..."	;
547)   053C 0A 0D 00    		 DB 10,13,0	;
548)   053F 00          		 DB 0	;
550)   0540 0A 0D       		STR06 DB 10,13	;
551)   0542 4B 45 59 20 		 DEFM "KEY PRESSED"	;
551)   0546 50 52 45 53 		 DEFM "KEY PRESSED"	;
551)   054A 53 45 44    		 DEFM "KEY PRESSED"	;
552)   054D 0A 0D 00    		 DB 10,13,0	;
553)   0550 00          		 DB 0	;
 15)   0551 	            		 RBR EQU DEVSER+0 ;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)	;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)
 16)   0551 	            		 THR EQU DEVSER+0 ;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)	;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)
 17)   0551 	            		 IER EQU DEVSER+1 ;INTERRUPT ENABLE REGISTER (DLAB = 0)	;INTERRUPT ENABLE REGISTER (DLAB = 0)
 22)   0551 	            		 IIR EQU DEVSER+2 ;INTERRUPT IDENT. REGISTER (READ ONLY)	;INTERRUPT IDENT. REGISTER (READ ONLY)
 27)   0551 	            		 FCR EQU DEVSER+2 ;FIFO CONTROL REGISTER (WRITE ONLY)	;FIFO CONTROL REGISTER (WRITE ONLY)
 35)   0551 	            		 LCR EQU DEVSER+3 ;LINE CONTROL REGISTER	;LINE CONTROL REGISTER
 43)   0551 	            		 MCR EQU DEVSER+4 ;MODEM CONTROL REGISTER 	;MODEM CONTROL REGISTER
 44)   0551 	            		 LSR EQU DEVSER+5 ;LINE STATUS REGISTER	;LINE STATUS REGISTER
 53)   0551 	            		 MSR EQU DEVSER+6 ;MODEM STATUS REGISTER	;MODEM STATUS REGISTER
 54)   0551 	            		 SCR EQU DEVSER+7 ;SCRATCH REGISTER	;SCRATCH REGISTER
 55)   0551 	            		 DLL EQU DEVSER+0 ;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)
 56)   0551 	            		 DLM EQU DEVSER+1 ;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)
 62)   0551 3E 80       		 LD     A,$80           ; Mask to set DLAB on	; Mask to set DLAB on
 63)   0553 D3 23       		 OUT    (LCR),A         ; Send to LINe Control Register	; Send to LINe Control Register
 64)   0555 3E 0C       		 LD     A,12           ; Divisor of 12 = 9600 bps with 1.8432 MHz clock	; Divisor of 12 = 9600 bps with 1.8432 MHz clock
 69)   0557 D3 20       		 OUT    (DLL),A         ; Set LSB of divisor	; Set LSB of divisor
 70)   0559 3E 00       		 LD     A,00            ; This will be the MSB of the divisior	; This will be the MSB of the divisior
 71)   055B D3 21       		 OUT    (DLM),A         ; Send to the MSB register	; Send to the MSB register
 72)   055D 3E 03       		 LD     A,$03           ; 8 bits, 1 stop, no parity (and clear DLAB)	; 8 bits, 1 stop, no parity (and clear DLAB)
 73)   055F D3 23       		 OUT    (LCR),A         ; Write new value to LCR	; Write new value to LCR
 75)   0561 3E 00       		 LD A, 0       	;
 76)   0563 D3 22       		 OUT  (FCR),A      ;//was commented	;//was commented
 77)   0565 3E 00       		 LD     A,$00           ; 5 A=0 Disable all INterrupts	; 5 A=0 Disable all INterrupts
 78)   0567 D3 21       		 OUT    (IER),A         ; Send to INterrupt Enable Register 	; Send to INterrupt Enable Register
 79)   0569 C9          		 RET	;
 82)   056A CD 70 05    		RS_TX: CALL   RSTXRD	;
 83)   056D D3 20       		       OUT     (THR),A	;
 85)   056F C9          		       RET	;
 89)   0570 F5          		RSTXRD: PUSH   AF	;
 90)   0571 DB 25       		RSTXLP: IN     A,(LSR)         ; fetch the control register	; fetch the control register
 91)   0573 CB 6F       		       BIT     5,A             ; bit will be set if UART is ready	; bit will be set if UART is ready
 92)   0575 28 FA       		       JR      Z,RSTXLP	;
 93)   0577 F1          		       POP     AF	;
 94)   0578 C9          		       RET  	;
 97)   0579 7E          		RS_TXT: LD A,(HL)	;
 98)   057A 23          		 INC HL 	;
 99)   057B FE 00       		 CP 0	;
100)   057D C8          		 RET Z	;
101)   057E CD 6A 05    		       CALL RS_TX	;
102)   0581 18 F6       		 JR RS_TXT	;
109)   0583 F3          		RS_RX: DI	;
110)   0584 3E 01       		       LD A,1     ;ready to receive SIGNAL DSR 1	;ready to receive SIGNAL DSR 1
111)   0586 D3 24       		       OUT (MCR),A	;
112)   0588 CD A1 05    		   CALL    RSRXRD              	;
113)   058B AF          		RS_GTCH: XOR A     ;NOT ready to receive SIGNAL DSR 0	;NOT ready to receive SIGNAL DSR 0
114)   058C D3 24       		       OUT (MCR),A        	;
116)   058E DB 20       		      IN A,(RBR)	;
117)   0590 FB          		      EI	;
118)   0591 C9          		       RET	;
120)   0592 3E 01       		RS_RXNW:LD A,1    ;ready to receive SIGNAL DSR 1	;ready to receive SIGNAL DSR 1
121)   0594 D3 24       		       OUT (MCR),A	;
122)   0596 DB 25       		   IN      A,(LSR)         ; fetch the conrtol register	; fetch the conrtol register
123)   0598 CB 47       		       BIT     0,A                    	;
124)   059A 28 03       		       JR Z,RS_NOCHAR	;
125)   059C F3          		       DI	;
126)   059D 18 EC       		       JR RS_GTCH        	;
127)   059F AF          		RS_NOCHAR: XOR A ;RETURN ZERO	;RETURN ZERO
128)   05A0 C9          		       RET	;
135)   05A1 F3          		RSRXRD: DI	;
136)   05A2 F5          		       PUSH    AF	;
137)   05A3 DB 25       		RSRXLP: IN     A,(LSR)         ; fetch the conrtol register	; fetch the conrtol register
138)   05A5 CB 47       		       BIT     0,A             ; bit will be set if UART has data	; bit will be set if UART has data
139)   05A7 28 FA       		       JR      Z,RSRXLP	;
140)   05A9 F1          		       POP     AF	;
141)   05AA FB          		       EI	;
142)   05AB C9          		       RET  	;
146)   05AC DB 25       		RS_KEYRD:IN     A,(LSR)         ; fetch the conrtol register	; fetch the conrtol register
147)   05AE CB 47       		        BIT     0,A             ; bit will be set if UART has data        	; bit will be set if UART has data
148)   05B0 C9          		        RET 	;
150)   05B1 F5          		SHLCD: PUSH AF	;
152)   05B2 F1          		 POP AF	;
154)   05B3 C9          		 RET	;
158)   05B4 F5          		CHKERR: PUSH AF	;
159)   05B5 E5          		 PUSH HL	;
160)   05B6 C5          		 PUSH BC	;
161)   05B7 DB 25       		 IN A,(LSR)  ;FETCH LINE STATUS REGISTER	;FETCH LINE STATUS REGISTER
162)   05B9 CB 67       		 BIT 4,A	;
163)   05BB 28 04       		 JR Z,LBLPE	;
164)   05BD 3E 42       		 LD A,'B' ;$20 ;BREAK	;$20 ;BREAK
165)   05BF 18 1A       		 JR EXIT	;
166)   05C1 CB 57       		LBLPE: BIT 2,A 	;
167)   05C3 28 04       		 JR Z,LBLFE	;
168)   05C5 3E 50       		 LD A,'P' ;$40 ;PARITY	;$40 ;PARITY
169)   05C7 18 12       		 JR EXIT	;
170)   05C9 CB 5F       		LBLFE: BIT 3,A	;
171)   05CB 28 04       		 JR Z,LBLOE	;
172)   05CD 3E 46       		 LD A,'F' ;$60 ;FRAME 	;$60 ;FRAME
173)   05CF 18 0A       		 JR EXIT	;
174)   05D1 CB 4F       		LBLOE: BIT 1,A	;
175)   05D3 28 04       		 JR Z,LBLNE	;
176)   05D5 3E 4F       		 LD A,'O' ;$80  ;OVERRUN	;$80  ;OVERRUN
177)   05D7 18 02       		 JR EXIT	;
178)   05D9 3E 4E       		LBLNE: LD A,'N' ;NO ERROR	;NO ERROR
179)   05DB 21 89 83    		EXIT: LD HL,SERERR	;
180)   05DE 77          		 LD (HL),A	;
182)   05DF C1          		 POP BC	;
183)   05E0 E1          		 POP HL	;
184)   05E1 F1          		 POP AF	;
185)   05E2 C9          		 RET	;
  3)   05E3 F3          		@INTSER:  DI	;
  4)   05E4 E5          		          PUSH HL	;
  5)   05E5 F5          		          PUSH AF	;
  9)   05E6 DB 18       		          IN A,(DEVINP)	;
 10)   05E8 2F          		          CPL	;
 11)   05E9 E6 07       		          AND 0X07 ;BITS 0-2           	;BITS 0-2
 12)   05EB FE 01       		          CP 1	;
 13)   05ED CC F4 05    		          CALL Z,INT_TIMER	;
 15)   05F0 F1          		IS_EX:    POP AF	;
 16)   05F1 E1          		          POP HL	;
 17)   05F2 FB          		          EI	;
 18)   05F3 C9          		          RET           	;
 20)   05F4 3D          		INT_TIMER: DEC A	;
 21)   05F5 D3 40       		          OUT (DEVINT),A	;
 22)   05F7 21 91 83    		          LD HL,TIMECTR	;
 23)   05FA 34          		          INC (HL)  	;
 24)   05FB 7E          		          LD A,(HL)	;
 25)   05FC FE 00       		          CP 0	;
 26)   05FE C0          		          RET NZ	;
 27)   05FF 23          		          INC HL	;
 28)   0600 34          		          INC (HL)  	;
 29)   0601 7E          		          LD A,(HL)	;
 30)   0602 FE 00       		          CP 0	;
 31)   0604 C0          		          RET NZ	;
 32)   0605 23          		          INC HL	;
 33)   0606 34          		          INC (HL)  	;
 34)   0607 7E          		          LD A,(HL)	;
 35)   0608 FE 00       		          CP 0	;
 36)   060A C0          		          RET NZ	;
 37)   060B 23          		          INC HL	;
 38)   060C 34          		          INC (HL)  	;
 39)   060D 7E          		          LD A,(HL)	;
 40)   060E FE 00       		          CP 0	;
 41)   0610 C0          		          RET NZ  	;
 43)   0611 21 00 00    		          LD HL,0	;
 44)   0614 22 91 83    		          LD (TIMECTR),HL	;
 45)   0617 22 93 83    		          LD (TIMECTR+2),HL	;
 46)   061A C9          		          RET	;
 16)   061B 	            		      LCD_RS EQU DEVTFT;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS	;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS
 17)   061B 	            		      LCD_CS EQU DEVTFT+1;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA	;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA
 31)   061B 7B          		   LD A,E	;
 32)   061C D3 11       		   OUT (LCD_CS),A	;
 37)   061E DB 11       		   IN A,(LCD_CS)	;
 38)   0620 C9          		   RET	;
 45)   0621 7A          		   LD A,D  	;
 46)   0622 D3 11       		   OUT (LCD_CS),A	;
 47)   0624 C9          		   RET	;
 53)   0625 7A          		   LD A,D  	;
 54)   0626 D3 10       		   OUT (LCD_RS),A	;
 55)   0628 C9          		   RET	;
 62)   0629 AF          		   XOR A	;
 63)   062A D3 10       		   OUT (LCD_RS),A  ;RS LOW = COMMAND BYTE      	;RS LOW = COMMAND BYTE
 64)   062C CD 21 06    		   CALL LCD_WR_BUS	;
 65)   062F 3E 01       		   LD A,1	;
 66)   0631 D3 10       		   OUT (LCD_RS),A  ;RS HIGH  = DATA BYTE	;RS HIGH  = DATA BYTE
 67)   0633 C9          		   RET	;
 71)   0634 16 E2       		   LD D,0xE2         ;PLL multiplier, set PLL clock to 120M	;PLL multiplier, set PLL clock to 120M
 72)   0636 CD 25 06    		   CALL LCD_WR_COM   ;N=0x36 for 6.5M, 0x23 for 10M crystal	;N=0x36 for 6.5M, 0x23 for 10M crystal
 73)   0639 16 23       		   LD D,0x23 ;1E	;1E
 74)   063B CD 21 06    		   CALL LCD_WR_DAT	;
 75)   063E 16 02       		   LD D,0x02	;
 76)   0640 CD 21 06    		   CALL LCD_WR_DAT	;
 77)   0643 16 54       		   LD D,0x54	;
 78)   0645 CD 21 06    		   CALL LCD_WR_DAT	;
 79)   0648 16 E0       		   LD D,0xE0         ; PLL enable    	; PLL enable
 80)   064A CD 25 06    		   CALL LCD_WR_COM	;
 81)   064D 16 01       		   LD D,0x01	;
 82)   064F CD 21 06    		   CALL LCD_WR_DAT	;
 83)   0652 06 0A       		   LD B,10        ;delay(10);	;delay(10);
 84)   0654 CD 70 18    		   CALL DELAYMICRO	;
 85)   0657 16 E0       		   LD D,0xE0         ; PLL enable    	; PLL enable
 86)   0659 CD 25 06    		   CALL LCD_WR_COM   	;
 87)   065C 16 03       		   LD D,0x03	;
 88)   065E CD 21 06    		   CALL LCD_WR_DAT	;
 89)   0661 06 0A       		   LD B,10        ;delay(10);	;delay(10);
 90)   0663 CD 70 18    		   CALL DELAYMICRO    	;
 92)   0666 16 01       		   LD D,0x01         ; software reset  	; software reset
 93)   0668 CD 25 06    		   CALL LCD_WR_COM   	;
 94)   066B 06 14       		   LD B,20       ;delay(20); MICROSECS	;delay(20); MICROSECS
 95)   066D CD 70 18    		   CALL DELAYMICRO        	;
 96)   0670 16 E6       		   LD D,0xE6         ;PLL setting for PCLK, depends on resolution  	;PLL setting for PCLK, depends on resolution
 97)   0672 CD 25 06    		   CALL LCD_WR_COM           	;
 98)   0675 16 03       		   LD D,0x03	;
 99)   0677 CD 21 06    		   CALL LCD_WR_DAT   	;
100)   067A 16 33       		   LD D,0x33 ;FF	;FF
101)   067C CD 21 06    		   CALL LCD_WR_DAT       	;
102)   067F 16 33       		   LD D,0x33 ;FF	;FF
103)   0681 CD 21 06    		   CALL LCD_WR_DAT   	;
105)   0684 16 B0       		   LD D,0xB0         ;LCD SPECIFICATION	;LCD SPECIFICATION
106)   0686 CD 25 06    		   CALL LCD_WR_COM       	;
107)   0689 16 20       		   LD D,0x20	;
108)   068B CD 21 06    		   CALL LCD_WR_DAT   	;
109)   068E 16 00       		   LD D,0x00	;
110)   0690 CD 21 06    		   CALL LCD_WR_DAT       	;
111)   0693 16 03       		   LD D,0x03         ;Set HDP  799	;Set HDP  799
112)   0695 CD 21 06    		   CALL LCD_WR_DAT   	;
113)   0698 16 1F       		   LD D,0x1F	;
114)   069A CD 21 06    		   CALL LCD_WR_DAT   	;
115)   069D 16 01       		   LD D,0x01         ;Set VDP  479	;Set VDP  479
116)   069F CD 21 06    		   CALL LCD_WR_DAT   	;
117)   06A2 16 DF       		   LD D,0xDF	;
118)   06A4 CD 21 06    		   CALL LCD_WR_DAT 	;
119)   06A7 16 00       		   LD D,0x00	;
120)   06A9 CD 21 06    		   CALL LCD_WR_DAT     	;
123)   06AC 16 B4       		   LD D,0xB4         ;HSYNC	;HSYNC
124)   06AE CD 25 06    		   CALL LCD_WR_COM       	;
125)   06B1 16 04       		   LD D,0x04 ;03         ;Set HT 928	;03         ;Set HT 928
126)   06B3 CD 21 06    		   CALL LCD_WR_DAT   	;
127)   06B6 16 1F       		   LD D,0x1F ;A0	;A0
128)   06B8 CD 21 06    		   CALL LCD_WR_DAT       	;
129)   06BB 16 00       		   LD D,0x00         ;Set HPS  46	;Set HPS  46
130)   06BD CD 21 06    		   CALL LCD_WR_DAT   	;
131)   06C0 16 D2       		   LD D,0xD2 ;2E	;2E
132)   06C2 CD 21 06    		   CALL LCD_WR_DAT   	;
133)   06C5 16 00       		   LD D,0x00 ;30         ;Set HPW  48	;30         ;Set HPW  48
134)   06C7 CD 21 06    		   CALL LCD_WR_DAT   	;
135)   06CA 16 00       		   LD D,0x00         ;Set LPS  15	;Set LPS  15
136)   06CC CD 21 06    		   CALL LCD_WR_DAT 	;
137)   06CF 16 00       		   LD D,0x00 ;0F	;0F
138)   06D1 CD 21 06    		   CALL LCD_WR_DAT   	;
139)   06D4 16 00       		   LD D,0x00	;
140)   06D6 CD 21 06    		   CALL LCD_WR_DAT     	;
142)   06D9 16 B6       		   LD D,0xB6         ;VSYNC	;VSYNC
143)   06DB CD 25 06    		   CALL LCD_WR_COM       	;
144)   06DE 16 02       		   LD D,0x02         ;Set VT 525	;Set VT 525
145)   06E0 CD 21 06    		   CALL LCD_WR_DAT   	;
146)   06E3 16 0C       		   LD D,0x0C ;0D	;0D
147)   06E5 CD 21 06    		   CALL LCD_WR_DAT       	;
148)   06E8 16 00       		   LD D,0x00         ;Set VPS  16	;Set VPS  16
149)   06EA CD 21 06    		   CALL LCD_WR_DAT   	;
150)   06ED 16 22       		   LD D,0x22 ;10	;10
151)   06EF CD 21 06    		   CALL LCD_WR_DAT   	;
152)   06F2 16 00       		   LD D,0x00 ;10         ;Set VPW  16	;10         ;Set VPW  16
153)   06F4 CD 21 06    		   CALL LCD_WR_DAT   	;
154)   06F7 16 00       		   LD D,0x00         ;Set FPS  8	;Set FPS  8
155)   06F9 CD 21 06    		   CALL LCD_WR_DAT 	;
156)   06FC 16 00       		   LD D,0x00 ; 08	; 08
157)   06FE CD 21 06    		   CALL LCD_WR_DAT   	;
159)   0701 16 B8       		   LD D,0xB8         	;
160)   0703 CD 25 06    		   CALL LCD_WR_COM           	;
161)   0706 16 0F       		   LD D,0x0F ;07         ;GPIO3=input, GPIO[2:0]=output	;07         ;GPIO3=input, GPIO[2:0]=output
162)   0708 CD 21 06    		   CALL LCD_WR_DAT         	;
163)   070B 16 01       		   LD D,0x01         ;GPIO0 normal	;GPIO0 normal
164)   070D CD 21 06    		   CALL LCD_WR_DAT 	;
166)   0710 16 BA       		   LD D,0xBA         	;
167)   0712 CD 25 06    		   CALL LCD_WR_COM           	;
168)   0715 16 01       		   LD D,0x01 ;0F	;0F
169)   0717 CD 21 06    		   CALL LCD_WR_DAT   ;GPIO[3:0] out 1	;GPIO[3:0] out 1
171)   071A 16 36       		   LD D,0x36         ;rotation	;rotation
172)   071C CD 25 06    		   CALL LCD_WR_COM           	;
173)   071F 16 08       		   LD D,0x08 ;2A         	;2A
174)   0721 CD 21 06    		   CALL LCD_WR_DAT         	;
176)   0724 16 F0       		   LD D,0xF0         ;pixel data interface	;pixel data interface
177)   0726 CD 25 06    		   CALL LCD_WR_COM           	;
178)   0729 16 06       		   LD D,0x06         ;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES 	;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES
179)   072B CD 21 06    		   CALL LCD_WR_DAT     	;
181)   072E 06 05       		   LD B,5       ;delay(5);	;delay(5);
182)   0730 CD 70 18    		   CALL DELAYMICRO        	;
184)   0733 16 BC       		   LD D,0xBC         	;
185)   0735 CD 25 06    		   CALL LCD_WR_COM           	;
186)   0738 16 40       		   LD D,0x40	;
187)   073A CD 21 06    		   CALL LCD_WR_DAT   	;
188)   073D 16 80       		   LD D,0x80	;
189)   073F CD 21 06    		   CALL LCD_WR_DAT   	;
190)   0742 16 40       		   LD D,0x40	;
191)   0744 CD 21 06    		   CALL LCD_WR_DAT   	;
192)   0747 16 01       		   LD D,0x01	;
193)   0749 CD 21 06    		   CALL LCD_WR_DAT       	;
194)   074C 06 05       		   LD B,5       ;delay(5);	;delay(5);
195)   074E CD 70 18    		   CALL DELAYMICRO  	;
197)   0751 16 29       		   LD D,0x29         ;display on 	;display on
198)   0753 CD 25 06    		   CALL LCD_WR_COM       	;
199)   0756 16 BE       		   LD D,0xBE         ;set PWM for B/L	;set PWM for B/L
200)   0758 CD 25 06    		   CALL LCD_WR_COM                 	;
201)   075B 16 06       		   LD D,0x06	;
202)   075D CD 21 06    		   CALL LCD_WR_DAT                 	;
203)   0760 16 F0       		   LD D,0xF0         	;
204)   0762 CD 21 06    		   CALL LCD_WR_DAT   	;
205)   0765 16 01       		   LD D,0x01         	;
206)   0767 CD 21 06    		   CALL LCD_WR_DAT   	;
207)   076A 16 F0       		   LD D,0xF0         	;
208)   076C CD 21 06    		   CALL LCD_WR_DAT   	;
209)   076F 16 00       		   LD D,0x00         	;
210)   0771 CD 21 06    		   CALL LCD_WR_DAT   	;
211)   0774 16 00       		   LD D,0x00         	;
212)   0776 CD 21 06    		   CALL LCD_WR_DAT                   	;
214)   0779 16 D0       		   LD D,0xD0         	;
215)   077B CD 25 06    		   CALL LCD_WR_COM                 	;
216)   077E 16 0D       		   LD D,0x0D         	;
217)   0780 CD 21 06    		   CALL LCD_WR_DAT         	;
220)   0783 21 00 00    		   LD HL,0	;
221)   0786 E5          		   PUSH HL	;
222)   0787 E5          		   PUSH HL	;
223)   0788 21 1F 03    		   LD HL,799	;
224)   078B E5          		   PUSH HL	;
225)   078C 21 DF 01    		   LD HL,479	;
226)   078F E5          		   PUSH HL	;
227)   0790 CD 94 07    		   CALL LCD_SETXY	;
228)   0793 C9          		   RET	;
245)   0794 DD 21 02 00 		   LD IX,2	;
246)   0798 DD 39       		   ADD IX,SP         	;
247)   079A 16 2A       		   LD D,0x2A         ;SEND IX PARAMS	;SEND IX PARAMS
248)   079C CD 25 06    		   CALL LCD_WR_COM    	;
249)   079F DD 56 07    		   LD D,(IX+7)	;
250)   07A2 CD 21 06    		   CALL LCD_WR_DAT	;
251)   07A5 DD 56 06    		   LD D,(IX+6)	;
252)   07A8 CD 21 06    		   CALL LCD_WR_DAT	;
253)   07AB DD 56 03    		   LD D,(IX+3)	;
254)   07AE CD 21 06    		   CALL LCD_WR_DAT	;
255)   07B1 DD 56 02    		   LD D,(IX+2)	;
256)   07B4 CD 21 06    		   CALL LCD_WR_DAT       	;
257)   07B7 16 2B       		   LD D,0x2B         ;SEND Y PARAMS	;SEND Y PARAMS
258)   07B9 CD 25 06    		   CALL LCD_WR_COM   	;
259)   07BC DD 56 05    		   LD D,(IX+5)	;
260)   07BF CD 21 06    		   CALL LCD_WR_DAT	;
261)   07C2 DD 56 04    		   LD D,(IX+4)	;
262)   07C5 CD 21 06    		   CALL LCD_WR_DAT	;
263)   07C8 DD 56 01    		   LD D,(IX+1)	;
264)   07CB CD 21 06    		   CALL LCD_WR_DAT	;
265)   07CE DD 56 00    		   LD D,(IX)	;
266)   07D1 CD 21 06    		   CALL LCD_WR_DAT       	;
267)   07D4 16 2C       		   LD D,0x2C         ;SEND DATA	;SEND DATA
268)   07D6 CD 25 06    		   CALL LCD_WR_COM   	;
269)   07D9 D1          		   POP DE	;
270)   07DA 21 08 00    		   LD HL,4*2       ;REMOVE 4 PARAMS FROM STACK	;REMOVE 4 PARAMS FROM STACK
271)   07DD 39          		   ADD HL,SP	;
272)   07DE F9          		   LD SP,HL	;
273)   07DF EB          		   EX DE,HL	;
274)   07E0 E9          		   JP (HL)        	;
280)   07E1 54          		   LD D,H        	;
281)   07E2 CD 21 06    		   CALL LCD_WR_DAT 	;
282)   07E5 55          		   LD D,L	;
283)   07E6 CD 21 06    		   CALL LCD_WR_DAT 	;
284)   07E9 C9          		   RET	;
289)   07EA 16 2E       		   LD D,0x2E         ;READ DATA	;READ DATA
290)   07EC CD 25 06    		   CALL LCD_WR_COM           	;
291)   07EF CD 1E 06    		   CALL LCD_RD_DAT 	;
292)   07F2 67          		   LD H,A	;
293)   07F3 CD 1E 06    		   CALL LCD_RD_DAT 	;
294)   07F6 6F          		   LD L,A	;
295)   07F7 C9          		   RET    	;
301)   07F8 DD E5       		@LCD_READPIXEL: PUSH IX ; 2 PARAMS ON STACK TOTAL 4 BYTES	; 2 PARAMS ON STACK TOTAL 4 BYTES
302)   07FA DD 21 04 00 		   LD IX,4    ;2 FOR RET ADDR AND 2 FOR PUSH IX	;2 FOR RET ADDR AND 2 FOR PUSH IX
303)   07FE DD 39       		   ADD IX,SP    	;
304)   0800 DD 66 03    		   LD H,(IX+3)   ;X	;X
305)   0803 DD 6E 02    		   LD L,(IX+2)   ;X	;X
306)   0806 DD 56 01    		   LD D,(IX+1) ;Y	;Y
307)   0809 DD 5E 00    		   LD E,(IX) ;Y	;Y
308)   080C E5          		   PUSH HL	;
309)   080D D5          		   PUSH DE	;
310)   080E E5          		   PUSH HL	;
311)   080F D5          		   PUSH DE	;
312)   0810 CD 94 07    		   CALL LCD_SETXY	;
313)   0813 CD EA 07    		   CALL LCD_GETPIXEL	;
314)   0816 E5          		   PUSH HL    	;
315)   0817 CD 49 08    		   CALL LCD_CLRXY	;
316)   081A D1          		   POP DE  ;RESULT COLOR	;RESULT COLOR
317)   081B DD E1       		   POP IX	;
318)   081D C1          		   POP BC  ;RET ADDR	;RET ADDR
319)   081E 21 04 00    		   LD HL,2*2        ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
320)   0821 39          		   ADD HL,SP	;
321)   0822 F9          		   LD SP,HL	;
322)   0823 EB          		   EX DE,HL ;HL RESULT	;HL RESULT
323)   0824 C5          		   PUSH BC  ;RET ADDR ON STACK	;RET ADDR ON STACK
324)   0825 C9          		   RET	;
328)   0826 DD 21 02 00 		   LD IX,2     ;setXY(x, y, x, y);	;setXY(x, y, x, y);
329)   082A DD 39       		   ADD IX,SP	;
330)   082C DD 66 03    		   LD H,(IX+3)   ;X	;X
331)   082F DD 6E 02    		   LD L,(IX+2)   ;X	;X
332)   0832 DD 56 01    		   LD D,(IX+1) ;Y	;Y
333)   0835 DD 5E 00    		   LD E,(IX) ;Y	;Y
334)   0838 E5          		   PUSH HL	;
335)   0839 D5          		   PUSH DE	;
336)   083A E5          		   PUSH HL	;
337)   083B D5          		   PUSH DE	;
338)   083C CD 94 07    		   CALL LCD_SETXY	;
339)   083F 2A 01 83    		   LD HL,(FCOLOR)	;
340)   0842 CD E1 07    		   CALL LCD_SETPIXEL	;
341)   0845 CD 49 08    		   CALL LCD_CLRXY	;
342)   0848 C9          		   RET	;
345)   0849 21 00 00    		    LD HL,0	;
346)   084C E5          		    PUSH HL	;
347)   084D E5          		    PUSH HL	;
348)   084E 21 1F 03    		    LD HL,LCD_WIDTH	;
349)   0851 E5          		    PUSH HL	;
350)   0852 21 DF 01    		    LD HL,LCD_HEIGHT	;
351)   0855 E5          		    PUSH HL	;
352)   0856 CD 94 07    		    CALL LCD_SETXY	;
353)   0859 C9          		    RET	;
357)   085A DD 21 02 00 		     LD IX,2	;
358)   085E DD 39       		     ADD IX,SP	;
359)   0860 DD 66 05    		     LD H,(IX+5)   ;X  	;X
360)   0863 DD 6E 04    		     LD L,(IX+4)   ;X	;X
361)   0866 DD 56 03    		     LD D,(IX+3)   ;Y	;Y
362)   0869 DD 5E 02    		     LD E,(IX+2)   ;Y	;Y
363)   086C DD 46 01    		     LD B,(IX+1)   ;LENGTH	;LENGTH
364)   086F DD 4E 00    		     LD C,(IX)     ;LENGTH	;LENGTH
367)   0872 E5          		     PUSH HL	;
368)   0873 21 00 00    		     LD HL,0	;
369)   0876 B7          		     OR A           ;CLEAR CARRY	;CLEAR CARRY
370)   0877 ED 42       		     SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
371)   0879 38 0A       		     JR C,POSH1	;
372)   087B AF          		     XOR A          ;l=-l	;l=-l
373)   087C 91          		  SUB C	;
374)   087D 4F          		  LD C,A	;
375)   087E 9F          		  SBC A,A	;
376)   087F 90          		  SUB B	;
377)   0880 47          		  LD B,A	;
378)   0881 E1          		  POP HL	;
379)   0882 ED 42       		     SBC HL,BC       ;x -= l;	;x -= l;
380)   0884 E5          		     PUSH HL                    	;
381)   0885 E1          		POSH1: POP HL	;
382)   0886 E5          		  PUSH HL	;
383)   0887 D5          		     PUSH DE	;
384)   0888 09          		     ADD HL,BC	;
385)   0889 E5          		     PUSH HL	;
386)   088A D5          		     PUSH DE	;
387)   088B CD 94 07    		     CALL LCD_SETXY   ;setXY(x, y, x+l, y);	;setXY(x, y, x+l, y);
388)   088E 2A 01 83    		     LD HL,(FCOLOR)    	;
389)   0891 CD E1 07    		NXTH1: CALL LCD_SETPIXEL	;
390)   0894 0B          		     DEC BC	;
391)   0895 79          		     LD A,C	;
392)   0896 B0          		     OR B	;
393)   0897 20 F8       		     JR NZ, NXTH1     	;
394)   0899 CD 49 08    		     CALL LCD_CLRXY	;
395)   089C D1          		     POP DE	;
396)   089D 21 06 00    		     LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
397)   08A0 39          		     ADD HL,SP	;
398)   08A1 F9          		     LD SP,HL      	;
399)   08A2 EB          		     EX DE,HL	;
400)   08A3 E9          		     JP (HL)	;
406)   08A4 DD 21 02 00 		     LD IX,2	;
407)   08A8 DD 39       		     ADD IX,SP	;
408)   08AA DD 56 05    		     LD D,(IX+5)   ;X  	;X
409)   08AD DD 5E 04    		     LD E,(IX+4)   ;X	;X
410)   08B0 DD 66 03    		     LD H,(IX+3)   ;Y	;Y
411)   08B3 DD 6E 02    		     LD L,(IX+2)   ;Y	;Y
412)   08B6 DD 46 01    		     LD B,(IX+1)   ;LENGTH	;LENGTH
413)   08B9 DD 4E 00    		     LD C,(IX)     ;LENGTH     	;LENGTH
414)   08BC E5          		     PUSH HL	;
415)   08BD 21 00 00    		     LD HL,0	;
416)   08C0 B7          		     OR A           ;CLEAR CARRY	;CLEAR CARRY
417)   08C1 ED 42       		     SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
418)   08C3 38 0A       		     JR C,POSV1	;
419)   08C5 AF          		     XOR A          ;l=-l	;l=-l
420)   08C6 91          		  SUB C	;
421)   08C7 4F          		  LD C,A	;
422)   08C8 9F          		  SBC A,A	;
423)   08C9 90          		  SUB B	;
424)   08CA 47          		  LD B,A	;
425)   08CB E1          		  POP HL	;
426)   08CC ED 42       		     SBC HL,BC       ;Y -= l;	;Y -= l;
427)   08CE E5          		     PUSH HL                   	;
428)   08CF E1          		POSV1: POP HL	;
429)   08D0 D5          		  PUSH DE	;
430)   08D1 E5          		     PUSH HL	;
431)   08D2 D5          		     PUSH DE	;
432)   08D3 09          		     ADD HL,BC	;
433)   08D4 E5          		     PUSH HL	;
434)   08D5 CD 94 07    		     CALL LCD_SETXY   ;setXY(x, y, x, y+l);	;setXY(x, y, x, y+l);
435)   08D8 2A 01 83    		     LD HL,(FCOLOR)    	;
436)   08DB CD E1 07    		NXTV1: CALL LCD_SETPIXEL	;
437)   08DE 0B          		     DEC BC	;
438)   08DF 79          		     LD A,C	;
439)   08E0 B0          		     OR B	;
440)   08E1 20 F8       		     JR NZ, NXTV1     	;
441)   08E3 CD 49 08    		     CALL LCD_CLRXY	;
442)   08E6 D1          		     POP DE	;
443)   08E7 21 06 00    		     LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
444)   08EA 39          		     ADD HL,SP	;
445)   08EB F9          		     LD SP,HL	;
446)   08EC EB          		     EX DE,HL	;
447)   08ED E9          		     JP (HL)	;
451)   08EE DD 21 02 00 		     LD IX,2	;
452)   08F2 DD 39       		     ADD IX,SP	;
462)   08F4 DD 66 05    		     LD H,(IX+5)   ;Y1	;Y1
463)   08F7 DD 6E 04    		     LD L,(IX+4)   ;Y1	;Y1
464)   08FA DD 56 01    		     LD D,(IX+1)   ;Y2	;Y2
465)   08FD DD 5E 00    		     LD E,(IX)     ;Y2	;Y2
466)   0900 B7          		     OR A	;
467)   0901 ED 52       		     SBC HL,DE	;
468)   0903 20 17       		     JR NZ,YNOTEQ	;
470)   0905 DD 46 07    		     LD B,(IX+7)   ;X1	;X1
471)   0908 DD 4E 06    		     LD C,(IX+6)   ;X1	;X1
472)   090B C5          		     PUSH BC       ;X1 1ST PARAM ON STACK	;X1 1ST PARAM ON STACK
473)   090C D5          		     PUSH DE    ;Y 2ND PARAM ON STACK	;Y 2ND PARAM ON STACK
474)   090D DD 66 03    		     LD H,(IX+3)   ;X2	;X2
475)   0910 DD 6E 02    		     LD L,(IX+2)   ;X2       	;X2
476)   0913 ED 42       		     SBC HL,BC     ;X2-X1 = LENGTH OF HORIZ LINE	;X2-X1 = LENGTH OF HORIZ LINE
477)   0915 E5          		     PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
478)   0916 CD 5A 08    		     CALL LCD_DRAWHLINE	;
479)   0919 C3 C9 0A    		     JP DLNEX	;
481)   091C DD 66 07    		     LD H,(IX+7)   ;X1	;X1
482)   091F DD 6E 06    		     LD L,(IX+6)   ;X1	;X1
483)   0922 DD 56 03    		     LD D,(IX+3)   ;X2	;X2
484)   0925 DD 5E 02    		     LD E,(IX+2)   ;X2 	;X2
485)   0928 B7          		     OR A	;
486)   0929 ED 52       		     SBC HL,DE	;
487)   092B 20 17       		     JR NZ,XNOTEQ	;
489)   092D D5          		     PUSH DE       ;X2=X1 1ST PARAM ON STACK	;X2=X1 1ST PARAM ON STACK
490)   092E DD 46 05    		     LD B,(IX+5)   ;Y1	;Y1
491)   0931 DD 4E 04    		     LD C,(IX+4)   ;Y1	;Y1
492)   0934 C5          		     PUSH BC       ;Y1 2ND PARAM ON STACK	;Y1 2ND PARAM ON STACK
493)   0935 DD 66 01    		     LD H,(IX+1)   ;Y2	;Y2
494)   0938 DD 6E 00    		     LD L,(IX)   ;Y2       	;Y2
495)   093B ED 42       		     SBC HL,BC     ;Y2-Y1 = LENGTH OF VERT LINE	;Y2-Y1 = LENGTH OF VERT LINE
496)   093D E5          		     PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
497)   093E CD A4 08    		     CALL LCD_DRAWVLINE	;
498)   0941 C3 C9 0A    		     JP DLNEX	;
501)   0944 38 04       		     JR C,X2GTX1	;
503)   0946 AF          		     XOR A  	;
504)   0947 3D          		     DEC A  ;XSTEP=-1	;XSTEP=-1
505)   0948 18 0D       		     JR DLNXT1	;
508)   094A D5          		     PUSH DE	;
509)   094B E1          		     POP HL	;
510)   094C DD 56 07    		     LD D,(IX+7)   ;X1	;X1
511)   094F DD 5E 06    		     LD E,(IX+6)   ;X1 	;X1
512)   0952 B7          		     OR A     	;
513)   0953 ED 52       		     SBC HL,DE     ;X2-X1 ON HL	;X2-X1 ON HL
515)   0955 3E 01       		     LD A,1        ;XSTEP=1	;XSTEP=1
517)   0957 06 00       		     LD B,0	;
518)   0959 0E 00       		     LD C,0	;
519)   095B C5          		     PUSH BC       ;T	;T
520)   095C E5          		     PUSH HL       ;DX	;DX
521)   095D FE 01       		     CP 1	;
522)   095F 28 02       		     JR Z,DLXMINUS1	;
523)   0961 06 FF       		     LD B,0XFF	;
524)   0963 4F          		DLXMINUS1:LD C,A     	;
525)   0964 C5          		     PUSH BC       ;XSTEP	;XSTEP
526)   0965 DD 66 05    		     LD H,(IX+5)   ;Y1	;Y1
527)   0968 DD 6E 04    		     LD L,(IX+4)   ;Y1	;Y1
528)   096B DD 56 01    		     LD D,(IX+1)   ;Y2	;Y2
529)   096E DD 5E 00    		     LD E,(IX)     ;Y2      	;Y2
530)   0971 B7          		     OR A	;
531)   0972 ED 52       		     SBC HL,DE	;
532)   0974 38 04       		     JR C,Y2GTY1  ;HL=Y1-Y2	;HL=Y1-Y2
533)   0976 AF          		     XOR A	;
534)   0977 3D          		     DEC A         ;YSTEP=-1	;YSTEP=-1
535)   0978 18 0F       		     JR DLNXT2	;
538)   097A D5          		     PUSH DE	;
539)   097B E1          		     POP HL	;
540)   097C DD 56 05    		     LD D,(IX+5)   ;Y1	;Y1
541)   097F DD 5E 04    		     LD E,(IX+4)   ;Y1  	;Y1
542)   0982 B7          		     OR A	;
543)   0983 ED 52       		     SBC HL,DE  ;HL=Y2-Y1    HL=DY      	;HL=Y2-Y1    HL=DY
544)   0985 06 00       		     LD B,0	;
545)   0987 3E 01       		     LD A,1        ;YSTEP=1	;YSTEP=1
547)   0989 FE 01       		     CP 1	;
548)   098B 28 02       		     JR Z,DLYMINUS1	;
549)   098D 06 FF       		     LD B,0XFF	;
551)   098F 4F          		     LD C,A      	;
552)   0990 E5          		     PUSH HL       ;DY	;DY
553)   0991 C5          		     PUSH BC       ;YSTEP   	;YSTEP
554)   0992 FD 21 00 00 		     LD IY,0	;
555)   0996 FD 39       		     ADD IY,SP	;
570)   0998 FD 56 07    		     LD D,(IY+7)    ;DX	;DX
571)   099B FD 5E 06    		     LD E,(IY+6)    ;DX	;DX
572)   099E B7          		     OR A	;
573)   099F ED 52       		     SBC HL,DE      ;DY-DX	;DY-DX
574)   09A1 DA 36 0A    		     JP C,DXGTDY	;
575)   09A4 CA 36 0A    		     JP Z,DXGTDY	;
577)   09A7 19          		     ADD HL,DE      ;HL=DY	;HL=DY
578)   09A8 44          		     LD B,H	;
579)   09A9 4D          		     LD C,L	;
580)   09AA CB 38       		     SRL B	;
581)   09AC CB 19       		     RR C           ;(dy >> 1)	;(dy >> 1)
582)   09AE 21 00 00    		     LD HL,0	;
583)   09B1 ED 42       		     SBC HL,BC      ;t = - (dy >> 1);	;t = - (dy >> 1);
584)   09B3 FD 74 09    		     LD (IY+9),H    ;SAVE T	;SAVE T
585)   09B6 FD 75 08    		     LD (IY+8),L    ;SAVE T	;SAVE T
587)   09B9 DD 56 05    		     LD D,(IX+5)   ;ROW	;ROW
588)   09BC DD 5E 04    		     LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
589)   09BF DD 66 07    		     LD H,(IX+7)   ;COL	;COL
590)   09C2 DD 6E 06    		     LD L,(IX+6)   ;COL=X1	;COL=X1
591)   09C5 D5          		     PUSH DE	;
592)   09C6 DD E5       		     PUSH IX	;
593)   09C8 E5          		     PUSH HL	;
594)   09C9 D5          		     PUSH DE	;
595)   09CA E5          		     PUSH HL	;
596)   09CB D5          		     PUSH DE	;
597)   09CC CD 94 07    		     CALL LCD_SETXY	;
598)   09CF 2A 01 83    		     LD HL,(FCOLOR)    	;
599)   09D2 CD E1 07    		     CALL LCD_SETPIXEL	;
600)   09D5 DD E1       		     POP IX	;
601)   09D7 D1          		     POP DE	;
602)   09D8 DD 66 01    		     LD H,(IX+1)   ;Y2	;Y2
603)   09DB DD 6E 00    		     LD L,(IX)     ;Y2 	;Y2
604)   09DE ED 52       		     SBC HL,DE     ; ROW=Y2	; ROW=Y2
605)   09E0 CA C4 0A    		     JP Z,DLEXIT	;
606)   09E3 FD 46 01    		     LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
607)   09E6 FD 4E 00    		     LD C,(IY)     ;YSTEP LO	;YSTEP LO
608)   09E9 EB          		     EX DE,HL	;
609)   09EA 09          		     ADD HL,BC     ;row += ystep;	;row += ystep;
610)   09EB DD 74 05    		     LD (IX+5),H   ;SAVE ROW	;SAVE ROW
611)   09EE DD 75 04    		     LD (IX+4),L   ;   	;
613)   09F1 FD 56 09    		     LD D,(IY+9)   ; T	; T
614)   09F4 FD 5E 08    		     LD E,(IY+8)   ; T      	; T
615)   09F7 FD 66 07    		     LD H,(IY+7)   ;DX	;DX
616)   09FA FD 6E 06    		     LD L,(IY+6)   ;DX	;DX
617)   09FD 19          		     ADD HL,DE	;
618)   09FE FD 74 09    		     LD (IY+9),H   ;t += dx;	;t += dx;
619)   0A01 FD 75 08    		     LD (IY+8),L	;
620)   0A04 EB          		     EX DE,HL	;
621)   0A05 21 00 80    		     LD HL,$8000	;
622)   0A08 ED 52       		     SBC HL,DE     ;CHECK IF T<0	;CHECK IF T<0
623)   0A0A 38 AD       		     JR C,DLAGN1   ; CARRY SET IF NEGATIVE	; CARRY SET IF NEGATIVE
624)   0A0C FD 46 05    		     LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
625)   0A0F FD 4E 04    		     LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
626)   0A12 DD 66 07    		     LD H,(IX+7)   ;COL HI	;COL HI
627)   0A15 DD 6E 06    		     LD L,(IX+6)   ;COL LO	;COL LO
628)   0A18 09          		     ADD HL,BC     ;col += xstep;	;col += xstep;
629)   0A19 DD 74 07    		     LD (IX+7),H   ;SAVE COL	;SAVE COL
630)   0A1C DD 75 06    		     LD (IX+6),L   ;         	;
632)   0A1F FD 66 09    		     LD H,(IY+9)   ; T	; T
633)   0A22 FD 6E 08    		     LD L,(IY+8)   ; T      	; T
634)   0A25 FD 46 03    		     LD B,(IY+3)   ;DY	;DY
635)   0A28 FD 4E 02    		     LD C,(IY+2)   ;DY	;DY
636)   0A2B ED 42       		     SBC HL,BC	;
637)   0A2D FD 74 09    		     LD (IY+9),H   ;t -= dY;	;t -= dY;
638)   0A30 FD 75 08    		     LD (IY+8),L       	;
639)   0A33 C3 B9 09    		     JP DLAGN1	;
641)   0A36 19          		     ADD HL,DE      ;HL=DY DE=DX	;HL=DY DE=DX
642)   0A37 42          		     LD B,D	;
643)   0A38 4B          		     LD C,E	;
644)   0A39 CB 38       		     SRL B	;
645)   0A3B CB 19       		     RR C           ;(dX >> 1)	;(dX >> 1)
646)   0A3D 21 00 00    		     LD HL,0	;
647)   0A40 ED 42       		     SBC HL,BC      ;t = - (dX >> 1);	;t = - (dX >> 1);
648)   0A42 FD 74 09    		     LD (IY+9),H    ;SAVE T	;SAVE T
649)   0A45 FD 75 08    		     LD (IY+8),L    ;SAVE T	;SAVE T
651)   0A48 DD 56 05    		     LD D,(IX+5)   ;ROW	;ROW
652)   0A4B DD 5E 04    		     LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
653)   0A4E DD 66 07    		     LD H,(IX+7)   ;COL	;COL
654)   0A51 DD 6E 06    		     LD L,(IX+6)   ;COL=X1	;COL=X1
655)   0A54 E5          		     PUSH HL       ;SAVE COL	;SAVE COL
656)   0A55 DD E5       		     PUSH IX	;
657)   0A57 E5          		     PUSH HL	;
658)   0A58 D5          		     PUSH DE	;
659)   0A59 E5          		     PUSH HL	;
660)   0A5A D5          		     PUSH DE	;
661)   0A5B CD 94 07    		     CALL LCD_SETXY	;
662)   0A5E 2A 01 83    		     LD HL,(FCOLOR)    	;
663)   0A61 CD E1 07    		     CALL LCD_SETPIXEL	;
664)   0A64 DD E1       		     POP IX	;
665)   0A66 D1          		     POP DE        ;RETRIEVE COL	;RETRIEVE COL
666)   0A67 DD 66 03    		     LD H,(IX+3)   ;X2	;X2
667)   0A6A DD 6E 02    		     LD L,(IX+2)   ;X2 	;X2
668)   0A6D ED 52       		     SBC HL,DE     ; COL=X2?	; COL=X2?
669)   0A6F 28 53       		     JR Z,DLEXIT	;
670)   0A71 EB          		     EX DE,HL      ;HL=COL	;HL=COL
671)   0A72 FD 46 05    		     LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
672)   0A75 FD 4E 04    		     LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
673)   0A78 09          		     ADD HL,BC     ;col += xstep;	;col += xstep;
674)   0A79 DD 74 07    		     LD (IX+7),H   ;SAVE COL	;SAVE COL
675)   0A7C DD 75 06    		     LD (IX+6),L   ;   	;
676)   0A7F FD 56 09    		     LD D,(IY+9)   ; T	; T
677)   0A82 FD 5E 08    		     LD E,(IY+8)   ; T      	; T
678)   0A85 FD 66 03    		     LD H,(IY+3)   ;DY	;DY
679)   0A88 FD 6E 02    		     LD L,(IY+2)   ;DY	;DY
680)   0A8B 19          		     ADD HL,DE	;
681)   0A8C FD 74 09    		     LD (IY+9),H   ;t += dY;	;t += dY;
682)   0A8F FD 75 08    		     LD (IY+8),L	;
683)   0A92 EB          		     EX DE,HL      ;T=DE	;T=DE
684)   0A93 21 00 80    		     LD HL,$8000  	;
685)   0A96 ED 52       		     SBC HL,DE    ;CHECK IF T<0	;CHECK IF T<0
686)   0A98 38 AE       		     JR C,DLAGN2  ;CARRY SET IF NEGATIVE    	;CARRY SET IF NEGATIVE
687)   0A9A FD 46 01    		     LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
688)   0A9D FD 4E 00    		     LD C,(IY)     ;YSTEP LO	;YSTEP LO
689)   0AA0 DD 66 05    		     LD H,(IX+5)   ;ROW HI	;ROW HI
690)   0AA3 DD 6E 04    		     LD L,(IX+4)   ;ROW LO	;ROW LO
691)   0AA6 09          		     ADD HL,BC     ;ROW += Ystep;	;ROW += Ystep;
692)   0AA7 DD 74 05    		     LD (IX+5),H   ;SAVE COL	;SAVE COL
693)   0AAA DD 75 04    		     LD (IX+4),L   ;         	;
695)   0AAD FD 66 09    		     LD H,(IY+9)   ; T	; T
696)   0AB0 FD 6E 08    		     LD L,(IY+8)   ; T      	; T
697)   0AB3 FD 46 07    		     LD B,(IY+7)   ;DX	;DX
698)   0AB6 FD 4E 06    		     LD C,(IY+6)   ;DX	;DX
699)   0AB9 ED 42       		     SBC HL,BC	;
700)   0ABB FD 74 09    		     LD (IY+9),H   ;t -= dX;	;t -= dX;
701)   0ABE FD 75 08    		     LD (IY+8),L       	;
702)   0AC1 C3 48 0A    		     JP DLAGN2	;
705)   0AC4 21 0A 00    		     LD HL,5*2     ;REMOVE 5 IY PARAMS FROM STACK	;REMOVE 5 IY PARAMS FROM STACK
706)   0AC7 39          		     ADD HL,SP     ;	;
707)   0AC8 F9          		     LD SP,HL           	;
708)   0AC9 D1          		DLNEX:POP DE       ;RET ADDR	;RET ADDR
709)   0ACA 21 08 00    		     LD HL,4*2       ;REMOVE 4 PARAMS FROM STACK	;REMOVE 4 PARAMS FROM STACK
710)   0ACD 39          		     ADD HL,SP	;
711)   0ACE F9          		     LD SP,HL     	;
712)   0ACF EB          		     EX DE,HL	;
713)   0AD0 E9          		     JP (HL)	;
718)   0AD1 C5          		@PLOTP:PUSH BC      ;SAVE BC	;SAVE BC
719)   0AD2 DD E5       		     PUSH IX	;
721)   0AD4 D5          		     PUSH DE	;
722)   0AD5 E5          		     PUSH HL	;
723)   0AD6 D5          		     PUSH DE	;
724)   0AD7 E5          		     PUSH HL	;
725)   0AD8 CD 94 07    		     CALL LCD_SETXY      	;
726)   0ADB 2A 01 83    		     LD HL,(FCOLOR)	;
727)   0ADE CD E1 07    		     CALL LCD_SETPIXEL  	;
729)   0AE1 DD E1       		     POP IX	;
730)   0AE3 C1          		     POP BC        ;RESTORE BC	;RESTORE BC
731)   0AE4 C9          		     RET   	;
736)   0AE5 E1          		     POP HL         ;GET THE RETURN ADDRESS	;GET THE RETURN ADDRESS
737)   0AE6 D5          		     PUSH DE        ;F VAR 	;F VAR
738)   0AE7 D5          		     PUSH DE        ;DDF_X 	;DDF_X
739)   0AE8 D5          		     PUSH DE        ;DDF_Y	;DDF_Y
740)   0AE9 D5          		     PUSH DE        ;X1	;X1
741)   0AEA D5          		     PUSH DE        ;Y1	;Y1
742)   0AEB E5          		     PUSH HL        ;RET ADDR	;RET ADDR
743)   0AEC DD 21 02 00 		     LD IX,2	;
744)   0AF0 DD 39       		     ADD IX,SP	;
762)   0AF2 AF          		     XOR A	;
763)   0AF3 DD 56 0B    		     LD D,(IX+11)    ;R	;R
764)   0AF6 DD 5E 0A    		     LD E,(IX+10)    ;R	;R
765)   0AF9 DD 72 01    		     LD (IX+1),D     ;Y1=R	;Y1=R
766)   0AFC DD 73 00    		     LD (IX+0),E	;
767)   0AFF 21 01 00    		     LD HL,1	;
768)   0B02 DD 74 07    		     LD (IX+7),H     ;DDF_X=1	;DDF_X=1
769)   0B05 DD 75 06    		     LD (IX+6),L	;
770)   0B08 DD 74 03    		     LD (IX+3),H     ;X1=0	;X1=0
771)   0B0B DD 74 02    		     LD (IX+2),H      	;
772)   0B0E ED 52       		     SBC HL,DE	;
773)   0B10 DD 74 09    		     LD (IX+9),H     ;F	;F
774)   0B13 DD 75 08    		     LD (IX+8),L     ;F	;F
776)   0B16 EB          		     EX DE,HL        ;HL=RADIUS	;HL=RADIUS
777)   0B17 29          		     ADD HL,HL       ;2*R	;2*R
778)   0B18 EB          		     EX DE,HL	;
779)   0B19 21 00 00    		     LD HL,0	;
780)   0B1C ED 52       		     SBC HL,DE          ;-2*R	;-2*R
781)   0B1E DD 74 05    		     LD (IX+5),H	;
782)   0B21 DD 75 04    		     LD (IX+4),L     ;DDF_Y	;DDF_Y
784)   0B24 DD 66 0D    		     LD H,(IX+13)    ;Y	;Y
785)   0B27 DD 6E 0C    		     LD L,(IX+12)	;
786)   0B2A E5          		     PUSH HL         ;SAVE Y	;SAVE Y
787)   0B2B DD 56 0B    		     LD D,(IX+11)    ;R	;R
788)   0B2E DD 5E 0A    		     LD E,(IX+10)	;
789)   0B31 D5          		     PUSH DE         ;SAVE R	;SAVE R
790)   0B32 19          		     ADD HL,DE       ;Y+R      	;Y+R
791)   0B33 DD 56 0F    		     LD D,(IX+15)    ;X	;X
792)   0B36 DD 5E 0E    		     LD E,(IX+14)	;
793)   0B39 D5          		     PUSH DE         ;SAVE X	;SAVE X
795)   0B3A CD D1 0A    		     CALL PLOTP      	;
797)   0B3D D1          		     POP DE        ;GET X	;GET X
798)   0B3E C1          		     POP BC        ;GET R	;GET R
799)   0B3F E1          		     POP HL        ;GET Y	;GET Y
800)   0B40 E5          		     PUSH HL       ;SAVE VARS	;SAVE VARS
801)   0B41 C5          		     PUSH BC	;
802)   0B42 D5          		     PUSH DE	;
803)   0B43 AF          		     XOR A	;
804)   0B44 ED 42       		     SBC HL,BC     ;	;
806)   0B46 CD D1 0A    		     CALL PLOTP      	;
808)   0B49 E1          		    POP HL        ;GET X	;GET X
809)   0B4A C1          		    POP BC        ;GET R	;GET R
810)   0B4B D1          		    POP DE        ;GET Y	;GET Y
811)   0B4C D5          		    PUSH DE       ;SAVE VARS	;SAVE VARS
812)   0B4D C5          		    PUSH BC	;
813)   0B4E E5          		    PUSH HL	;
814)   0B4F AF          		    XOR A	;
815)   0B50 ED 4A       		    ADC HL,BC	;
816)   0B52 EB          		    EX DE,HL	;
818)   0B53 CD D1 0A    		     CALL PLOTP      	;
820)   0B56 E1          		    POP HL        ;GET X	;GET X
821)   0B57 C1          		    POP BC        ;GET R	;GET R
822)   0B58 D1          		    POP DE        ;GET Y	;GET Y
823)   0B59 AF          		    XOR A	;
824)   0B5A ED 42       		    SBC HL,BC	;
825)   0B5C EB          		    EX DE,HL	;
827)   0B5D CD D1 0A    		     CALL PLOTP      	;
830)   0B60 DD 66 03    		CIRC_AGN:LD H,(IX+3)   ;X1	;X1
831)   0B63 DD 6E 02    		     LD L,(IX+2)    ;X1	;X1
832)   0B66 DD 56 01    		     LD D,(IX+1)    ;Y1	;Y1
833)   0B69 DD 5E 00    		     LD E,(IX+0)    ;Y1	;Y1
834)   0B6C AF          		     XOR A	;
835)   0B6D ED 52       		     SBC HL,DE	;
836)   0B6F D2 5E 0C    		     JP NC,CIRC_EXIT	;
838)   0B72 19          		    ADD HL,DE	;
839)   0B73 E5          		    PUSH HL        ;SAVE X1	;SAVE X1
840)   0B74 D5          		    PUSH DE        ;SAVE Y1	;SAVE Y1
841)   0B75 21 00 00    		    LD HL,0	;
842)   0B78 AF          		    XOR A	;
845)   0B79 DD 7E 09    		    LD A,(IX+9)     ;F HI BYTE	;F HI BYTE
846)   0B7C FE 50       		    CP 80	;
847)   0B7E 30 26       		    JR NC,CIRC_SKIP	;
848)   0B80 28 24       		    JR Z,CIRC_SKIP	;
852)   0B82 D1          		    POP DE        ;Y1	;Y1
853)   0B83 1B          		    DEC DE	;
854)   0B84 DD 72 01    		    LD (IX+1),D   ;SAVE Y1	;SAVE Y1
855)   0B87 DD 73 00    		    LD (IX+0),E	;
856)   0B8A D5          		    PUSH DE       ;Y1	;Y1
857)   0B8B DD 66 05    		    LD H,(IX+5)   ;DDF_Y	;DDF_Y
858)   0B8E DD 6E 04    		    LD L,(IX+4)   	;
859)   0B91 23          		    INC HL	;
860)   0B92 23          		    INC HL	;
861)   0B93 DD 74 05    		    LD (IX+5),H   ;SAVE DDF_Y	;SAVE DDF_Y
862)   0B96 DD 75 04    		    LD (IX+4),L	;
863)   0B99 DD 56 09    		    LD D,(IX+9)   ;F	;F
864)   0B9C DD 5E 08    		    LD E,(IX+8)	;
865)   0B9F 19          		    ADD HL,DE	;
866)   0BA0 DD 74 09    		    LD (IX+9),H    ;SAVE F	;SAVE F
867)   0BA3 DD 75 08    		    LD (IX+8),L          	;
871)   0BA6 C1          		   POP BC       ;Y1	;Y1
872)   0BA7 E1          		   POP HL       ;X1	;X1
873)   0BA8 23          		   INC HL	;
874)   0BA9 DD 74 03    		   LD (IX+3),H  ;SAVE X1	;SAVE X1
875)   0BAC DD 75 02    		   LD (IX+2),L	;
876)   0BAF E5          		   PUSH HL      ;X1	;X1
877)   0BB0 DD 66 07    		    LD H,(IX+7)   ;DDF_X	;DDF_X
878)   0BB3 DD 6E 06    		    LD L,(IX+6)   	;
879)   0BB6 23          		    INC HL	;
880)   0BB7 23          		    INC HL	;
881)   0BB8 DD 74 07    		    LD (IX+7),H   ;SAVE DDF_X	;SAVE DDF_X
882)   0BBB DD 75 06    		    LD (IX+6),L	;
883)   0BBE DD 56 09    		    LD D,(IX+9)   ;F	;F
884)   0BC1 DD 5E 08    		    LD E,(IX+8)	;
885)   0BC4 19          		    ADD HL,DE	;
886)   0BC5 DD 74 09    		    LD (IX+9),H    ;SAVE F	;SAVE F
887)   0BC8 DD 75 08    		    LD (IX+8),L      	;
890)   0BCB E1          		     POP HL        ;X1	;X1
891)   0BCC E5          		     PUSH HL	;
892)   0BCD DD 56 0F    		     LD D,(IX+15)  ;X	;X
893)   0BD0 DD 5E 0E    		     LD E,(IX+14)	;
894)   0BD3 D5          		     PUSH DE	;
895)   0BD4 19          		     ADD HL,DE	;
896)   0BD5 EB          		     EX DE,HL      ;DE=X+X1	;DE=X+X1
897)   0BD6 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
898)   0BD9 DD 6E 0C    		     LD L,(IX+12)	;
899)   0BDC 09          		     ADD HL,BC     ;HL=Y+Y1	;HL=Y+Y1
901)   0BDD CD D1 0A    		     CALL PLOTP	;
903)   0BE0 E1          		   POP HL        ;X	;X
904)   0BE1 D1          		   POP DE        ;X1	;X1
905)   0BE2 D5          		   PUSH DE	;
906)   0BE3 E5          		   PUSH HL	;
907)   0BE4 AF          		   XOR A	;
908)   0BE5 ED 52       		   SBC HL,DE	;
909)   0BE7 EB          		   EX DE,HL      ;DE=X-X1	;DE=X-X1
910)   0BE8 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
911)   0BEB DD 6E 0C    		     LD L,(IX+12)	;
912)   0BEE 09          		     ADD HL,BC     ;HL=Y+Y1	;HL=Y+Y1
914)   0BEF CD D1 0A    		     CALL PLOTP	;
916)   0BF2 E1          		   POP HL        ;X	;X
917)   0BF3 D1          		   POP DE        ;X1 	;X1
918)   0BF4 D5          		   PUSH DE	;
919)   0BF5 E5          		   PUSH HL	;
920)   0BF6 19          		   ADD HL,DE	;
921)   0BF7 EB          		   EX DE,HL      ;DE=X+X1	;DE=X+X1
922)   0BF8 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
923)   0BFB DD 6E 0C    		     LD L,(IX+12)	;
924)   0BFE AF          		     XOR A	;
925)   0BFF ED 42       		     SBC HL,BC     ;HL=Y+Y1	;HL=Y+Y1
927)   0C01 CD D1 0A    		     CALL PLOTP	;
929)   0C04 E1          		   POP HL        ;X	;X
930)   0C05 D1          		   POP DE        ;X1  	;X1
931)   0C06 D5          		   PUSH DE	;
932)   0C07 E5          		   PUSH HL	;
933)   0C08 AF          		   XOR A	;
934)   0C09 ED 52       		   SBC HL,DE	;
935)   0C0B EB          		   EX DE,HL      ;DE=X-X1	;DE=X-X1
936)   0C0C DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
937)   0C0F DD 6E 0C    		     LD L,(IX+12)	;
938)   0C12 AF          		     XOR A	;
939)   0C13 ED 42       		     SBC HL,BC     ;HL=Y-Y1	;HL=Y-Y1
941)   0C15 CD D1 0A    		     CALL PLOTP	;
943)   0C18 E1          		     POP HL         ;X	;X
944)   0C19 D1          		     POP DE         ;X1	;X1
945)   0C1A C5          		     PUSH BC        ;SAVE Y1 SWITCH DE AND BC	;SAVE Y1 SWITCH DE AND BC
946)   0C1B E5          		     PUSH HL        ;SAVE X      	;SAVE X
947)   0C1C D5          		     PUSH DE        ;SAVE X1      	;SAVE X1
948)   0C1D 09          		     ADD HL,BC      ;	;
949)   0C1E C1          		     POP BC         ;BC=X1	;BC=X1
950)   0C1F EB          		     EX DE,HL       ;DE=X+Y1	;DE=X+Y1
951)   0C20 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
952)   0C23 DD 6E 0C    		     LD L,(IX+12)	;
953)   0C26 09          		     ADD HL,BC     ;HL=Y+X1	;HL=Y+X1
955)   0C27 CD D1 0A    		     CALL PLOTP	;
957)   0C2A E1          		   POP HL        ;X	;X
958)   0C2B D1          		   POP DE        ;Y1	;Y1
959)   0C2C D5          		   PUSH DE	;
960)   0C2D E5          		   PUSH HL	;
961)   0C2E AF          		   XOR A	;
962)   0C2F ED 52       		   SBC HL,DE	;
963)   0C31 EB          		   EX DE,HL      ;DE=X-Y1	;DE=X-Y1
964)   0C32 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
965)   0C35 DD 6E 0C    		     LD L,(IX+12)	;
966)   0C38 09          		     ADD HL,BC     ;HL=Y+X1	;HL=Y+X1
968)   0C39 CD D1 0A    		     CALL PLOTP	;
970)   0C3C E1          		   POP HL        ;X	;X
971)   0C3D D1          		   POP DE        ;Y1	;Y1
972)   0C3E D5          		   PUSH DE	;
973)   0C3F E5          		   PUSH HL	;
974)   0C40 19          		     ADD HL,DE	;
975)   0C41 EB          		     EX DE,HL      ;DE=X+Y1	;DE=X+Y1
976)   0C42 DD 66 0D    		     LD H,(IX+13)  ;Y	;Y
977)   0C45 DD 6E 0C    		     LD L,(IX+12)	;
978)   0C48 AF          		     XOR A	;
979)   0C49 ED 42       		     SBC HL,BC     ;HL=Y-X1	;HL=Y-X1
980)   0C4B E5          		     PUSH HL	;
982)   0C4C CD D1 0A    		     CALL PLOTP	;
984)   0C4F C1          		     POP BC        ;Y-X1	;Y-X1
985)   0C50 E1          		     POP HL        ;X	;X
986)   0C51 D1          		     POP DE        ;Y1 	;Y1
987)   0C52 AF          		     XOR A	;
988)   0C53 ED 52       		     SBC HL,DE	;
989)   0C55 EB          		     EX DE,HL      ;DE=X-Y1	;DE=X-Y1
990)   0C56 C5          		     PUSH BC	;
991)   0C57 E1          		     POP HL        ;HL=Y-X1	;HL=Y-X1
993)   0C58 CD D1 0A    		     CALL PLOTP        	;
994)   0C5B C3 60 0B    		    JP CIRC_AGN	;
995)   0C5E CD 49 08    		CIRC_EXIT: CALL LCD_CLRXY	;
996)   0C61 D1          		     POP DE ;GET RET ADDR	;GET RET ADDR
997)   0C62 21 10 00    		     LD HL,8*2       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
998)   0C65 39          		     ADD HL,SP     ;	;
999)   0C66 F9          		     LD SP,HL 	;
1000)   0C67 EB          		     EX DE,HL     	;
1001)   0C68 E9          		     JP (HL)	;
1008)   0C69 D9          		   EXX	;
1009)   0C6A D1          		   POP DE  ;save return addr to de'	;save return addr to de'
1010)   0C6B D9          		   EXX  	;
1011)   0C6C CD 3E 12    		   CALL _FILL         	;
1012)   0C6F D9          		   EXX	;
1013)   0C70 D5          		   PUSH DE ;restore return addr from de'	;restore return addr from de'
1014)   0C71 D9          		   EXX	;
1015)   0C72 C9          		   RET	;
1022)   0C73 FE 08       		     CP 0X08   ;BACKSPACE	;BACKSPACE
1023)   0C75 CA 85 0C    		     JP Z,PRCH_DOBCKSPC	;
1024)   0C78 FE 0A       		     CP 0X0A   ;LINE FEED JUST IGNORE IT	;LINE FEED JUST IGNORE IT
1025)   0C7A C8          		     RET Z	;
1026)   0C7B FE 0D       		     CP 0X0D   ;CHECK FOR ENTER	;CHECK FOR ENTER
1027)   0C7D 20 3A       		     JR NZ,PRCH_DOPRN	;
1028)   0C7F 21 0D 83    		     LD HL,CURSORX	;
1029)   0C82 C3 D2 0D    		     JP PRCH_NEWLN 	;
1031)   0C85 21 0D 83    		     LD HL,CURSORX      	;
1032)   0C88 7E          		     LD A,(HL)	;
1033)   0C89 38 05       		     JR C,DOREALBCKSPC	;
1035)   0C8B FE 01       		     CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
1036)   0C8D C8          		     RET Z	;
1037)   0C8E 35          		     DEC (HL)	;
1038)   0C8F C9          		     RET      	;
1040)   0C90 FE 01       		     CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
1041)   0C92 28 0A       		     JR Z,PRCH_DOBCKSPC2     ;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER	;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER
1042)   0C94 35          		     DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
1043)   0C95 E5          		     PUSH HL	;
1044)   0C96 3E 20       		     LD A,32   ;PRINT SPACE	;PRINT SPACE
1045)   0C98 CD B9 0C    		     CALL PRCH_DOPRN ;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN	;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN
1046)   0C9B E1          		     POP HL	;
1047)   0C9C 35          		     DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
1048)   0C9D B7          		     OR A      	;
1052)   0C9E DD 21 02 00 		     LD IX,2	;
1053)   0CA2 DD 39       		     ADD IX,SP	;
1054)   0CA4 DD 66 01    		     LD H,(IX+1);POSITION IN ACCS FOR THE NEW CHARACTER      	;POSITION IN ACCS FOR THE NEW CHARACTER
1055)   0CA7 DD 6E 00    		     LD L,(IX) ;POSITION IN ACCS FOR THE NEW CHARACTER  	;POSITION IN ACCS FOR THE NEW CHARACTER
1056)   0CAA 3E 00       		     LD A,0    ;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG	;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG
1057)   0CAC 28 02       		     JR Z,PRCH_SKIP1  ;WE ARE ON COLUMN 1	;WE ARE ON COLUMN 1
1058)   0CAE 2B          		     DEC HL     ;PREVIOUS POSITION DELETE BACKSPACE	;PREVIOUS POSITION DELETE BACKSPACE
1059)   0CAF 77          		     LD (HL),A  ;PUT 0 ON LAST POSITION	;PUT 0 ON LAST POSITION
1061)   0CB0 2B          		     DEC HL     ;PREVIOUS POSITION DELETE PREVIOUS CHAR	;PREVIOUS POSITION DELETE PREVIOUS CHAR
1062)   0CB1 77          		     LD (HL),A  ;PUT 0 ON LAST POSITION      	;PUT 0 ON LAST POSITION
1063)   0CB2 DD 74 01    		     LD (IX+1),H ;PUT POSITION BACK ON STACK IT WILL POPED	;PUT POSITION BACK ON STACK IT WILL POPED
1064)   0CB5 DD 75 00    		     LD (IX),L	;
1065)   0CB8 C9          		     RET	;
1068)   0CB9 F5          		     PUSH AF  ;SAVE CHAR TO STACK	;SAVE CHAR TO STACK
1069)   0CBA 32 10 83    		     LD (LASTCHAR),A ;SAVE LAST PRINTED CHAR	;SAVE LAST PRINTED CHAR
1073)   0CBD 3A 16 83    		     LD A,(VDUMODE)	;
1074)   0CC0 FE 05       		     CP 5	;
1075)   0CC2 20 19       		     JR NZ,VDU4	;
1076)   0CC4 2A 5F 83    		     LD HL,(GR_LASTX)	;
1077)   0CC7 E5          		     PUSH HL	;
1078)   0CC8 ED 5B 61 83 		     LD DE,(GR_LASTY)	;
1079)   0CCC D5          		     PUSH DE	;
1080)   0CCD 01 07 00    		     LD BC,FONT_WIDTH-1	;
1081)   0CD0 09          		     ADD HL,BC	;
1082)   0CD1 E5          		     PUSH HL	;
1083)   0CD2 01 09 00    		     LD BC,FONT_HEIGHT-1	;
1084)   0CD5 EB          		     EX DE,HL	;
1085)   0CD6 09          		     ADD HL,BC	;
1086)   0CD7 E5          		     PUSH HL	;
1087)   0CD8 CD 94 07    		     CALL LCD_SETXY	;
1088)   0CDB 18 34       		     JR PRCHDO	;
1089)   0CDD 3A 0D 83    		VDU4: LD A,(CURSORX)	;
1090)   0CE0 06 08       		     LD B,FONT_WIDTH	;
1091)   0CE2 16 00       		     LD D,0	;
1092)   0CE4 5F          		     LD E,A	;
1093)   0CE5 21 00 00    		     LD HL,0	;
1094)   0CE8 B7          		     OR A          ; CLEAR CARRY	; CLEAR CARRY
1096)   0CE9 ED 5A       		     ADC HL,DE	;
1097)   0CEB 10 FC       		     DJNZ PRCH_AGN1 ;HL=DE*B	;HL=DE*B
1098)   0CED E5          		     PUSH HL       ;1ST PARAM X1	;1ST PARAM X1
1099)   0CEE 11 08 00    		     LD DE,FONT_WIDTH 	;
1100)   0CF1 ED 5A       		     ADC HL,DE      	;
1101)   0CF3 2B          		     DEC HL	;
1102)   0CF4 E5          		     PUSH HL       ;SAVE 3RD PARAM X2	;SAVE 3RD PARAM X2
1104)   0CF5 CD 47 0D    		     CALL LCD_CALCLINE ;SCROLL CALC	;SCROLL CALC
1105)   0CF8 06 0A       		     LD B,FONT_HEIGHT 	;
1106)   0CFA 16 00       		     LD D,0	;
1107)   0CFC 5F          		     LD E,A	;
1108)   0CFD 21 00 00    		     LD HL,0	;
1110)   0D00 ED 5A       		     ADC HL,DE	;
1111)   0D02 10 FC       		     DJNZ PRCH_AGN2      	;
1112)   0D04 D1          		     POP DE        ;RETREIVE 3RD PARAM X2	;RETREIVE 3RD PARAM X2
1113)   0D05 E5          		     PUSH HL       ;2ND PARAM Y1	;2ND PARAM Y1
1114)   0D06 D5          		     PUSH DE       ;3RD PARAM X2	;3RD PARAM X2
1115)   0D07 11 0A 00    		     LD DE,FONT_HEIGHT	;
1116)   0D0A ED 5A       		     ADC HL,DE     ;CALC 4TH PARAM      	;CALC 4TH PARAM
1117)   0D0C 2B          		     DEC HL        ;4TH PARAM -1  	;4TH PARAM -1
1118)   0D0D E5          		     PUSH HL    ;4TH PARAM Y2	;4TH PARAM Y2
1119)   0D0E CD 94 07    		     CALL LCD_SETXY	;
1120)   0D11 F1          		PRCHDO: POP AF       ;CHAR TO PRINT FROM STACK	;CHAR TO PRINT FROM STACK
1121)   0D12 B7          		     OR A	;
1122)   0D13 21 00 75    		     LD HL,FONT_ADDR	;
1123)   0D16 16 00       		     LD D,0	;
1124)   0D18 5F          		     LD E,A	;
1125)   0D19 ED 5A       		     ADC HL,DE     ;THIS IS THE CHAR ADDRESS	;THIS IS THE CHAR ADDRESS
1126)   0D1B E5          		     PUSH HL	;
1127)   0D1C D1          		     POP DE        ; CHAR ADDRESS ON DE	; CHAR ADDRESS ON DE
1128)   0D1D 0E 0A       		     LD C,FONT_HEIGHT   ; TOTAL FONT LINES	; TOTAL FONT LINES
1130)   0D1F 1A          		     LD A,(DE)           ;FONT 8BIT PATTERN FOR A LINE	;FONT 8BIT PATTERN FOR A LINE
1131)   0D20 06 08       		     LD B,FONT_WIDTH      	;
1133)   0D22 CB 27       		     SLA A               ;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR	;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR
1134)   0D24 38 05       		     JR C,FORECOLOR	;
1135)   0D26 2A 03 83    		     LD HL,(BCOLOR)	;
1136)   0D29 18 03       		     JR PRCH_CONT	;
1138)   0D2B 2A 01 83    		     LD HL,(FCOLOR)      	;
1140)   0D2E F5          		     PUSH AF	;
1141)   0D2F D5          		     PUSH DE             ;TODO:PROBABLY NOT NEEDED HERE 	;TODO:PROBABLY NOT NEEDED HERE
1142)   0D30 CD E1 07    		     CALL LCD_SETPIXEL	;
1143)   0D33 D1          		     POP DE	;
1144)   0D34 F1          		     POP AF      	;
1145)   0D35 10 EB       		     DJNZ PRCH_AGN4	;
1146)   0D37 14          		     INC D             ;ADD 256 FOR NEXT CHAR PATTERN	;ADD 256 FOR NEXT CHAR PATTERN
1147)   0D38 0D          		     DEC C	;
1148)   0D39 20 E4       		     JR NZ,PRCH_AGN3	;
1150)   0D3B 21 0D 83    		     LD HL,CURSORX	;
1151)   0D3E 7E          		     LD A,(HL)	;
1152)   0D3F 3C          		     INC A	;
1153)   0D40 FE 50       		     CP 80	;
1154)   0D42 CA D2 0D    		     JP Z,PRCH_NEWLN  ;NEW LINE	;NEW LINE
1155)   0D45 77          		     LD (HL),A	;
1156)   0D46 C9          		     RET	;
1159)   0D47 3A 0F 83    		@LCD_CALCLINE: LD A,(SCRLN)	;
1160)   0D4A 57          		               LD D,A 	;
1161)   0D4B 3A 0E 83    		               LD A,(CURSORY)  ;480/10 MAKES 48 LINES                	;480/10 MAKES 48 LINES
1162)   0D4E 82          		               ADD A,D	;
1163)   0D4F FE 30       		               CP TOTLINES	;
1164)   0D51 D8          		               RET C	;
1166)   0D52 D6 30       		               SUB TOTLINES	;
1167)   0D54 C9          		               RET             	;
1172)   0D55 16 33       		LCD_SETSCROLL: LD D,0x33	;
1173)   0D57 CD 25 06    		               CALL LCD_WR_COM	;
1174)   0D5A 16 00       		 LD D,0X00 ;TOP FIXED NO OF LINES 2 BYTES HIGH (0)	;TOP FIXED NO OF LINES 2 BYTES HIGH (0)
1175)   0D5C CD 21 06    		               CALL LCD_WR_DAT	;
1176)   0D5F 16 00       		 LD D,0X00 ;TOP FIXED NO OF LINES 2 BYTES LOW	;TOP FIXED NO OF LINES 2 BYTES LOW
1177)   0D61 CD 21 06    		               CALL LCD_WR_DAT	;
1178)   0D64 16 01       		 LD D,0X01 ;SCROLL LINES NO OF LINES 2 BYTES HIGH (480)	;SCROLL LINES NO OF LINES 2 BYTES HIGH (480)
1179)   0D66 CD 21 06    		               CALL LCD_WR_DAT	;
1180)   0D69 16 E0       		 LD D,0XE0 ;SCROLL LINES NO OF LINES 2 BYTES LOW	;SCROLL LINES NO OF LINES 2 BYTES LOW
1181)   0D6B CD 21 06    		               CALL LCD_WR_DAT	;
1182)   0D6E 16 00       		 LD D,0X00 ;BOTTOM FIXED NO OF LINES 2 BYTES HIGH (0)	;BOTTOM FIXED NO OF LINES 2 BYTES HIGH (0)
1183)   0D70 CD 21 06    		               CALL LCD_WR_DAT	;
1184)   0D73 16 00       		 LD D,0X00 ;BOTTOM FIXED NO OF LINES 2 BYTES LOW	;BOTTOM FIXED NO OF LINES 2 BYTES LOW
1185)   0D75 CD 21 06    		               CALL LCD_WR_DAT	;
1186)   0D78 AF          		               XOR A	;
1187)   0D79 32 0F 83    		               LD (SCRLN),A	;
1188)   0D7C C9          		 RET	;
1191)   0D7D 3A 0F 83    		@LCD_DOSCROLL:  LD A,(SCRLN)	;
1192)   0D80 3C          		               INC A	;
1193)   0D81 FE 30       		               CP TOTLINES	;
1194)   0D83 38 02       		               JR C, DS_NXT	;
1195)   0D85 D6 30       		               SUB TOTLINES	;
1196)   0D87 32 0F 83    		DS_NXT:        LD (SCRLN),A	;
1197)   0D8A 6F          		               LD L,A	;
1198)   0D8B 26 00       		               LD H,0	;
1199)   0D8D 29          		               ADD HL,HL ;*10=FONT_HEIGHT	;*10=FONT_HEIGHT
1200)   0D8E 29          		               ADD HL,HL	;
1201)   0D8F 29          		               ADD HL,HL  	;
1202)   0D90 5F          		               LD E,A	;
1203)   0D91 16 00       		               LD D,0	;
1204)   0D93 19          		               ADD HL,DE	;
1205)   0D94 19          		               ADD HL,DE	;
1206)   0D95 16 37       		               LD D,0x37	;
1207)   0D97 CD 25 06    		               CALL LCD_WR_COM	;
1208)   0D9A 54          		 LD D,H ;NEW TOP SCROLL LINE BYTES HIGH (1-480) 	;NEW TOP SCROLL LINE BYTES HIGH (1-480)
1209)   0D9B CD 21 06    		               CALL LCD_WR_DAT	;
1210)   0D9E 55          		 LD D,L ;NEW TOP SCROLL LINE BYTES LOW	;NEW TOP SCROLL LINE BYTES LOW
1211)   0D9F CD 21 06    		               CALL LCD_WR_DAT	;
1212)   0DA2 C9          		               RET	;
1215)   0DA3 11 00 00    		@LCD_CLRTXTLN: LD DE,0	;
1217)   0DA6 D5          		               PUSH DE	;
1218)   0DA7 6F          		               LD L,A	;
1219)   0DA8 26 00       		               LD H,0	;
1220)   0DAA 29          		               ADD HL,HL ;*10=FONT_HEIGHT	;*10=FONT_HEIGHT
1221)   0DAB 29          		               ADD HL,HL	;
1222)   0DAC 29          		               ADD HL,HL  	;
1223)   0DAD 5F          		               LD E,A	;
1224)   0DAE 16 00       		               LD D,0	;
1225)   0DB0 19          		               ADD HL,DE	;
1226)   0DB1 19          		               ADD HL,DE	;
1228)   0DB2 E5          		               PUSH HL  	;
1229)   0DB3 11 0A 00    		               LD DE,FONT_HEIGHT	;
1230)   0DB6 19          		               ADD HL,DE	;
1232)   0DB7 EB          		               EX DE,HL                	;
1233)   0DB8 21 1F 03    		               LD HL,LCD_WIDTH	;
1235)   0DBB E5          		               PUSH HL	;
1236)   0DBC D5          		               PUSH DE ;PARAM4	;PARAM4
1237)   0DBD CD 94 07    		               CALL LCD_SETXY	;
1238)   0DC0 01 40 1F    		               LD BC, 8000; LCD_WIDTH * FONT_HEIGHT ;8000 BYTES 800*10	; LCD_WIDTH * FONT_HEIGHT ;8000 BYTES 800*10
1239)   0DC3 2A 03 83    		               LD HL,(BCOLOR)     	;
1240)   0DC6 CD E1 07    		CTL_AGN:       CALL LCD_SETPIXEL ;DESTROYS D,A	;DESTROYS D,A
1241)   0DC9 0B          		               DEC BC	;
1242)   0DCA 78          		               LD A,B	;
1243)   0DCB B1          		               OR C	;
1244)   0DCC 20 F8       		               JR NZ,CTL_AGN	;
1245)   0DCE CD 49 08    		       CALL LCD_CLRXY 	;
1246)   0DD1 C9          		       RET                	;
1250)   0DD2 AF          		     XOR A  	;
1251)   0DD3 77          		     LD (HL),A   	;
1252)   0DD4 23          		     INC HL	;
1253)   0DD5 7E          		     LD A,(HL)	;
1254)   0DD6 3C          		     INC A       	;
1256)   0DD7 FE 30       		     CP 48         ;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!	;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!
1257)   0DD9 28 02       		     JR Z,PRCH_SCROLL	;
1258)   0DDB 77          		     LD (HL),A                             	;
1259)   0DDC C9          		     RET	;
1261)   0DDD F5          		PRCH_SCROLL: PUSH AF	;
1262)   0DDE E5          		     PUSH HL	;
1264)   0DDF 3A 0F 83    		     LD A,(SCRLN)	;
1265)   0DE2 CD A3 0D    		     CALL LCD_CLRTXTLN	;
1267)   0DE5 CD 7D 0D    		     CALL LCD_DOSCROLL	;
1268)   0DE8 E1          		     POP HL	;
1269)   0DE9 F1          		     POP AF	;
1271)   0DEA 3D          		     DEC A	;
1272)   0DEB 77          		     LD (HL),A ;CURSORY                            	;CURSORY
1273)   0DEC AF          		     XOR A	;
1274)   0DED 32 0D 83    		     LD (CURSORX),A	;
1275)   0DF0 C9          		     RET	;
1290)   0DF1 2A 03 83    		     LD HL,(BCOLOR);      	;
1291)   0DF4 18 03       		     JR LCD_SETCURS	;
1302)   0DF6 2A 01 83    		     LD HL,(FCOLOR)      ;COLOR PARAM      	;COLOR PARAM
1305)   0DF9 E5          		     PUSH HL             ;COLOR PARAM	;COLOR PARAM
1306)   0DFA 3A 0D 83    		     LD A,(CURSORX)	;
1307)   0DFD 06 08       		     LD B,FONT_WIDTH	;
1308)   0DFF 16 00       		     LD D,0	;
1309)   0E01 5F          		     LD E,A	;
1310)   0E02 21 00 00    		     LD HL,0	;
1311)   0E05 B7          		     OR A                ;CLEAR CARRY	;CLEAR CARRY
1313)   0E06 ED 5A       		     ADC HL,DE	;
1314)   0E08 10 FC       		     DJNZ SCUR_AGN1      ;HL = DE * B 	;HL = DE * B
1315)   0E0A E5          		     PUSH HL             ;1ST PARAM X1	;1ST PARAM X1
1316)   0E0B 01 08 00    		     LD BC,FONT_WIDTH	;
1317)   0E0E ED 4A       		     ADC HL,BC           ;NEXT CHAR	;NEXT CHAR
1318)   0E10 2B          		     DEC HL              ;MINUS 1	;MINUS 1
1319)   0E11 E5          		     PUSH HL             ;SAVE 3RD PARAM X2      	;SAVE 3RD PARAM X2
1321)   0E12 CD 47 0D    		     CALL LCD_CALCLINE	;
1322)   0E15 06 0A       		     LD B,FONT_HEIGHT 	;
1323)   0E17 16 00       		     LD D,0	;
1324)   0E19 5F          		     LD E,A	;
1325)   0E1A 21 00 00    		     LD HL,0	;
1327)   0E1D ED 5A       		     ADC HL,DE	;
1328)   0E1F 10 FC       		     DJNZ SCUR_AGN2      ;HL=B*DE	;HL=B*DE
1329)   0E21 0E 08       		     LD C,FONT_HEIGHT-2  ;2 PIXEL HEIGTH CURSOR       	;2 PIXEL HEIGTH CURSOR
1330)   0E23 06 00       		     LD B,0	;
1331)   0E25 ED 4A       		     ADC HL,BC           ;ADD FONT_HEIGHT-2 PIXELS	;ADD FONT_HEIGHT-2 PIXELS
1332)   0E27 D1          		     POP DE              ;RETREIVE 3RD PARAM ON DE	;RETREIVE 3RD PARAM ON DE
1333)   0E28 E5          		     PUSH HL             ;2ND PARAM Y1	;2ND PARAM Y1
1334)   0E29 D5          		     PUSH DE             ;3RD PARAM X2	;3RD PARAM X2
1336)   0E2A 23          		     INC HL              ; Y2 ADD THE LAST +2 PIXELS  	; Y2 ADD THE LAST +2 PIXELS
1337)   0E2B E5          		     PUSH HL             ;4TH PARAM Y2	;4TH PARAM Y2
1338)   0E2C CD 94 07    		     CALL LCD_SETXY	;
1340)   0E2F E1          		     POP HL              ;GET THE COLOR	;GET THE COLOR
1341)   0E30 06 10       		     LD B,2*FONT_WIDTH   ;2*8=16	;2*8=16
1343)   0E32 CD E1 07    		     CALL LCD_SETPIXEL   ;DESTROYS D,A	;DESTROYS D,A
1344)   0E35 10 FB       		     DJNZ SCUR_AGN3                            	;
1349)   0E37 C9          		     RET	;
1352)   0E38 CD 49 08    		    CALL LCD_CLRXY;	;
1353)   0E3B 2A 03 83    		    LD HL,(BCOLOR)     	;
1355)   0E3E 01 E0 01    		    LD BC,LCD_HEIGHT+1	;
1356)   0E41 C5          		CS_AGNA2: PUSH BC	;
1357)   0E42 01 20 03    		    LD BC,LCD_WIDTH+1	;
1358)   0E45 CD E1 07    		CS_AGNA1: CALL LCD_SETPIXEL         ;DESTROYS D,A, HL HAS COLOR INFO	;DESTROYS D,A, HL HAS COLOR INFO
1359)   0E48 0B          		    DEC BC	;
1360)   0E49 78          		    LD A,B	;
1361)   0E4A B1          		    OR C	;
1362)   0E4B 20 F8       		    JR NZ,CS_AGNA1	;
1363)   0E4D C1          		    POP BC	;
1364)   0E4E 0B          		    DEC BC	;
1365)   0E4F 78          		    LD A,B	;
1366)   0E50 B1          		    OR C     	;
1367)   0E51 20 EE       		    JR NZ,CS_AGNA2	;
1368)   0E53 21 00 00    		    LD HL,0                   ;RESET CURSOR AT 0,0	;RESET CURSOR AT 0,0
1369)   0E56 22 0D 83    		    LD (CURSORX),HL       	;
1370)   0E59 C9          		  RET	;
1375)   0E5A 06 DF       		    LD B,LCD_HEIGHT.AND.0xFF   ;lsb	;lsb
1376)   0E5C 0E 02       		    LD C,LCD_HEIGHT.SHR.8+1      ;MSB+1	;MSB+1
1378)   0E5E C5          		    PUSH BC          	;
1380)   0E5F 06 1F       		    LD B,LCD_WIDTH.AND.0xFF   ;lsb	;lsb
1381)   0E61 0E 04       		    LD C,LCD_WIDTH.SHR.8+1      ;MSV+1          	;MSV+1
1383)   0E63 CD E1 07    		    CALL LCD_SETPIXEL         ;DESTROYS D,A, HL HAS COLOR INFO	;DESTROYS D,A, HL HAS COLOR INFO
1384)   0E66 10 FB       		    DJNZ CS_AGN1	;
1385)   0E68 0D          		    DEC C	;
1386)   0E69 20 F8       		    JR NZ,CS_AGN1     	;
1387)   0E6B C1          		    POP BC	;
1388)   0E6C 10 F0       		    DJNZ CS_AGN2	;
1389)   0E6E 0D          		    DEC C	;
1390)   0E6F 20 ED       		    JR NZ,CS_AGN2 	;
1391)   0E71 21 00 00    		    LD HL,0                   ;RESET CURSOR AT 0,0	;RESET CURSOR AT 0,0
1392)   0E74 22 0D 83    		    LD (CURSORX),HL       	;
1393)   0E77 C9          		    RET	;
1399)   0E78 7E          		    LD A,(HL)	;
1400)   0E79 FE 00       		    CP 0	;
1401)   0E7B C8          		    RET Z	;
1402)   0E7C E5          		    PUSH HL	;
1403)   0E7D CD 73 0C    		    CALL LCD_PRINTCHAR     	;
1404)   0E80 E1          		    POP HL	;
1405)   0E81 23          		    INC HL	;
1406)   0E82 18 F4       		    JR LCD_MSG	;
 14)   0E84 	            		DEVKBI EQU DEVINP; INPUT FROM THE KEYBOARD IS ROUTED TO BITS 7,6(DAT,CLK) OF THE INPUT DEVICE 74LS257 CHIP	; INPUT FROM THE KEYBOARD IS ROUTED TO BITS 7,6(DAT,CLK) OF THE INPUT DEVICE 74LS257 CHIP
 17)   0E84 06 01       		@KEYBCLKON: LD B,UKB_OUT_CLK	;
 18)   0E86 CD DD 03    		      CALL FF_OFF	;
 19)   0E89 C9          		      RET	;
 21)   0E8A 06 01       		@KEYBCLKOFF: LD B,UKB_OUT_CLK	;
 22)   0E8C CD EE 03    		     CALL FF_ON	;
 23)   0E8F C9          		     RET	;
 25)   0E90 06 02       		@KEYBDATON: LD B,UKB_OUT_DAT	;
 26)   0E92 CD DD 03    		      CALL FF_OFF	;
 27)   0E95 C9          		      RET	;
 29)   0E96 06 02       		@KEYBDATOFF: LD B,UKB_OUT_DAT	;
 30)   0E98 CD EE 03    		     CALL FF_ON	;
 31)   0E9B C9          		     RET	;
 33)   0E9C CD 84 0E    		PS2ISK:CALL KEYBCLKON ;KEYBOARD ENABLED	;KEYBOARD ENABLED
 34)   0E9F 06 1E       		   LD B,30 ;CHECK SEVERAL TIMES 0.2 MS (30 ON 10mHZ)	;CHECK SEVERAL TIMES 0.2 MS (30 ON 10mHZ)
 35)   0EA1 DB 18       		CHAG: IN A,(DEVKBI)	;
 36)   0EA3 57          		   LD D,A	;
 37)   0EA4 CB 77       		   BIT UKB_IN_CLK,A ;CHECK BIT 6=CLOCK	;CHECK BIT 6=CLOCK
 38)   0EA6 28 08       		   JR Z,KEYOK	;
 39)   0EA8 10 F7       		   DJNZ CHAG	;
 41)   0EAA 3E 01       		PS2NTP: LD A,1 ;SET A TO 1 MEANS NO KEY AVAILABLE  	;SET A TO 1 MEANS NO KEY AVAILABLE
 42)   0EAC CD 8A 0E    		   CALL KEYBCLKOFF	;
 43)   0EAF C9          		   RET	;
 44)   0EB0 AF          		KEYOK: XOR A ;SET A TO 0 MEANS WE HAVE A KEY	;SET A TO 0 MEANS WE HAVE A KEY
 45)   0EB1 C9          		   RET	;
 49)   0EB2 06 32       		   LD B,50	;
 50)   0EB4 B7          		   OR A   ;CLEAR CARRY	;CLEAR CARRY
 51)   0EB5 DB 18       		WH1:IN A,(DEVKBI)	;
 52)   0EB7 57          		   LD D,A    	;
 53)   0EB8 CB 77       		   BIT UKB_IN_CLK,A ;CHECK BIT 6=CLOCK	;CHECK BIT 6=CLOCK
 54)   0EBA C0          		   RET NZ	;
 55)   0EBB 10 F8       		   DJNZ WH1	;
 56)   0EBD 37          		   SCF	;
 57)   0EBE C9          		   RET	;
 60)   0EBF 06 32       		  LD B,50	;
 61)   0EC1 B7          		  OR A    ;CLEAR CARRY	;CLEAR CARRY
 62)   0EC2 DB 18       		WL1:IN A,(DEVKBI)	;
 63)   0EC4 57          		   LD D,A    	;
 64)   0EC5 CB 77       		   BIT UKB_IN_CLK,A ;CHECK BIT 6=CLOCK    	;CHECK BIT 6=CLOCK
 65)   0EC7 C8          		   RET Z	;
 66)   0EC8 10 F8       		   DJNZ WL1	;
 67)   0ECA 37          		   SCF	;
 68)   0ECB C9          		   RET	;
 70)   0ECC CD BF 0E    		WAITFORLOW:CALL WAITFORLOW1	;
 71)   0ECF D8          		          RET C	;
 72)   0ED0 DB 18       		           IN A,(DEVKBI);SOME MORE TIMES TO BE SURE	;SOME MORE TIMES TO BE SURE
 73)   0ED2 DB 18       		           IN A,(DEVKBI)	;
 74)   0ED4 57          		           LD D,A	;
 75)   0ED5 C9          		           RET	;
 78)   0ED6 F3          		@NEWBYTE:DI	;
 79)   0ED7 7A          		   LD A,D ;BIT 7 HAS THE DATA	;BIT 7 HAS THE DATA
 80)   0ED8 CB 7F       		   BIT UKB_IN_DAT,A	;
 81)   0EDA 20 2D       		   JR NZ,ERROR0 ;ALWAYS START WITH 0	;ALWAYS START WITH 0
 82)   0EDC 06 08       		   LD B,8	;
 83)   0EDE 48          		NXTBIT: LD C,B ;SAVE B	;SAVE B
 84)   0EDF CD B2 0E    		   CALL WAITFORHIGH 	;
 85)   0EE2 D8          		   RET C	;
 86)   0EE3 CD CC 0E    		   CALL WAITFORLOW	;
 87)   0EE6 D8          		   RET C	;
 88)   0EE7 CB 27       		   SLA A ;BIT 7=DATA IS ON C FLAG	;BIT 7=DATA IS ON C FLAG
 89)   0EE9 CB 1B       		   RR E ;CARRY GOES TO BIT 7 OF E  	;CARRY GOES TO BIT 7 OF E
 90)   0EEB 41          		   LD B,C  ;RESTORE C	;RESTORE C
 91)   0EEC 10 F0       		   DJNZ NXTBIT	;
 92)   0EEE CD B2 0E    		   CALL WAITFORHIGH 	;
 93)   0EF1 D8          		   RET C	;
 94)   0EF2 CD CC 0E    		   CALL WAITFORLOW     	;
 95)   0EF5 D8          		   RET C	;
 97)   0EF6 CD B2 0E    		   CALL WAITFORHIGH 	;
 98)   0EF9 D8          		   RET C	;
 99)   0EFA CD CC 0E    		   CALL WAITFORLOW 	;
100)   0EFD D8          		   RET C	;
101)   0EFE CB 7F       		   BIT UKB_IN_DAT,A	;
102)   0F00 28 10       		   JR Z,ERROR1 ;ALWAYS ENDS WITH 1  	;ALWAYS ENDS WITH 1
103)   0F02 CD B2 0E    		   CALL WAITFORHIGH    ;WAIT FOR END OF TRANSMITION	;WAIT FOR END OF TRANSMITION
104)   0F05 D8          		   RET C	;
106)   0F06 7B          		   LD A,E	;
107)   0F07 FB          		   EI	;
108)   0F08 C9          		   RET	;
109)   0F09 21 1E 0F    		ERROR0: LD HL,MSER4	;
110)   0F0C CD 79 05    		   CALL RS_TXT	;
111)   0F0F 37          		   SCF ;FLAGS AN ERROR OCCURED	;FLAGS AN ERROR OCCURED
112)   0F10 FB          		   EI	;
113)   0F11 C9          		   RET	;
114)   0F12 D5          		ERROR1:PUSH DE	;
115)   0F13 21 41 0F    		   LD HL,MSER5	;
116)   0F16 CD 79 05    		   CALL RS_TXT	;
117)   0F19 37          		   SCF ;FLAGS AN ERROR OCCURED	;FLAGS AN ERROR OCCURED
118)   0F1A D1          		   POP DE	;
119)   0F1B 7B          		   LD A,E ;MAYBE IGNORE THIS	;MAYBE IGNORE THIS
120)   0F1C FB          		   EI	;
121)   0F1D C9          		   RET	;
122)   0F1E 45 52 52 4F 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F22 52 20 53 54 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F26 41 52 54 20 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F2A 42 49 54 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F2E 4E 4F 54 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F32 41 53 20 45 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F36 58 50 45 43 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
122)   0F3A 54 45 44 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
123)   0F3E 0A 0D 00    		   DB 10,13,0	;
124)   0F41 45 52 52 4F 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F45 52 20 53 54 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F49 4F 50 20 42 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F4D 49 54 2E 4E 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F51 4F 54 2E 41 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F55 53 20 45 58 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F59 50 45 43 54 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
124)   0F5D 45 44 2E    		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
125)   0F60 0A 0D 00    		   DB 10,13,0	;
127)   0F63 01 0A 00    		PS2KEY: LD BC,10       	;
128)   0F66 0B          		PS2AGN DEC BC	;
129)   0F67 78          		       LD A,B	;
130)   0F68 B1          		       OR C	;
131)   0F69 28 0F       		       JR Z,PS2TIMEOUT	;
132)   0F6B C5          		       PUSH BC	;
133)   0F6C CD 9C 0E    		       CALL PS2ISK	;
134)   0F6F B7          		       OR A	;
135)   0F70 C1          		       POP BC	;
136)   0F71 20 F3       		       JR NZ, PS2AGN ;NO KEY YET	;NO KEY YET
138)   0F73 CD D6 0E    		       CALL NEWBYTE 	;
139)   0F76 38 02       		       JR C,PS2TIMEOUT ;ERROR SO INVALIDATE A	;ERROR SO INVALIDATE A
140)   0F78 18 02       		       JR PS2EX	;
141)   0F7A AF          		PS2TIMEOUT:XOR A ;0 CODE IS INVALID	;0 CODE IS INVALID
142)   0F7B FB          		          EI	;
143)   0F7C F5          		PS2EX  PUSH AF       	;
144)   0F7D CD 8A 0E    		       CALL KEYBCLKOFF	;
145)   0F80 F1          		       POP AF	;
146)   0F81 C9          		       RET	;
149)   0F82 CD 89 0F    		READCHAR:CALL GTKEY	;
150)   0F85 CD 48 10    		      CALL PS2LOK	;
151)   0F88 C9          		      RET	;
154)   0F89 CD 63 0F    		@GTKEY: CALL PS2KEY ;GET A KEY FROM PS2	;GET A KEY FROM PS2
155)   0F8C FE E1       		 CP $E1 ;BREAK KEY	;BREAK KEY
156)   0F8E CC B5 0F    		 CALL Z,GTBRK	;
157)   0F91 FE F0       		 CP $F0 ;240 KEY RELEASED	;240 KEY RELEASED
158)   0F93 CC F9 0F    		 CALL Z,GTREL	;
159)   0F96 FE E0       		 CP $E0 ;224 EXTENDED KEYS	;224 EXTENDED KEYS
160)   0F98 CC BF 0F    		 CALL Z,GTEXT	;
163)   0F9B FE 12       		 CP 18 ;LEFT SHIFT	;LEFT SHIFT
164)   0F9D CC 24 10    		 CALL Z,SHFTOG	;
165)   0FA0 FE 59       		 CP 89 ;RIGHT SHIFT	;RIGHT SHIFT
166)   0FA2 CC 24 10    		 CALL Z,SHFTOG	;
167)   0FA5 FE 14       		 CP 20 ;RIGHT CONTROL	;RIGHT CONTROL
168)   0FA7 CC 2D 10    		 CALL Z,CTRTOG 	;
169)   0FAA FE 11       		 CP 17 ;LEFT ALT	;LEFT ALT
170)   0FAC CC 36 10    		 CALL Z,ALTTOG	;
171)   0FAF FE 58       		 CP $58 ;CAPS LOCK	;CAPS LOCK
172)   0FB1 CC 3F 10    		 CALL Z,CAPSTOG	;
175)   0FB4 C9          		 RET	;
177)   0FB5 CD 63 0F    		GTBRK: CALL PS2KEY ;$14 OR $F0	;$14 OR $F0
178)   0FB8 FE F0       		 CP $F0	;
179)   0FBA C8          		 RET Z	;
180)   0FBB CD 63 0F    		 CALL PS2KEY ;$77	;$77
181)   0FBE C9          		 RET	;
183)   0FBF CD 63 0F    		GTEXT: CALL PS2KEY ; THIS IS THE EXTENDED KEY	; THIS IS THE EXTENDED KEY
184)   0FC2 FE 6B       		 CP $6B ;LEFT	;LEFT
185)   0FC4 C8          		 RET Z	;
186)   0FC5 FE 72       		 CP $72 ;DOWN	;DOWN
187)   0FC7 C8          		 RET Z	;
188)   0FC8 FE 74       		 CP $74 ;RIGHT	;RIGHT
189)   0FCA C8          		 RET Z	;
190)   0FCB FE 75       		 CP $75 ;UP	;UP
191)   0FCD C8          		 RET Z	;
192)   0FCE FE 70       		 CP $70 ;INSERT	;INSERT
193)   0FD0 C8          		 RET Z	;
194)   0FD1 FE 6C       		 CP $6C ;HOME	;HOME
195)   0FD3 C8          		 RET Z	;
196)   0FD4 FE 7D       		 CP $7D ;PG UP	;PG UP
197)   0FD6 C8          		 RET Z	;
198)   0FD7 FE 7A       		 CP $7A ;PG DN	;PG DN
199)   0FD9 C8          		 RET Z	;
200)   0FDA FE 69       		 CP $69 ;END	;END
201)   0FDC C8          		 RET Z	;
202)   0FDD FE 71       		 CP $71 ;DEL	;DEL
203)   0FDF C8          		 RET Z	;
204)   0FE0 FE 66       		 CP $66  ;BACKSPACE	;BACKSPACE
205)   0FE2 C8          		 RET Z	;
206)   0FE3 FE 5A       		 CP $5A ;ENTER NUM	;ENTER NUM
207)   0FE5 C8          		 RET Z	;
208)   0FE6 FE 11       		 CP $11 ;RIGHT ALT	;RIGHT ALT
209)   0FE8 C8          		 RET Z	;
210)   0FE9 FE 14       		 CP $14 ;LEFT ALT	;LEFT ALT
211)   0FEB C8          		 RET Z	;
212)   0FEC FE 4A       		 CP $4A ;NUMLOCK /	;NUMLOCK /
213)   0FEE C8          		 RET Z	;
214)   0FEF FE F0       		 CP $F0	;
215)   0FF1 C2 F7 0F    		 JP NZ, EXGTEX ;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY	;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY
216)   0FF4 CD 63 0F    		 CALL PS2KEY ; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT	; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT
218)   0FF7 AF          		EXGTEX XOR A ;NOT VALID EXTENDED KEY	;NOT VALID EXTENDED KEY
219)   0FF8 C9          		 RET	;
222)   0FF9 CD 63 0F    		GTREL: CALL PS2KEY ; THIS IS THE RELEASED KEY	; THIS IS THE RELEASED KEY
223)   0FFC FE 12       		 CP 18 ; LSHIFT RELEASED	; LSHIFT RELEASED
224)   0FFE CC 12 10    		 CALL Z,SHFRES ; RESET SHIFT	; RESET SHIFT
225)   1001 FE 14       		 CP 20 ; LCTRL RELEASED	; LCTRL RELEASED
226)   1003 CC 18 10    		 CALL Z,CTRRES ; RESET CONTROL	; RESET CONTROL
227)   1006 FE 11       		 CP 17 ; LALT RELEASED	; LALT RELEASED
228)   1008 CC 1E 10    		 CALL Z,ALTRES ; RESET ALT	; RESET ALT
229)   100B FE 59       		 CP 89 ; RSHIFT RELEASED	; RSHIFT RELEASED
230)   100D CC 12 10    		 CALL Z,SHFRES ; RESET SHIFT	; RESET SHIFT
231)   1010 AF          		 XOR A ; NO KEY	; NO KEY
232)   1011 C9          		 RET	;
234)   1012 21 88 83    		SHFRES: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
235)   1015 CB B6       		 RES 6,(HL)  ; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
236)   1017 C9          		 RET	;
238)   1018 21 88 83    		CTRRES: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
239)   101B CB BE       		 RES 7,(HL) ; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
240)   101D C9          		 RET	;
242)   101E 21 88 83    		ALTRES: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
243)   1021 CB AE       		 RES 5,(HL) ; BIT 5 IS SHIFT $20=32 	; BIT 5 IS SHIFT $20=32
244)   1023 C9          		 RET	;
246)   1024 21 88 83    		SHFTOG: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
247)   1027 3E 40       		 LD A,$40 ; MASK	; MASK
248)   1029 AE          		 XOR (HL)  ; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
249)   102A 77          		 LD (HL),A ; SAVE	; SAVE
250)   102B AF          		 XOR A ; NO KEY	; NO KEY
251)   102C C9          		 RET	;
253)   102D 21 88 83    		CTRTOG: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
254)   1030 3E 80       		 LD A,$80 ; MASK	; MASK
255)   1032 AE          		 XOR (HL) ; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
256)   1033 77          		 LD (HL),A ; SAVE	; SAVE
257)   1034 AF          		 XOR A ; NO KEY	; NO KEY
258)   1035 C9          		 RET	;
260)   1036 21 88 83    		ALTTOG: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
261)   1039 3E 20       		 LD A,$20	;
262)   103B AE          		 XOR (HL) ; BIT 5 IS ALT $20=32 	; BIT 5 IS ALT $20=32
263)   103C 77          		 LD (HL),A ; SAVE	; SAVE
264)   103D AF          		 XOR A ; NO KEY	; NO KEY
265)   103E C9          		 RET	;
267)   103F 21 88 83    		CAPSTOG: LD HL,KEYCTR ;KEYBOARD FLAGS SHFT,CONTROL,GRAPH,CAPS	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH,CAPS
268)   1042 3E 10       		 LD A,$10	;
269)   1044 AE          		 XOR (HL) ; BIT 4 IS CAPS $10=16 	; BIT 4 IS CAPS $10=16
270)   1045 77          		 LD (HL),A ; SAVE	; SAVE
271)   1046 AF          		 XOR A ; NO KEY	; NO KEY
272)   1047 C9          		 RET	;
276)   1048 21 88 83    		 LD HL,KEYCTR	;
277)   104B 47          		 LD B,A  ; SAVE A	; SAVE A
278)   104C 7E          		 LD A,(HL); GET KEYBFLAGS ON A SHIFT	; GET KEYBFLAGS ON A SHIFT
279)   104D 4F          		 LD C,A  ;CAPS ON C	;CAPS ON C
280)   104E CB 1F       		 RR A	;
281)   1050 CB 1F       		 RR A    ;2 ROTATIONS RIGHT SHIFT BECOMES BIT 4 FROM 6	;2 ROTATIONS RIGHT SHIFT BECOMES BIT 4 FROM 6
282)   1052 A9          		 XOR C   ;XOR SHIFT WITH CAPS	;XOR SHIFT WITH CAPS
283)   1053 CB 67       		 BIT 4,A ;CHECK IF BIT 4 IS 0 = UNSHIFTED	;CHECK IF BIT 4 IS 0 = UNSHIFTED
284)   1055 78          		 LD A,B  ;RESTORE A	;RESTORE A
289)   1056 21 64 10    		 LD HL,PS2TAB1 ;UNSHIFTED	;UNSHIFTED
290)   1059 28 03       		 JR Z,PLK1	;
291)   105B 21 0E 11    		 LD HL,PS2TAB2 ;SHIFTED	;SHIFTED
292)   105E 06 00       		PLK1:  LD B,0	;
293)   1060 4F          		 LD C,A	;
294)   1061 09          		 ADD HL,BC       	;
295)   1062 7E          		 LD A,(HL) ;GET THE CHAR	;GET THE CHAR
296)   1063 C9          		 RET	;
300)   1064 00 00 00 00 		PS2TAB1 DB 0,0,0,0,0,0,0,0,0,0	;
300)   1068 00 00 00 00 		PS2TAB1 DB 0,0,0,0,0,0,0,0,0,0	;
300)   106C 00 00       		PS2TAB1 DB 0,0,0,0,0,0,0,0,0,0	;
301)   106E 00 00 00 00 		      DB 0,0,0,0,'`',0,0,0,0,0	;
301)   1072 60 00 00 00 		      DB 0,0,0,0,'`',0,0,0,0,0	;
301)   1076 00 00       		      DB 0,0,0,0,'`',0,0,0,0,0	;
302)   1078 00 71 31 00 		      DB 0,'q','1',0,0,0,'z','s','a','w'	;
302)   107C 00 00 7A 73 		      DB 0,'q','1',0,0,0,'z','s','a','w'	;
302)   1080 61 77       		      DB 0,'q','1',0,0,0,'z','s','a','w'	;
303)   1082 32 00 00 63 		      DB '2',0,0,'c','x','d','e','4','3',0	;
303)   1086 78 64 65 34 		      DB '2',0,0,'c','x','d','e','4','3',0	;
303)   108A 33 00       		      DB '2',0,0,'c','x','d','e','4','3',0	;
304)   108C 00 20 76 66 		      DB 0,' ','v','f','t','r','5',0,0,'n'     ;40-49	;40-49
304)   1090 74 72 35 00 		      DB 0,' ','v','f','t','r','5',0,0,'n'     ;40-49	;40-49
304)   1094 00 6E       		      DB 0,' ','v','f','t','r','5',0,0,'n'     ;40-49	;40-49
305)   1096 62 68 67 6D 		      DB 'b','h','g','m','6',0,0,44,'m','j'     ;50-59	;50-59
305)   109A 36 00 00 2C 		      DB 'b','h','g','m','6',0,0,44,'m','j'     ;50-59	;50-59
305)   109E 6D 6A       		      DB 'b','h','g','m','6',0,0,44,'m','j'     ;50-59	;50-59
306)   10A0 75 37 38 00 		      DB 'u','7','8',0,0,',','k','i','o','0'   ;60-69	;60-69
306)   10A4 00 2C 6B 69 		      DB 'u','7','8',0,0,',','k','i','o','0'   ;60-69	;60-69
306)   10A8 6F 30       		      DB 'u','7','8',0,0,',','k','i','o','0'   ;60-69	;60-69
307)   10AA 39 00 00 2E 		      DB '9',0,0,'.','/','l',59,'p','-',0       ;70-79	;70-79
307)   10AE 2F 6C 3B 70 		      DB '9',0,0,'.','/','l',59,'p','-',0       ;70-79	;70-79
307)   10B2 2D 00       		      DB '9',0,0,'.','/','l',59,'p','-',0       ;70-79	;70-79
308)   10B4 00 00 27 00 		      DB 0,0,39,0,'[','=',0,0,0,0               ;80-89	;80-89
308)   10B8 5B 3D 00 00 		      DB 0,0,39,0,'[','=',0,0,0,0               ;80-89	;80-89
308)   10BC 00 00       		      DB 0,0,39,0,'[','=',0,0,0,0               ;80-89	;80-89
309)   10BE 0D 5D 00 5C 		      DB 13,']',0,'\',0,0,0,0,0,0               ;90-99	;90-99
309)   10C2 00 00 00 00 		      DB 13,']',0,'\',0,0,0,0,0,0               ;90-99	;90-99
309)   10C6 00 00       		      DB 13,']',0,'\',0,0,0,0,0,0               ;90-99	;90-99
310)   10C8 00 00 06 00 		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
310)   10CC 00 08 00 04 		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
310)   10D0 09 00       		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
311)   10D2 00 00 01 07 		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
311)   10D6 0A 00 03 0B 		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
311)   10DA 1B 00       		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
312)   10DC 00 00 2B 2D 		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
312)   10E0 2A 39 00 00 		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
312)   10E4 00 00       		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
313)   10E6 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
313)   10EA 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
313)   10EE 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
314)   10F0 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
314)   10F4 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
314)   10F8 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
315)   10FA 00 00 00 00 		       DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
315)   10FE 00 00 00 00 		       DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
315)   1102 00 00       		       DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
316)   1104 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
316)   1108 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
316)   110C 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
319)   110E 00 00 00 00 		PS2TAB2 DB 0,0,0,0,0,0,0,0,0,0	;
319)   1112 00 00 00 00 		PS2TAB2 DB 0,0,0,0,0,0,0,0,0,0	;
319)   1116 00 00       		PS2TAB2 DB 0,0,0,0,0,0,0,0,0,0	;
320)   1118 00 00 00 00 		      DB 0,0,0,0,'~',0,0,0,0,0	;
320)   111C 7E 00 00 00 		      DB 0,0,0,0,'~',0,0,0,0,0	;
320)   1120 00 00       		      DB 0,0,0,0,'~',0,0,0,0,0	;
321)   1122 00 51 21 00 		      DB 0,'Q','!',0,0,0,'Z','S','A','W'	;
321)   1126 00 00 5A 53 		      DB 0,'Q','!',0,0,0,'Z','S','A','W'	;
321)   112A 41 57       		      DB 0,'Q','!',0,0,0,'Z','S','A','W'	;
322)   112C 40 00 00 43 		      DB '@',0,0,'C','X','D','E','$','#',0	;
322)   1130 58 44 45 24 		      DB '@',0,0,'C','X','D','E','$','#',0	;
322)   1134 23 00       		      DB '@',0,0,'C','X','D','E','$','#',0	;
323)   1136 00 20 56 46 		      DB 0,' ','V','F','T','R','%',0,0,'N'     ;40-49	;40-49
323)   113A 54 52 25 00 		      DB 0,' ','V','F','T','R','%',0,0,'N'     ;40-49	;40-49
323)   113E 00 4E       		      DB 0,' ','V','F','T','R','%',0,0,'N'     ;40-49	;40-49
324)   1140 42 48 47 59 		      DB 'B','H','G','Y','^',0,0,'"','M','J'   ;50-59	;50-59
324)   1144 5E 00 00 22 		      DB 'B','H','G','Y','^',0,0,'"','M','J'   ;50-59	;50-59
324)   1148 4D 4A       		      DB 'B','H','G','Y','^',0,0,'"','M','J'   ;50-59	;50-59
325)   114A 55 5E 2A 00 		      DB 'U','^','*',0,0,'<','K','I','O',')'   ;60-69	;60-69
325)   114E 00 3C 4B 49 		      DB 'U','^','*',0,0,'<','K','I','O',')'   ;60-69	;60-69
325)   1152 4F 29       		      DB 'U','^','*',0,0,'<','K','I','O',')'   ;60-69	;60-69
326)   1154 28 00 00 3E 		      DB '(',0,0,'>','?','L',':','P','_',0      ;70-79	;70-79
326)   1158 3F 4C 3A 50 		      DB '(',0,0,'>','?','L',':','P','_',0      ;70-79	;70-79
326)   115C 5F 00       		      DB '(',0,0,'>','?','L',':','P','_',0      ;70-79	;70-79
327)   115E 00 00 22 00 		      DB 0,0,34,0,'{','+',0,0,0,0               ;80-89	;80-89
327)   1162 7B 2B 00 00 		      DB 0,0,34,0,'{','+',0,0,0,0               ;80-89	;80-89
327)   1166 00 00       		      DB 0,0,34,0,'{','+',0,0,0,0               ;80-89	;80-89
328)   1168 0D 7D 00 7C 		      DB 13,'}',0,'|',0,0,0,0,0,0               ;90-99	;90-99
328)   116C 00 00 00 00 		      DB 13,'}',0,'|',0,0,0,0,0,0               ;90-99	;90-99
328)   1170 00 00       		      DB 13,'}',0,'|',0,0,0,0,0,0               ;90-99	;90-99
329)   1172 00 00 06 00 		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
329)   1176 00 08 00 04 		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
329)   117A 09 00       		      DB 0,0,6,0,0,8,0,4,9,0                    ;100-109   	;100-109
330)   117C 00 00 01 07 		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
330)   1180 0A 00 03 0B 		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
330)   1184 1B 00       		      DB 0,0,1,7,10,0,3,11,ESC,0                ;110-119 	;110-119
331)   1186 00 00 2B 2D 		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
331)   118A 2A 39 00 00 		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
331)   118E 00 00       		      DB 0,0,'+','-','*','9',0,0,0,0            ;120-129	;120-129
332)   1190 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
332)   1194 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
332)   1198 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                 ;130-139	;130-139
333)   119A 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
333)   119E 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
333)   11A2 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                    ;140-149	;140-149
334)   11A4 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
334)   11A8 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
334)   11AC 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                  ;150-159	;150-159
335)   11AE 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
335)   11B2 00 00 00 00 		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
335)   11B6 00 00       		      DB 0,0,0,0,0,0,0,0,0,0                    ;160-169	;160-169
  4)   11B8 AF          		NEGHL:xor a	;
  5)   11B9 95          		     sub l	;
  6)   11BA 6F          		     ld l,a	;
  7)   11BB 9F          		     sbc a,a	;
  8)   11BC 94          		     sub h	;
  9)   11BD 67          		     ld h,a	;
 10)   11BE C9          		     RET	;
 14)   11BF 2A 79 83    		     LD HL,(FILL_IDX)	;
 15)   11C2 01 58 02    		     LD BC,MAXQ	;
 16)   11C5 A7          		     AND A	;
 17)   11C6 ED 42       		     SBC HL,BC	;
 18)   11C8 D0          		     RET NC ;IF IDX=HL>=MAXQ THEN EXIT	;IF IDX=HL>=MAXQ THEN EXIT
 19)   11C9 2A 7B 83    		     LD HL,(FILL_PY)	;
 20)   11CC ED 5B 81 83 		     LD DE,(FILL_PDY)	;
 21)   11D0 19          		     ADD HL,DE	;
 22)   11D1 7C          		     LD A,H	;
 23)   11D2 FE 80       		     CP 80H	;
 24)   11D4 D0          		     RET NC ;NC MEANS NEGATIVE <0	;NC MEANS NEGATIVE <0
 25)   11D5 11 1F 03    		     LD DE,LCD_WIDTH	;
 26)   11D8 ED 52       		     SBC HL,DE	;
 27)   11DA D0          		     RET NC  ;C MEANS Y+DY<=LCD_WIDTH	;C MEANS Y+DY<=LCD_WIDTH
 29)   11DB 2A 77 83    		     LD HL,(FILL_Q)	;
 30)   11DE ED 4B 79 83 		     LD BC,(FILL_IDX)	;
 31)   11E2 78          		     LD A,B	;
 32)   11E3 B1          		     OR C         ;IF IDX=0 THEN NXT1	;IF IDX=0 THEN NXT1
 33)   11E4 28 08       		     JR Z,QPS_NXT1 	;
 34)   11E6 EB          		     EX DE,HL	;
 35)   11E7 C5          		     PUSH BC	;
 36)   11E8 E1          		     POP HL      	;
 37)   11E9 29          		     ADD HL, HL	;
 38)   11EA 29          		     ADD HL, HL	;
 39)   11EB 29          		     ADD HL, HL        ; SLEFT 3 TIMES MEANS *8	; SLEFT 3 TIMES MEANS *8
 40)   11EC EB          		     EX DE,HL	;
 41)   11ED 19          		     ADD HL,DE      	;
 43)   11EE 11 7B 83    		     LD DE,FILL_PY	;
 44)   11F1 EB          		     EX DE,HL  ;DEST=QUEUE ORIGIN=FILL_PY	;DEST=QUEUE ORIGIN=FILL_PY
 45)   11F2 01 08 00    		     LD BC,8   ;8 BYTES	;8 BYTES
 46)   11F5 ED B0       		     LDIR      ;COPY	;COPY
 47)   11F7 2A 79 83    		     LD HL,(FILL_IDX)      	;
 48)   11FA 23          		     INC HL	;
 49)   11FB 22 79 83    		     LD (FILL_IDX),HL	;
 50)   11FE C9          		QPS_EXT: RET   	;
 52)   11FF 2A 77 83    		QPOP: LD HL,(FILL_Q)	;
 53)   1202 ED 4B 79 83 		     LD BC,(FILL_IDX)	;
 54)   1206 0B          		     DEC BC      	;
 55)   1207 C5          		     PUSH BC	;
 56)   1208 78          		     LD A,B	;
 57)   1209 B1          		     OR C         ;IF IDX=0 THEN WE ARE ON START	;IF IDX=0 THEN WE ARE ON START
 58)   120A 28 08       		     JR Z,QPP_NXT1                        	;
 59)   120C EB          		     EX DE,HL	;
 60)   120D C5          		     PUSH BC	;
 61)   120E E1          		     POP HL      	;
 62)   120F 29          		     ADD HL, HL	;
 63)   1210 29          		     ADD HL, HL	;
 64)   1211 29          		     ADD HL, HL        ; SLEFT 3 TIMES MEANS *8	; SLEFT 3 TIMES MEANS *8
 65)   1212 EB          		     EX DE,HL	;
 66)   1213 19          		     ADD HL,DE      	;
 67)   1214 C1          		QPP_NXT1: POP BC 	;
 68)   1215 ED 43 79 83 		     LD (FILL_IDX),BC	;
 70)   1219 11 7B 83    		     LD DE,FILL_PY  ;ORIGIN=QUEUE DEST=FILL_PY               	;ORIGIN=QUEUE DEST=FILL_PY
 71)   121C 01 08 00    		     LD BC,8   ;8 BYTES	;8 BYTES
 72)   121F ED B0       		     LDIR      ;COPY	;COPY
 73)   1221 2A 7D 83    		     LD HL,(FILL_PXL)	;
 74)   1224 22 71 83    		     LD (FILL_X1),HL	;
 75)   1227 2A 7F 83    		     LD HL,(FILL_PXR)	;
 76)   122A 22 73 83    		     LD (FILL_X2),HL	;
 77)   122D ED 5B 81 83 		     LD DE,(FILL_PDY)	;
 78)   1231 ED 53 75 83 		     LD (FILL_DY),DE      	;
 79)   1235 2A 7B 83    		     LD HL,(FILL_PY)	;
 80)   1238 A7          		     AND A	;
 81)   1239 19          		     ADD HL,DE	;
 82)   123A 22 6D 83    		     LD (FILL_Y),HL 	;
 90)   123D C9          		     RET	;
 92)   123E E1          		@_FILL: POP HL        ;GET THE RETURN ADDRESS	;GET THE RETURN ADDRESS
 93)   123F D1          		     POP DE          ;Y	;Y
 94)   1240 C1          		     POP BC          ;X      	;X
 95)   1241 E5          		     PUSH HL         ;RET ADDR TO SP	;RET ADDR TO SP
 96)   1242 ED 43 6B 83 		     LD (FILL_X),BC	;
 97)   1246 ED 53 6D 83 		     LD (FILL_Y),DE   	;
 98)   124A ED 73 85 83 		     LD (FILL_OLDSP),SP   	;
 99)   124E 21 3E ED    		     LD HL,-((MAXQ*8)+2) ; MAKE SPACE FOR OUR QUEUE	; MAKE SPACE FOR OUR QUEUE
100)   1251 39          		     ADD HL,SP	;
101)   1252 F9          		     LD SP,HL        ;NEW SP	;NEW SP
104)   1253 22 77 83    		     LD (FILL_Q),HL  ;START OF QUEUE STACK VAR IN C	;START OF QUEUE STACK VAR IN C
105)   1256 21 00 00    		     LD HL,0	;
106)   1259 22 79 83    		     LD (FILL_IDX),HL ;INDEX OF ITEMS SP IN C	;INDEX OF ITEMS SP IN C
110)   125C 2A 6B 83    		     LD HL,(FILL_X);	;
111)   125F E5          		     PUSH HL	;
112)   1260 2A 6D 83    		     LD HL,(FILL_y);	;
113)   1263 E5          		     PUSH HL	;
114)   1264 CD F8 07    		     CALL LCD_READPIXEL	;
115)   1267 22 83 83    		     LD (FILL_OV),HL	;
117)   126A ED 5B 01 83 		     LD DE,(FCOLOR)	;
118)   126E A7          		     AND A	;
119)   126F ED 52       		     SBC HL,DE      ;CHK OV=NV	;CHK OV=NV
120)   1271 CA F6 13    		     JP Z,FL_EXIT	;
121)   1274 2A 6B 83    		     LD HL,(FILL_X)	;
122)   1277 7C          		     LD A,H	;
123)   1278 FE 80       		     CP 0x80         ;CHK <0	;CHK <0
124)   127A D2 F6 13    		     JP NC,FL_EXIT	;
125)   127D 11 1F 03    		     LD DE,LCD_WIDTH 	;
126)   1280 A7          		     AND A	;
127)   1281 ED 52       		     SBC HL,DE       ;CHK>799	;CHK>799
128)   1283 D2 F6 13    		     JP NC,FL_EXIT	;
129)   1286 2A 6D 83    		     LD HL,(FILL_Y)	;
130)   1289 7C          		     LD A,H	;
131)   128A FE 80       		     CP 0x80         ;CHK <0	;CHK <0
132)   128C D2 F6 13    		     JP NC,FL_EXIT	;
133)   128F 11 DF 01    		     LD DE,LCD_HEIGHT 	;
134)   1292 A7          		     AND A	;
135)   1293 ED 52       		     SBC HL,DE       ;CHK>480	;CHK>480
136)   1295 D2 F6 13    		     JP NC,FL_EXIT           	;
138)   1298 2A 6D 83    		     LD HL,(FILL_Y)	;
139)   129B 22 7B 83    		     LD (FILL_PY),HL	;
140)   129E 2A 6B 83    		     LD HL,(FILL_X)	;
141)   12A1 22 7D 83    		     LD (FILL_PXL),HL	;
142)   12A4 22 7F 83    		     LD (FILL_PXR),HL	;
143)   12A7 21 01 00    		     LD HL,1	;
144)   12AA 22 81 83    		     LD (FILL_PDY),HL	;
145)   12AD CD BF 11    		     CALL QPUSH         ;     /PUSH VALUES TO QUEUE ADD 8 TO IDX	;     /PUSH VALUES TO QUEUE ADD 8 TO IDX
147)   12B0 2A 6D 83    		     LD HL,(FILL_Y)	;
148)   12B3 23          		     INC HL	;
149)   12B4 22 7B 83    		     LD (FILL_PY),HL	;
150)   12B7 21 FF FF    		     LD HL,-1	;
151)   12BA 22 81 83    		     LD (FILL_PDY),HL	;
152)   12BD CD BF 11    		     CALL QPUSH	;
154)   12C0 ED 5B 79 83 		    LD DE,(FILL_IDX)	;
155)   12C4 7A          		    LD A,D	;
156)   12C5 B3          		    OR E	;
157)   12C6 CA F6 13    		    JP Z,FL_EXIT    ; IF FILL_IDX=0 THEN NO MORE ITEMS ON QUEUE SO EXIT 	; IF FILL_IDX=0 THEN NO MORE ITEMS ON QUEUE SO EXIT
161)   12C9 CD FF 11    		     CALL QPOP            ;POP VALUES FROM QUEUE SUB 8 FROM IDX TO Y,X1,X2,DY	;POP VALUES FROM QUEUE SUB 8 FROM IDX TO Y,X1,X2,DY
164)   12CC 2A 71 83    		      LD HL,(FILL_X1)	;
165)   12CF 22 6B 83    		     LD (FILL_X),HL	;
166)   12D2 7C          		FL_LP1: LD A,H	;
167)   12D3 FE 80       		     CP 0x80          ;CHK X<0 THEN EXIT LOOP	;CHK X<0 THEN EXIT LOOP
168)   12D5 D2 FD 12    		     JP NC,FL_NXT1	;
169)   12D8 ED 5B 6D 83 		     LD DE,(FILL_Y)	;
170)   12DC E5          		     PUSH HL	;
171)   12DD D5          		     PUSH DE	;
172)   12DE CD F8 07    		     CALL LCD_READPIXEL	;
173)   12E1 ED 5B 83 83 		     LD DE,(FILL_OV)	;
174)   12E5 A7          		     AND A	;
175)   12E6 ED 52       		     SBC HL,DE      ;PIXELREAD<>0 THEN  EXIT LOOP	;PIXELREAD<>0 THEN  EXIT LOOP
176)   12E8 C2 FD 12    		     JP NZ,FL_NXT1	;
177)   12EB ED 5B 6B 83 		     LD DE,(FILL_X)	;
178)   12EF 2A 6D 83    		     LD HL,(FILL_Y)	;
179)   12F2 D5          		     PUSH DE	;
180)   12F3 CD D1 0A    		     CALL PLOTP	;
181)   12F6 E1          		     POP HL	;
182)   12F7 2B          		     DEC HL	;
183)   12F8 22 6B 83    		     LD (FILL_X),HL	;
184)   12FB 18 D5       		     JR FL_LP1     	;
188)   12FD 2A 6B 83    		     LD HL,(FILL_X)	;
189)   1300 ED 5B 71 83 		     LD DE,(FILL_X1)	;
190)   1304 7C          		     LD A,H	;
191)   1305 FE 80       		     CP 80H	;
192)   1307 30 08       		     JR NC,FL_NXT1A   ;IF X<0 THEN X<X1 IF NEGATIVE DON'T SKIP      	;IF X<0 THEN X<X1 IF NEGATIVE DON'T SKIP
193)   1309 A7          		     AND A	;
194)   130A ED 52       		     SBC HL,DE       ;CHK X-X1<0 THEN CONTINUE ELSE SKIP	;CHK X-X1<0 THEN CONTINUE ELSE SKIP
195)   130C D2 B4 13    		     JP NC,FL_SKIP   ;C IF DE>HL X1>X, NC IF X>=X1    	;C IF DE>HL X1>X, NC IF X>=X1
196)   130F ED 5A       		     ADC HL,DE	;
199)   1311 23          		    INC HL	;
200)   1312 22 6F 83    		    LD (FILL_L),HL	;
203)   1315 A7          		    AND A     	;
204)   1316 ED 52       		    SBC HL,DE   ;CHK L-X1	;CHK L-X1
205)   1318 30 1E       		    JR NC,FL_NXT2   ;C IF DE>HL X1>L	;C IF DE>HL X1>L
206)   131A 28 1C       		    JR Z,FL_NXT2	;
207)   131C ED 5A       		    ADC HL,DE	;
208)   131E 22 7D 83    		    LD (FILL_PXL),HL ;L	;L
209)   1321 2A 6D 83    		    LD HL,(FILL_Y)	;
210)   1324 22 7B 83    		    LD (FILL_PY),HL	;
211)   1327 1B          		    DEC DE	;
212)   1328 ED 53 7F 83 		    LD (FILL_PXR),DE	;
213)   132C 2A 75 83    		    LD HL,(FILL_DY) 	;
214)   132F CD B8 11    		    CALL NEGHL	;
215)   1332 22 81 83    		    LD (FILL_PDY),HL     	;
216)   1335 CD BF 11    		    CALL QPUSH     	;
220)   1338 2A 71 83    		     LD HL,(FILL_X1)  ;COULD USE DE=X1 OR DE=X1-1 IF WE INCREASE IT	;COULD USE DE=X1 OR DE=X1-1 IF WE INCREASE IT
221)   133B 23          		     INC HL	;
222)   133C 22 6B 83    		     LD (FILL_X),HL	;
226)   133F 11 1F 03    		   LD DE,LCD_WIDTH	;
227)   1342 A7          		   AND A	;
228)   1343 EB          		   EX DE,HL	;
229)   1344 ED 52       		   SBC HL,DE    ;800-(X=DE)	;800-(X=DE)
230)   1346 38 24       		   JR C,FL_NXT3   ;C IF X>800	;C IF X>800
231)   1348 EB          		   EX DE,HL      ;HL=X	;HL=X
232)   1349 E5          		   PUSH HL	;
233)   134A 2A 6D 83    		   LD HL,(FILL_Y)	;
234)   134D E5          		   PUSH HL	;
235)   134E CD F8 07    		   CALL LCD_READPIXEL	;
236)   1351 ED 5B 83 83 		   LD DE,(FILL_OV)	;
237)   1355 A7          		   AND A	;
238)   1356 ED 52       		   SBC HL,DE       ;PIXELREAD=OV	;PIXELREAD=OV
239)   1358 20 12       		   JR NZ,FL_NXT3	;
240)   135A ED 5B 6B 83 		   LD DE,(FILL_X)	;
241)   135E 2A 6D 83    		   LD HL,(FILL_Y)	;
242)   1361 D5          		   PUSH DE	;
243)   1362 CD D1 0A    		   CALL PLOTP	;
244)   1365 E1          		   POP HL	;
245)   1366 23          		   INC HL	;
246)   1367 22 6B 83    		   LD (FILL_X),HL	;
247)   136A 18 D3       		   JR FL_LP2	;
250)   136C 2A 6D 83    		    LD HL,(FILL_Y)	;
251)   136F 22 7B 83    		    LD (FILL_PY),HL	;
252)   1372 2A 6F 83    		    LD HL,(FILL_L)	;
253)   1375 22 7D 83    		    LD (FILL_PXL),HL	;
254)   1378 2A 6B 83    		    LD HL,(FILL_X)	;
255)   137B 2B          		    DEC HL	;
256)   137C 22 7F 83    		    LD (FILL_PXR),HL	;
257)   137F 2A 75 83    		    LD HL,(FILL_DY)	;
258)   1382 22 81 83    		    LD (FILL_PDY),HL	;
259)   1385 CD BF 11    		    CALL QPUSH         	;
261)   1388 2A 6B 83    		    LD HL,(FILL_X)	;
262)   138B ED 5B 73 83 		    LD DE,(FILL_X2)	;
263)   138F 13          		    INC DE	;
264)   1390 A7          		    AND A	;
265)   1391 ED 52       		    SBC HL,DE    ;X-(X2+1) C IF X2+1>X 	;X-(X2+1) C IF X2+1>X
266)   1393 38 1F       		    JR C,FL_NXT4	;
267)   1395 28 1D       		    JR Z,FL_NXT4	;
268)   1397 2A 6D 83    		    LD HL,(FILL_Y)	;
269)   139A 22 7B 83    		    LD (FILL_PY),HL	;
270)   139D ED 53 7D 83 		    LD (FILL_PXL),DE	;
271)   13A1 2A 6B 83    		    LD HL,(FILL_X);	;
272)   13A4 2B          		    DEC HL	;
273)   13A5 22 7F 83    		    LD (FILL_PXR),HL	;
274)   13A8 2A 75 83    		    LD HL,(FILL_DY)	;
275)   13AB CD B8 11    		    CALL NEGHL	;
276)   13AE 22 81 83    		    LD (FILL_PDY),HL  	;
277)   13B1 CD BF 11    		    CALL QPUSH         	;
280)   13B4 2A 6B 83    		       LD HL,(FILL_X)	;
281)   13B7 23          		       INC HL	;
282)   13B8 22 6B 83    		       LD (FILL_X),HL	;
283)   13BB ED 5B 73 83 		FL_LP3: LD DE,(FILL_X2)	;
284)   13BF A7          		       AND A	;
285)   13C0 EB          		       EX DE,HL         ;X2=HL X=DE	;X2=HL X=DE
286)   13C1 ED 52       		       SBC HL,DE        ;C IF DE>HL X>X2       	;C IF DE>HL X>X2
287)   13C3 38 1C       		       JR C,FL_NXT5	;
288)   13C5 19          		       ADD HL,DE        ;	;
289)   13C6 EB          		       EX DE,HL         ;X=HL X2=DE	;X=HL X2=DE
290)   13C7 E5          		       PUSH HL	;
291)   13C8 2A 6D 83    		       LD HL,(FILL_Y)	;
292)   13CB E5          		       PUSH HL	;
293)   13CC CD F8 07    		       CALL LCD_READPIXEL	;
294)   13CF ED 5B 83 83 		       LD DE,(FILL_OV)	;
295)   13D3 A7          		       AND A	;
296)   13D4 ED 52       		       SBC HL,DE     ;CHK PIXELREAD!=OV ELSE EXIT LOOP	;CHK PIXELREAD!=OV ELSE EXIT LOOP
297)   13D6 28 09       		       JR Z,FL_NXT5	;
298)   13D8 2A 6B 83    		       LD HL,(FILL_X)	;
299)   13DB 23          		       INC HL	;
300)   13DC 22 6B 83    		       LD (FILL_X),HL	;
301)   13DF 18 DA       		       JR FL_LP3	;
304)   13E1 2A 6B 83    		       LD HL,(FILL_X)	;
305)   13E4 22 6F 83    		       LD (FILL_L),HL	;
307)   13E7 ED 5B 73 83 		      LD DE,(FILL_X2)	;
308)   13EB A7          		      AND A	;
309)   13EC EB          		      EX DE,HL    ;X2=HL X=DE	;X2=HL X=DE
310)   13ED ED 52       		      SBC HL,DE   ;X2-X C IF X>X2	;X2-X C IF X>X2
311)   13EF EB          		      EX DE,HL    ;X=HL X2-X=DE	;X=HL X2-X=DE
312)   13F0 DA C0 12    		      JP C,FL_LP0 ; IF X>X2 THEN EXIT DO WHILE GOTO ;while (sp>stack)	; IF X>X2 THEN EXIT DO WHILE GOTO ;while (sp>stack)
313)   13F3 C3 3F 13    		      JP FL_LP2   ;GOTO DO WHILE	;GOTO DO WHILE
316)   13F6 21 C2 12    		FL_EXIT: LD HL,(MAXQ*8)+2 ; RETREIVE SPACE FOR OUR QUEUE	; RETREIVE SPACE FOR OUR QUEUE
317)   13F9 39          		        ADD HL,SP	;
318)   13FA F9          		        LD SP,HL        ;NEW SP	;NEW SP
319)   13FB C9          		        RET	;
  9)   13FC FE 01       		    CP 1          ;IS IT FOR GRAPHICS?	;IS IT FOR GRAPHICS?
 10)   13FE 28 0E       		    JR Z,GRCOLS	;
 11)   1400 21 03 83    		    LD HL,BCOLOR	;
 12)   1403 22 69 83    		    LD (GR_PARAM4),HL	;
 13)   1406 21 01 83    		    LD HL,FCOLOR	;
 14)   1409 22 67 83    		    LD (GR_PARAM3),HL	;
 15)   140C 18 0C       		    JR BS_DOCOL	;
 16)   140E 21 07 83    		GRCOLS: LD HL,BGRCOL	;
 17)   1411 22 69 83    		    LD (GR_PARAM4),HL	;
 18)   1414 21 05 83    		    LD HL,FGRCOL	;
 19)   1417 22 67 83    		    LD (GR_PARAM3),HL         	;
 20)   141A CD 94 5E    		BS_DOCOL: CALL EXPRI   ;GET 1ST PARAM	;GET 1ST PARAM
 21)   141D D9          		    EXX	;
 22)   141E FD 7E 00    		    LD A,(IY)	;
 23)   1421 FE 0D       		    CP 0x0D       ;FINISHED COMD LINE	;FINISHED COMD LINE
 24)   1423 28 32       		    JR Z,COLSEL	;
 25)   1425 FE 3A       		    CP ':'	;
 26)   1427 28 2E       		    JR Z,COLSEL	;
 27)   1429 FE 2C       		    CP ','        ;CHECK FOR ','	;CHECK FOR ','
 28)   142B C2 CA 17    		    JP NZ,GRPHERR	;
 30)   142E E5          		    PUSH HL       ;SAVE 1ST PARAM	;SAVE 1ST PARAM
 31)   142F FD 23       		    INC IY        ;NEXT PARAM	;NEXT PARAM
 32)   1431 CD 94 5E    		    CALL EXPRI    ;GET 2ND PARAM	;GET 2ND PARAM
 33)   1434 D9          		    EXX	;
 34)   1435 D1          		    POP DE        ;RESTORE 1ST PARAM ON DE HL HAS THE 2ND	;RESTORE 1ST PARAM ON DE HL HAS THE 2ND
 35)   1436 7B          		    LD A,E	;
 36)   1437 D6 80       		    SUB 128	;
 37)   1439 38 07       		    JR C,COLFC	;
 38)   143B 5F          		    LD E,A	;
 39)   143C DD 21 37 83 		    LD IX,BCOLPAL	;
 40)   1440 18 04       		    JR DOPALCOL	;
 41)   1442 DD 21 17 83 		COLFC: LD IX,FCOLPAL	;
 43)   1446 7B          		    LD A,E	;
 44)   1447 FE 0F       		    CP 15     ;MAX 16 COLORS	;MAX 16 COLORS
 45)   1449 D2 CA 17    		    JP NC,GRPHERR	;
 46)   144C DD 19       		    ADD IX,DE     	;
 47)   144E DD 19       		    ADD IX,DE     ;2*DE CAUSE ITS A 2 BYTE ARRAY	;2*DE CAUSE ITS A 2 BYTE ARRAY
 48)   1450 DD 75 00    		    LD (IX),L    ;SAVE THE NEW COLOR 	;SAVE THE NEW COLOR
 49)   1453 DD 74 01    		    LD (IX+1),H  	;
 50)   1456 C9          		    RET  	;
 53)   1457 E5          		    PUSH HL	;
 54)   1458 D1          		    POP DE     	;
 55)   1459 7B          		    LD A,E	;
 56)   145A D6 80       		    SUB 128        ;CHECK MSB	;CHECK MSB
 57)   145C 38 11       		    JR C,CFC	;
 58)   145E 5F          		    LD E,A	;
 59)   145F DD 21 69 83 		    LD IX,GR_PARAM4	;
 60)   1463 DD 6E 00    		    LD L,(IX)	;
 61)   1466 DD 66 01    		    LD H,(IX+1)     	;
 62)   1469 DD 21 37 83 		    LD IX,BCOLPAL  ;BACKCOLOR	;BACKCOLOR
 63)   146D 18 0E       		    JR SFC	;
 64)   146F DD 21 67 83 		CFC: LD IX,GR_PARAM3	;
 65)   1473 DD 6E 00    		    LD L,(IX)	;
 66)   1476 DD 66 01    		    LD H,(IX+1)     	;
 67)   1479 DD 21 17 83 		    LD IX,FCOLPAL  ;FRONTCOLOR	;FRONTCOLOR
 68)   147D 7B          		SFC: LD A,E	;
 69)   147E FE 10       		    CP 16     ;MAX 16 COLORS	;MAX 16 COLORS
 70)   1480 D2 CA 17    		    JP NC,GRPHERR	;
 71)   1483 DD 19       		    ADD IX,DE	;
 72)   1485 DD 19       		    ADD IX,DE	;
 73)   1487 DD 56 00    		    LD D,(IX)	;
 74)   148A DD 5E 01    		    LD E,(IX+1)     	;
 75)   148D 72          		    LD (HL),D  ;SAVE AGAIN 	;SAVE AGAIN
 76)   148E 23          		    INC HL     	;
 77)   148F 73          		    LD (HL),E       	;
 78)   1490 C9          		    RET          	;
 84)   1491 AF          		    XOR A	;
 85)   1492 21 63 83    		    LD HL,GR_PARAM1	;
 87)   1495 F5          		    PUSH AF	;
 88)   1496 E5          		    PUSH HL	;
 89)   1497 CD 94 5E    		    CALL EXPRI    ;GET 1ST PARAM	;GET 1ST PARAM
 90)   149A D9          		    EXX           ;HL HAS THE PARAM     	;HL HAS THE PARAM
 91)   149B D1          		    POP DE        ;GET PARAM ADDRESS	;GET PARAM ADDRESS
 92)   149C EB          		    EX DE,HL	;
 93)   149D 73          		    LD (HL),E	;
 94)   149E 23          		    INC HL	;
 95)   149F 72          		    LD (HL),D	;
 96)   14A0 23          		    INC HL        ;PARAM SAVED     	;PARAM SAVED
 97)   14A1 F1          		    POP AF	;
 98)   14A2 3C          		    INC A          	;
 99)   14A3 FE 04       		    CP 4	;
100)   14A5 C8          		    RET Z     	;
101)   14A6 F5          		    PUSH AF	;
102)   14A7 FD 7E 00    		    LD A,(IY)     	;
103)   14AA FE 0D       		    CP 0x0D       ;FINISHED COMD LINE	;FINISHED COMD LINE
104)   14AC 28 0D       		    JR Z,NOMORE 	;
105)   14AE FE 3A       		    CP ':'       ;FINISHED COMD LINE	;FINISHED COMD LINE
106)   14B0 28 09       		    JR Z,NOMORE      	;
107)   14B2 FE 2C       		    CP ','        ;CHECK FOR ','	;CHECK FOR ','
108)   14B4 20 05       		    JR NZ,NOMORE     	;
109)   14B6 FD 23       		    INC IY        ;NEXT PARAM	;NEXT PARAM
110)   14B8 F1          		    POP AF    	;
111)   14B9 18 DA       		    JR GBP_NXT     	;
112)   14BB F1          		NOMORE:POP AF    	;
113)   14BC C9          		    RET	;
118)   14BD 01 08 00    		    LD BC,8     ;8 BYTES SHIFT UP KEEPS 2 LAST POSITIONS NEEDED IN PLOT COMMD	;8 BYTES SHIFT UP KEEPS 2 LAST POSITIONS NEEDED IN PLOT COMMD
119)   14C0 11 57 83    		    LD DE,GR_LASTX3	;
120)   14C3 21 5B 83    		    LD HL,GR_LASTX2	;
121)   14C6 ED B0       		    LDIR     	;
122)   14C8 2A 63 83    		    LD HL,(GR_PARAM1)	;
123)   14CB 22 5F 83    		    LD (GR_LASTX),HL  ;SAVE TO LAST              	;SAVE TO LAST
124)   14CE 2A 65 83    		    LD HL,(GR_PARAM2)	;
125)   14D1 22 61 83    		    LD (GR_LASTY),HL  ;SAVE TO LAST     	;SAVE TO LAST
126)   14D4 C9          		  RET	;
130)   14D5 CD 91 14    		    CALL GETBASICPARAMS	;
131)   14D8 FE 02       		    CP 2	;
132)   14DA C2 CA 17    		    JP NZ,GRPHERR          	;
133)   14DD CD F7 15    		BAS_DODRAW: CALL GRPH_SAVECOLORS	;
134)   14E0 FD E5       		    PUSH IY	;
137)   14E2 2A 5F 83    		    LD HL,(GR_LASTX)	;
138)   14E5 E5          		    PUSH HL	;
139)   14E6 2A 61 83    		    LD HL,(GR_LASTY)	;
140)   14E9 E5          		    PUSH HL	;
141)   14EA CD BD 14    		    CALL GRPH_SAVELASTPOS	;
142)   14ED 2A 63 83    		    LD HL,(GR_PARAM1)	;
143)   14F0 E5          		    PUSH HL	;
144)   14F1 2A 65 83    		    LD HL,(GR_PARAM2)	;
145)   14F4 E5          		    PUSH HL 	;
146)   14F5 CD EE 08    		    CALL LCD_DRAWLINE 	;
148)   14F8 FD E1       		    POP IY	;
149)   14FA CD 0E 16    		    CALL GRPH_RESTORECOLORS	;
150)   14FD C9          		    RET           ;RETURN TO BASIC  	;RETURN TO BASIC
154)   14FE CD 91 14    		@BAS_MOVE: CALL GETBASICPARAMS	;
155)   1501 FE 02       		         CP 2	;
156)   1503 C2 CA 17    		         JP NZ,GRPHERR   	;
158)   1506 CD BD 14    		         CALL GRPH_SAVELASTPOS	;
159)   1509 C9          		         RET	;
165)   150A CD 91 14    		@BAS_POINT:CALL GETBASICPARAMS	;
166)   150D FE 02       		          CP 2	;
167)   150F C2 CA 17    		          JP NZ,GRPHERR   	;
170)   1512 2A 63 83    		          LD HL,(GR_PARAM1)	;
171)   1515 E5          		          PUSH HL	;
172)   1516 2A 65 83    		          LD HL,(GR_PARAM2)	;
173)   1519 E5          		          PUSH HL           	;
174)   151A CD F8 07    		          CALL LCD_READPIXEL	;
178)   151D FD 7E 00    		          LD A,(IY)  	;
179)   1520 FE 29       		          CP ')'	;
180)   1522 C2 CA 17    		          JP NZ,GRPHERR 	;
181)   1525 FD 23       		          INC IY 	;
184)   1527 01 00 00    		          LD BC,0	;
185)   152A F3          		          DI	;
186)   152B E5          		          PUSH HL	;
187)   152C D9          		          EXX	;
188)   152D E1          		          POP HL	;
189)   152E D9          		          EXX           	;
190)   152F 21 00 00    		          LD HL,0	;
191)   1532 FB          		          EI	;
192)   1533 C9          		          RET	;
198)   1534 FE 00       		GRPH_GETGROUP: CP 0	;
200)   1536 21 3A 17    		    LD HL,PLOT00	;
201)   1539 C8          		    RET Z	;
202)   153A FE 0A       		         CP 80.SHR.3	;
203)   153C 21 4A 17    		    LD HL,PLOT80	;
204)   153F C8          		    RET Z	;
205)   1540 FE 0C       		         CP 96.SHR.3	;
206)   1542 21 5A 17    		    LD HL,PLOT96	;
207)   1545 C8          		    RET Z       	;
208)   1546 FE 10       		         CP 128.SHR.3	;
209)   1548 21 6A 17    		    LD HL,PLOT128	;
210)   154B C8          		    RET Z                   	;
211)   154C FE 12       		        CP 144.SHR.3	;
212)   154E 21 7A 17    		    LD HL,PLOT144	;
213)   1551 C8          		    RET Z                   	;
214)   1552 FE 13       		         CP 152.SHR.3	;
215)   1554 21 8A 17    		    LD HL,PLOT152	;
216)   1557 C8          		    RET Z                   	;
217)   1558 FE 14       		         CP 160.SHR.3	;
218)   155A 21 9A 17    		    LD HL,PLOT160	;
219)   155D C8          		    RET Z                   	;
220)   155E FE 18       		         CP 192.SHR.3	;
221)   1560 21 AA 17    		    LD HL,PLOT192	;
222)   1563 C8          		    RET Z                   	;
223)   1564 FE 19       		         CP 200.SHR.3	;
224)   1566 21 BA 17    		         LD HL,PLOT200	;
225)   1569 C8          		         RET Z 	;
226)   156A 21 00 00    		    LD HL,0	;
227)   156D C9          		    RET                                  	;
230)   156E CD 91 14    		@BAS_PLOT:CALL GETBASICPARAMS	;
231)   1571 FE 03       		         CP 3	;
232)   1573 C2 CA 17    		         JP NZ,GRPHERR   	;
233)   1576 3A 63 83    		         LD A,(GR_PARAM1)	;
235)   1579 01 04 00    		         LD BC,4	;
236)   157C 21 65 83    		         LD HL,GR_PARAM2	;
237)   157F 11 63 83    		         LD DE,GR_PARAM1	;
238)   1582 ED B0       		         LDIR                    	;
239)   1584 47          		         LD B,A  ;COMMAND GROUP 5 BITS	;COMMAND GROUP 5 BITS
240)   1585 CB 38       		         SRL B	;
241)   1587 CB 38       		         SRL B	;
242)   1589 CB 38       		         SRL B          	;
243)   158B E6 07       		         AND 7  	;
244)   158D 4F          		         LD C,A  ;SPECIFIC COMMAND IN GROUP	;SPECIFIC COMMAND IN GROUP
245)   158E 78          		         LD A,B	;
246)   158F CD 34 15    		         CALL GRPH_GETGROUP	;
247)   1592 7C          		         LD A,H	;
248)   1593 FE 00       		         CP 0	;
249)   1595 C8          		         RET Z ;RET IF HL=0 GROUP NOT IMPLEMENTED	;RET IF HL=0 GROUP NOT IMPLEMENTED
250)   1596 06 00       		         LD B,0	;
251)   1598 CB 21       		         SLA C      ;C=C*2 2BYTE ADDRESSES	;C=C*2 2BYTE ADDRESSES
252)   159A 09          		         ADD HL,BC  ;C IS 0-7 SPECIFIC COMMD	;C IS 0-7 SPECIFIC COMMD
253)   159B 5E          		         LD E,(HL)	;
254)   159C 23          		         INC HL	;
255)   159D 56          		         LD D,(HL)	;
256)   159E EB          		         EX DE,HL	;
257)   159F E9          		         JP (HL)	;
259)   15A0 AF          		GRPH_NOTIMPL:  XOR     A	;
260)   15A1 CD F0 46    		  CALL    EXTERR	;
261)   15A4 4E 4F 54 20 		  DEFM    'NOT IMPLEMENTED'	;
261)   15A8 49 4D 50 4C 		  DEFM    'NOT IMPLEMENTED'	;
261)   15AC 45 4D 45 4E 		  DEFM    'NOT IMPLEMENTED'	;
261)   15B0 54 45 44    		  DEFM    'NOT IMPLEMENTED'	;
262)   15B3 00          		  DEFB    0     	;
266)   15B4 2A 63 83    		GRPH_CALCREL: LD HL,(GR_PARAM1)	;
267)   15B7 ED 5B 5F 83 		        LD DE,(GR_LASTX)	;
268)   15BB 19          		        ADD HL,DE	;
269)   15BC 22 63 83    		        LD (GR_PARAM1),HL	;
270)   15BF 2A 65 83    		        LD HL,(GR_PARAM2)	;
271)   15C2 ED 5B 61 83 		        LD DE,(GR_LASTY)	;
272)   15C6 19          		        ADD HL,DE	;
273)   15C7 22 65 83    		        LD (GR_PARAM2),HL	;
274)   15CA C9          		    RET	;
277)   15CB CD B4 15    		        CALL GRPH_CALCREL	;
278)   15CE CD BD 14    		        CALL GRPH_SAVELASTPOS         	;
279)   15D1 C9          		        RET	;
282)   15D2 CD B4 15    		        CALL GRPH_CALCREL	;
283)   15D5 CD DD 14    		        CALL BAS_DODRAW	;
284)   15D8 C9          		        RET	;
287)   15D9 2A 01 83    		        LD HL,(FCOLOR)	;
288)   15DC E5          		        PUSH HL	;
289)   15DD 2A 03 83    		        LD HL,(BCOLOR)	;
290)   15E0 22 01 83    		        LD (FCOLOR),HL	;
291)   15E3 E1          		        POP HL	;
292)   15E4 22 03 83    		        LD (BCOLOR),HL	;
293)   15E7 C9          		        RET	;
296)   15E8 2A 05 83    		        LD HL,(FGRCOL)	;
297)   15EB E5          		        PUSH HL	;
298)   15EC 2A 07 83    		        LD HL,(BGRCOL)	;
299)   15EF 22 05 83    		        LD (FGRCOL),HL	;
300)   15F2 E1          		        POP HL	;
301)   15F3 22 07 83    		        LD (BGRCOL),HL	;
302)   15F6 C9          		        RET	;
306)   15F7 01 04 00    		        LD BC,4 ;2 FCOLOR + 2 BCOLOR	;2 FCOLOR + 2 BCOLOR
307)   15FA 21 01 83    		        LD HL,FCOLOR	;
308)   15FD 11 09 83    		        LD DE,FCOLTM 	;
309)   1600 ED B0       		        LDIR	;
310)   1602 01 04 00    		        LD BC,4 ;2 FGRCOL + 2 BGRCOL	;2 FGRCOL + 2 BGRCOL
311)   1605 21 05 83    		        LD HL,FGRCOL	;
312)   1608 11 01 83    		        LD DE,FCOLOR	;
313)   160B ED B0       		        LDIR         	;
314)   160D C9          		    RET	;
318)   160E 01 04 00    		        LD BC,4 ;2 FCOLOR + 2 BCOLOR	;2 FCOLOR + 2 BCOLOR
319)   1611 21 09 83    		        LD HL,FCOLTM	;
320)   1614 11 01 83    		        LD DE,FCOLOR 	;
321)   1617 ED B0       		        LDIR	;
322)   1619 C9          		    RET	;
326)   161A CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
327)   161D CD B4 15    		        CALL GRPH_CALCREL	;
328)   1620 CD DD 14    		        CALL BAS_DODRAW	;
329)   1623 CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
330)   1626 C9          		        RET	;
333)   1627 CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
334)   162A CD DD 14    		        CALL BAS_DODRAW	;
335)   162D CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
336)   1630 C9          		        RET	;
339)   1631 CD DD 14    		        CALL BAS_DODRAW  ;FROM LASTX=2ND PT TO GR_PARAM1=3RD PT	;FROM LASTX=2ND PT TO GR_PARAM1=3RD PT
340)   1634 2A 57 83    		        LD HL,(GR_LASTX3)	;
341)   1637 22 63 83    		        LD (GR_PARAM1),HL	;
342)   163A 2A 59 83    		        LD HL,(GR_LASTY3)	;
343)   163D 22 65 83    		        LD (GR_PARAM2),HL	;
344)   1640 CD DD 14    		        CALL BAS_DODRAW  ;FROM LASTX=3RD PT TO GR_PARAM1=1ST PT	;FROM LASTX=3RD PT TO GR_PARAM1=1ST PT
345)   1643 2A 57 83    		        LD HL,(GR_LASTX3)	;
346)   1646 22 63 83    		        LD (GR_PARAM1),HL	;
347)   1649 2A 59 83    		        LD HL,(GR_LASTY3)	;
348)   164C 22 65 83    		        LD (GR_PARAM2),HL	;
349)   164F CD DD 14    		        CALL BAS_DODRAW  ;FROM LASTX=1ST PT TO GR_PARAM1=2ND PT	;FROM LASTX=1ST PT TO GR_PARAM1=2ND PT
350)   1652 01 04 00    		        LD BC,4	;
351)   1655 21 57 83    		        LD HL,GR_LASTX3	;
352)   1658 11 5F 83    		        LD DE,GR_LASTX	;
353)   165B ED B0       		        LDIR               ;SET LASTX,LASTY         	;SET LASTX,LASTY
354)   165D C9          		    RET	;
356)   165E CD E8 15    		GRPH_TRIANGLEBC:CALL GRPH_SWAPGRCOLS	;
357)   1661 CD 31 16    		        CALL GRPH_TRIANGLE	;
358)   1664 CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
359)   1667 C9          		    RET	;
362)   1668 21 63 83    		GRPH_RECT:LD HL,GR_PARAM1	;
363)   166B 11 67 83    		        LD DE,GR_PARAM3	;
364)   166E 01 04 00    		        LD BC,4	;
365)   1671 ED B0       		        LDIR               ;COPY PARAM1,2 TO 3,4         	;COPY PARAM1,2 TO 3,4
366)   1673 2A 61 83    		        LD HL,(GR_LASTY)	;
367)   1676 E5          		        PUSH HL            ;PT1_Y	;PT1_Y
368)   1677 2A 5F 83    		        LD HL,(GR_LASTX)	;
369)   167A E5          		        PUSH HL            ;PT1_X         	;PT1_X
370)   167B 2A 61 83    		        LD HL,(GR_LASTY)         	;
371)   167E 22 65 83    		        LD (GR_PARAM2),HL         	;
372)   1681 CD DD 14    		        CALL BAS_DODRAW    ;PT1_X,PT1_Y TO PT2_X,PT1_Y	;PT1_X,PT1_Y TO PT2_X,PT1_Y
373)   1684 2A 69 83    		        LD HL,(GR_PARAM4)	;
374)   1687 22 65 83    		        LD (GR_PARAM2),HL	;
375)   168A CD DD 14    		        CALL BAS_DODRAW    ;PT2_X,PT1_Y TO PT2_X,PT2_Y	;PT2_X,PT1_Y TO PT2_X,PT2_Y
376)   168D E1          		        POP HL             ;PT1_X	;PT1_X
377)   168E 22 63 83    		        LD (GR_PARAM1),HL         	;
378)   1691 CD DD 14    		        CALL BAS_DODRAW    ;PT2_X,PT2_Y TO PT1_X,PT2_Y	;PT2_X,PT2_Y TO PT1_X,PT2_Y
379)   1694 E1          		        POP HL             ;PT1_Y	;PT1_Y
380)   1695 22 65 83    		        LD (GR_PARAM2),HL	;
381)   1698 CD DD 14    		        CALL BAS_DODRAW    ;PT1_X,PT2_Y TO PT1_X,PT1_Y	;PT1_X,PT2_Y TO PT1_X,PT1_Y
382)   169B 01 04 00    		        LD BC,4	;
383)   169E 21 67 83    		        LD HL,GR_PARAM3	;
384)   16A1 11 5F 83    		        LD DE,GR_LASTX	;
385)   16A4 ED B0       		        LDIR               ;SET LASTX,LASTY	;SET LASTX,LASTY
386)   16A6 C9          		        RET	;
388)   16A7 CD E8 15    		GRPH_RECTBC:CALL GRPH_SWAPGRCOLS	;
389)   16AA CD 68 16    		        CALL GRPH_RECT	;
390)   16AD CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
391)   16B0 C9          		    RET	;
394)   16B1 CD F7 15    		GRPH_CIRCREL: CALL GRPH_SAVECOLORS	;
395)   16B4 2A 63 83    		        LD HL,(GR_PARAM1)	;
396)   16B7 7C          		        LD A,H	;
397)   16B8 B5          		        OR L	;
398)   16B9 20 06       		        JR NZ,CIRE_DOIT 	;
399)   16BB 2A 65 83    		        LD HL,(GR_PARAM2)	;
400)   16BE 7C          		        LD A,H	;
401)   16BF B5          		        OR L	;
402)   16C0 C8          		        RET Z              ; RETURN IF BOTH PARAMS ARE ZERO         	; RETURN IF BOTH PARAMS ARE ZERO
403)   16C1 ED 5B 5F 83 		CIRE_DOIT:LD DE,(GR_LASTX)	;
404)   16C5 D5          		        PUSH DE	;
405)   16C6 ED 5B 61 83 		        LD DE,(GR_LASTY)	;
406)   16CA D5          		        PUSH DE 	;
407)   16CB E5          		        PUSH HL	;
408)   16CC CD E5 0A    		        CALL LCD_CIRCLE	;
409)   16CF CD 0E 16    		        CALL GRPH_RESTORECOLORS	;
410)   16D2 C9          		        RET  	;
412)   16D3 CD E8 15    		GRPH_CIRCRELBC:CALL GRPH_SWAPGRCOLS	;
413)   16D6 CD B1 16    		        CALL GRPH_CIRCREL	;
414)   16D9 CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
415)   16DC C9          		        RET	;
421)   16DD C9          		GRPH_CIRCLE:RET	;
422)   16DE 2A 5F 83    		        LD HL,(GR_LASTX)	;
423)   16E1 ED 5B 63 83 		        LD DE,(GR_PARAM1)	;
424)   16E5 AF          		        XOR A	;
425)   16E6 ED 42       		        SBC HL,BC	;
426)   16E8 22 67 83    		        LD (GR_PARAM3),HL    ;X2-X1	;X2-X1
427)   16EB 2A 61 83    		        LD HL,(GR_LASTY)	;
428)   16EE ED 5B 65 83 		        LD DE,(GR_PARAM2)	;
429)   16F2 AF          		        XOR A	;
430)   16F3 ED 42       		        SBC HL,BC	;
431)   16F5 22 69 83    		        LD (GR_PARAM4),HL    ;Y2-Y1         	;Y2-Y1
433)   16F8 ED 4B 67 83 		        LD BC,(GR_PARAM3)	;
434)   16FC C5          		        PUSH BC	;
435)   16FD D1          		        POP DE	;
436)   16FE CD F2 18    		        CALL MULT32   ;BCHL RESULT	;BCHL RESULT
437)   1701 D9          		        EXX	;
438)   1702 C5          		        PUSH BC	;
439)   1703 D1          		        POP DE	;
440)   1704 D9          		        EXX	;
441)   1705 E5          		        PUSH HL       ;DE LOW         	;DE LOW
442)   1706 ED 4B 69 83 		        LD BC,(GR_PARAM4)	;
443)   170A C5          		        PUSH BC	;
444)   170B D1          		        POP DE	;
445)   170C CD F2 18    		        CALL MULT32   ;BCHL RESULT	;BCHL RESULT
446)   170F D9          		        EXX         	;
447)   1710 C5          		        PUSH BC	;
448)   1711 E1          		        POP HL	;
449)   1712 D9          		        EXX	;
450)   1713 D1          		        POP DE	;
452)   1714 CD 0D 19    		        CALL ADD32	;
456)   1717 C9          		        RET	;
458)   1718 CD E8 15    		GRPH_CIRCLEBC:CALL GRPH_SWAPGRCOLS	;
459)   171B CD DD 16    		        CALL GRPH_CIRCLE	;
460)   171E CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
461)   1721 C9          		        RET  	;
465)   1722 CD E8 15    		GRPH_FILL: CALL GRPH_SWAPGRCOLS 	;
466)   1725 CD F7 15    		        CALL GRPH_SAVECOLORS	;
467)   1728 2A 63 83    		        LD HL,(GR_PARAM1)	;
468)   172B E5          		        PUSH HL	;
469)   172C 2A 65 83    		        LD HL,(GR_PARAM2)	;
470)   172F E5          		        PUSH HL	;
471)   1730 CD 69 0C    		        CALL LCD_FILL	;
472)   1733 CD 0E 16    		        CALL GRPH_RESTORECOLORS	;
473)   1736 CD E8 15    		        CALL GRPH_SWAPGRCOLS	;
474)   1739 C9          		        RET         	;
476)   173A CB 15       		PLOT00: DW GRPH_MOVEREL	;
477)   173C D2 15       		    DW GRPH_LINEREL	;
478)   173E A0 15       		    DW GRPH_NOTIMPL	;
479)   1740 1A 16       		    DW GRPH_LINERELBC	;
480)   1742 BD 14       		    DW GRPH_SAVELASTPOS	;
481)   1744 DD 14       		    DW BAS_DODRAW	;
482)   1746 A0 15       		    DW GRPH_NOTIMPL     	;
483)   1748 27 16       		    DW GRPH_DRAWBC	;
485)   174A A0 15       		PLOT80: DW GRPH_NOTIMPL	;
486)   174C 31 16       		    DW GRPH_TRIANGLE	;
487)   174E A0 15       		    DW GRPH_NOTIMPL	;
488)   1750 5E 16       		    DW GRPH_TRIANGLEBC	;
489)   1752 A0 15       		    DW GRPH_NOTIMPL	;
490)   1754 31 16       		    DW GRPH_TRIANGLE	;
491)   1756 A0 15       		    DW GRPH_NOTIMPL     	;
492)   1758 5E 16       		    DW GRPH_TRIANGLEBC	;
494)   175A A0 15       		PLOT96: DW GRPH_NOTIMPL	;
495)   175C 68 16       		    DW GRPH_RECT	;
496)   175E A0 15       		    DW GRPH_NOTIMPL	;
497)   1760 A7 16       		    DW GRPH_RECTBC	;
498)   1762 A0 15       		    DW GRPH_NOTIMPL	;
499)   1764 68 16       		    DW GRPH_RECT	;
500)   1766 A0 15       		    DW GRPH_NOTIMPL     	;
501)   1768 A7 16       		    DW GRPH_RECTBC	;
503)   176A A0 15       		PLOT128: DW GRPH_NOTIMPL	;
504)   176C 22 17       		    DW GRPH_FILL	;
505)   176E A0 15       		    DW GRPH_NOTIMPL	;
506)   1770 A0 15       		    DW GRPH_NOTIMPL	;
507)   1772 A0 15       		    DW GRPH_NOTIMPL	;
508)   1774 A0 15       		    DW GRPH_NOTIMPL	;
509)   1776 A0 15       		    DW GRPH_NOTIMPL     	;
510)   1778 A0 15       		    DW GRPH_NOTIMPL	;
512)   177A B1 16       		PLOT144: DW GRPH_CIRCREL	;
513)   177C B1 16       		    DW GRPH_CIRCREL	;
514)   177E A0 15       		    DW GRPH_NOTIMPL	;
515)   1780 D3 16       		    DW GRPH_CIRCRELBC	;
516)   1782 DD 16       		    DW GRPH_CIRCLE	;
517)   1784 DD 16       		    DW GRPH_CIRCLE	;
518)   1786 A0 15       		    DW GRPH_NOTIMPL     	;
519)   1788 18 17       		    DW GRPH_CIRCLEBC	;
521)   178A A0 15       		PLOT152: DW GRPH_NOTIMPL	;
522)   178C A0 15       		    DW GRPH_NOTIMPL	;
523)   178E A0 15       		    DW GRPH_NOTIMPL	;
524)   1790 A0 15       		    DW GRPH_NOTIMPL	;
525)   1792 A0 15       		    DW GRPH_NOTIMPL	;
526)   1794 A0 15       		    DW GRPH_NOTIMPL	;
527)   1796 A0 15       		    DW GRPH_NOTIMPL     	;
528)   1798 A0 15       		    DW GRPH_NOTIMPL	;
530)   179A A0 15       		PLOT160: DW GRPH_NOTIMPL	;
531)   179C A0 15       		    DW GRPH_NOTIMPL	;
532)   179E A0 15       		    DW GRPH_NOTIMPL	;
533)   17A0 A0 15       		    DW GRPH_NOTIMPL	;
534)   17A2 A0 15       		    DW GRPH_NOTIMPL	;
535)   17A4 A0 15       		    DW GRPH_NOTIMPL	;
536)   17A6 A0 15       		    DW GRPH_NOTIMPL     	;
537)   17A8 A0 15       		    DW GRPH_NOTIMPL	;
539)   17AA A0 15       		PLOT192: DW GRPH_NOTIMPL	;
540)   17AC A0 15       		    DW GRPH_NOTIMPL	;
541)   17AE A0 15       		    DW GRPH_NOTIMPL	;
542)   17B0 A0 15       		    DW GRPH_NOTIMPL	;
543)   17B2 A0 15       		    DW GRPH_NOTIMPL	;
544)   17B4 A0 15       		    DW GRPH_NOTIMPL	;
545)   17B6 A0 15       		    DW GRPH_NOTIMPL     	;
546)   17B8 A0 15       		    DW GRPH_NOTIMPL	;
548)   17BA A0 15       		PLOT200: DW GRPH_NOTIMPL	;
549)   17BC A0 15       		    DW GRPH_NOTIMPL	;
550)   17BE A0 15       		    DW GRPH_NOTIMPL	;
551)   17C0 A0 15       		    DW GRPH_NOTIMPL	;
552)   17C2 A0 15       		    DW GRPH_NOTIMPL	;
553)   17C4 A0 15       		    DW GRPH_NOTIMPL	;
554)   17C6 A0 15       		    DW GRPH_NOTIMPL     	;
555)   17C8 A0 15       		    DW GRPH_NOTIMPL	;
558)   17CA AF          		  XOR     A	;
559)   17CB CD F0 46    		  CALL    EXTERR	;
560)   17CE 70 61 72 61 		  DEFM    'param error'	;
560)   17D2 6D 20 65 72 		  DEFM    'param error'	;
560)   17D6 72 6F 72    		  DEFM    'param error'	;
561)   17D9 00          		  DEFB    0     	;
  4)   17DA 	            		PORT_TAPE      EQU DEVTAP      ; SAVE/LOAD PORT 1 BYTE=0xDD 2ND BYTE=COMMAND 	; SAVE/LOAD PORT 1 BYTE=0xDD 2ND BYTE=COMMAND
 17)   17DA 3E DD       		           LD A,0xDD	;
 18)   17DC CD 6A 05    		           CALL RS_TX	;
 19)   17DF 3E 0A       		           LD A,COMMD_SAVE	;
 20)   17E1 CD 6A 05    		           CALL RS_TX	;
 22)   17E4 7E          		OSSV_NXT:  LD A,(HL)	;
 23)   17E5 CD 6A 05    		           CALL RS_TX	;
 24)   17E8 23          		           INC HL	;
 25)   17E9 FE 0D       		           CP 0x0D	;
 26)   17EB 20 F7       		           JR NZ,OSSV_NXT	;
 28)   17ED 79          		           LD A,C	;
 29)   17EE CD 6A 05    		           CALL RS_TX	;
 30)   17F1 78          		           LD A,B	;
 31)   17F2 CD 6A 05    		           CALL RS_TX	;
 33)   17F5 2A DC 82    		           LD HL,(PAGE)	;
 34)   17F8 7E          		OSSV_NXT2: LD A,(HL)	;
 35)   17F9 CD 6A 05    		           CALL RS_TX	;
 36)   17FC 23          		           INC HL	;
 37)   17FD 0B          		           DEC BC	;
 38)   17FE 78          		           LD A,B	;
 39)   17FF B1          		           OR C	;
 40)   1800 20 F6       		           JR NZ,OSSV_NXT2                        	;
 41)   1802 C9          		           RET              	;
 47)   1803 3E DD       		           LD A,0xDD	;
 48)   1805 CD 6A 05    		           CALL RS_TX	;
 49)   1808 3E 14       		           LD A,COMMD_LOAD	;
 50)   180A CD 6A 05    		           CALL RS_TX	;
 52)   180D 7E          		OSLD_NXT:  LD A,(HL)	;
 53)   180E CD 6A 05    		           CALL RS_TX	;
 54)   1811 23          		           INC HL	;
 55)   1812 FE 0D       		           CP 0x0D	;
 56)   1814 20 F7       		           JR NZ,OSLD_NXT	;
 58)   1816 CD 83 05    		           CALL RS_RX	;
 59)   1819 4F          		           LD C,A	;
 60)   181A CD 83 05    		           CALL RS_RX	;
 61)   181D 47          		           LD B,A	;
 62)   181E B7          		           OR A	;
 63)   181F 20 0A       		           JR NZ,OK1	;
 64)   1821 79          		           LD A,C	;
 65)   1822 B7          		           OR A	;
 66)   1823 20 06       		           JR NZ,OK1	;
 68)   1825 CD 83 05    		           CALL RS_RX ;GET THE ERRORCODE            	;GET THE ERRORCODE
 69)   1828 C3 42 18    		           JP LDERR	;
 72)   182B 2A DC 82    		           LD HL,(PAGE)                        	;
 73)   182E CD 83 05    		OSLD_NXT2: CALL RS_RX	;
 74)   1831 77          		           LD (HL),A	;
 75)   1832 23          		           INC HL	;
 76)   1833 0B          		           DEC BC	;
 77)   1834 78          		           LD A,B	;
 78)   1835 B1          		           OR C	;
 79)   1836 20 F6       		           JR NZ,OSLD_NXT2                        	;
 80)   1838 44          		           LD B,H	;
 81)   1839 4D          		           LD C,L	;
 82)   183A 21 DE 82    		           LD HL,TOP ;SAVE TOP OF BASIC 	;SAVE TOP OF BASIC
 83)   183D 71          		           LD (HL),C	;
 84)   183E 23          		           INC HL	;
 85)   183F 70          		           LD (HL),B            	;
 86)   1840 37          		           SCF       ;SET C = NO ERROR            	;SET C = NO ERROR
 87)   1841 C9          		           RET   	;
 89)   1842 FE 04       		LDERR:    CP 4	;
 90)   1844 28 11       		           JR Z,FLNOTF	;
 91)   1846 CD F0 46    		           CALL    EXTERR	;
 92)   1849 45 72 72 6F 		         DEFM    'Error Loading'	;
 92)   184D 72 20 4C 6F 		         DEFM    'Error Loading'	;
 92)   1851 61 64 69 6E 		         DEFM    'Error Loading'	;
 92)   1855 67          		         DEFM    'Error Loading'	;
 93)   1856 00          		         DEFB    0   	;
 94)   1857 CD F0 46    		FLNOTF:    CALL    EXTERR	;
 95)   185A 57 72 6F 6E 		         DEFM    'Wrong Filename'	;
 95)   185E 67 20 46 69 		         DEFM    'Wrong Filename'	;
 95)   1862 6C 65 6E 61 		         DEFM    'Wrong Filename'	;
 95)   1866 6D 65       		         DEFM    'Wrong Filename'	;
 96)   1868 00          		         DEFB    0   	;
 14)   1869 C9          		     RET 	;
 17)   186A F5          		DELAYMICROSEC: PUSH AF	;
 18)   186B D5          		 PUSH DE	;
 19)   186C 1B          		 DEC DE	;
 20)   186D D1          		 POP DE	;
 21)   186E F1          		 POP AF	;
 22)   186F C9          		 RET	;
 25)   1870 CD 6A 18    		S21: CALL DELAYMICROSEC	;
 26)   1873 10 FB       		 DJNZ S21 	;
 27)   1875 C9          		 RET	;
 31)   1876 F5          		DELAYMILISEC: PUSH AF	;
 32)   1877 D5          		 PUSH DE	;
 33)   1878 11 2C 01    		 LD DE,300 ;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS	;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS
 34)   187B 1B          		DEL1: DEC DE	;
 35)   187C 7A          		 LD A,D           ;TEST FOR DE=00	;TEST FOR DE=00
 36)   187D B3          		 OR E	;
 37)   187E 20 FB       		 JR NZ,DEL1 	;
 38)   1880 D1          		 POP DE	;
 39)   1881 F1          		 POP AF	;
 40)   1882 C9          		 RET	;
 42)   1883 06 50       		DEL2:LD B,80	;
 44)   1885 CD 76 18    		S1: CALL DELAYMILISEC	;
 45)   1888 10 FB       		 DJNZ S1 	;
 46)   188A C9          		 RET	;
 51)   188B C5          		@DELAYSEC:PUSH BC 	;
 52)   188C 01 E8 03    		        LD BC,1000 	;
 53)   188F C5          		MYDLAGN: PUSH BC	;
 54)   1890 CD 76 18    		        CALL DELAY  ;1MS ON 8 MHZ	;1MS ON 8 MHZ
 55)   1893 C1          		       POP BC	;
 56)   1894 0B          		       DEC BC	;
 57)   1895 78          		        LD A,B	;
 58)   1896 B1          		        OR C	;
 59)   1897 20 F6       		        JR NZ,MYDLAGN	;
 60)   1899 C1          		        POP BC	;
 61)   189A 10 EF       		        DJNZ DELAYSEC	;
 62)   189C C9          		        RET	;
 67)   189D F5          		OUTASC PUSH AF	;
 68)   189E D5          		 PUSH DE	;
 69)   189F CD A8 18    		 CALL B2Bcd	;
 70)   18A2 D1          		 POP DE	;
 71)   18A3 CD BF 18    		 CALL BCD2HA	;
 72)   18A6 F1          		 POP AF	;
 73)   18A7 C9          		 RET 	;
 86)   18A8 01 00 10    		LD BC, 16*256+0 ; handle 16 bits, one bit per iteration	; handle 16 bits, one bit per iteration
 87)   18AB 11 00 00    		LD DE, 0	;
 89)   18AE 29          		ADD HL, HL	;
 90)   18AF 7B          		LD A, E	;
 91)   18B0 8F          		ADC A, A	;
 92)   18B1 27          		DAA	;
 93)   18B2 5F          		LD E, A	;
 94)   18B3 7A          		LD A, D	;
 95)   18B4 8F          		ADC A, A	;
 96)   18B5 27          		DAA	;
 97)   18B6 57          		LD D, A	;
 98)   18B7 79          		LD A, C	;
 99)   18B8 8F          		ADC A, A	;
100)   18B9 27          		DAA	;
101)   18BA 4F          		LD C, A	;
102)   18BB 10 F1       		DJNZ cvtLp	;
103)   18BD EB          		EX DE,HL	;
104)   18BE C9          		RET	;
115)   18BF 79          		LD A, C	;
116)   18C0 CD D6 18    		CALL cvtUN	;
117)   18C3 79          		LD A, C	;
118)   18C4 CD DA 18    		CALL cvtLN	;
119)   18C7 7C          		LD A, H	;
120)   18C8 CD D6 18    		CALL cvtUN	;
121)   18CB 7C          		LD A, H	;
122)   18CC CD DA 18    		CALL cvtLN	;
123)   18CF 7D          		LD A, L	;
124)   18D0 CD D6 18    		CALL cvtUN	;
125)   18D3 7D          		LD A, L	;
126)   18D4 18 04       		JR cvtLN	;
128)   18D6 1F          		RRA ; move upper nibble into lower nibble	; move upper nibble into lower nibble
129)   18D7 1F          		RRA	;
130)   18D8 1F          		RRA	;
131)   18D9 1F          		RRA	;
133)   18DA E6 0F       		AND 0Fh ; isolate lower nibble	; isolate lower nibble
134)   18DC C6 90       		ADD A, 90h ; old trick	; old trick
135)   18DE 27          		DAA ; for converting	; for converting
136)   18DF CE 40       		ADC A, 40h ; one nibble	; one nibble
137)   18E1 27          		DAA ; to hex ASCII	; to hex ASCII
138)   18E2 12          		LD (DE), A	;
139)   18E3 13          		INC DE	;
140)   18E4 C9          		RET	;
  9)   18E5 78          		   ld a,b	;
 10)   18E6 06 10       		   ld b,16	;
 12)   18E8 29          		   add hl,hl	;
 13)   18E9 CB 21       		   sla c	;
 14)   18EB 17          		   rla	;
 15)   18EC 30 01       		   jr nc,Mult16_NoAdd	;
 16)   18EE 19          		   add hl,de	;
 18)   18EF 10 F7       		   djnz Mult16_Loop	;
 19)   18F1 C9          		   ret	;
 25)   18F2 D5          		@Mult32:PUSH DE	;
 26)   18F3 79          		   ld a,c	;
 27)   18F4 48          		   ld c,b	;
 28)   18F5 21 00 00    		   ld hl,0	;
 29)   18F8 06 10       		   ld b,16	;
 31)   18FA 29          		   add hl,hl	;
 32)   18FB 17          		   rla	;
 33)   18FC CB 11       		   rl c	;
 34)   18FE 30 07       		   jr nc,Mult32_NoAdd	;
 35)   1900 19          		   add hl,de	;
 36)   1901 CE 00       		   adc a,0	;
 37)   1903 D2 07 19    		   jp nc,Mult32_NoAdd	;
 38)   1906 0C          		   inc c	;
 40)   1907 10 F1       		   djnz Mult32_Loop	;
 41)   1909 41          		   ld b,c	;
 42)   190A 4F          		   ld c,a	;
 43)   190B D1          		   POP DE	;
 44)   190C C9          		   ret	;
 52)   190D 19          		       ADD     HL,DE   ; 16-BIT ADD OF HL AND DE	; 16-BIT ADD OF HL AND DE
 53)   190E D9          		       EXX	;
 54)   190F ED 5A       		       ADC     HL,DE   ; 16-BIT ADD OF HL AND DE WITH CARRY	; 16-BIT ADD OF HL AND DE WITH CARRY
 55)   1911 D9          		       EXX	;
 58)   1912 C9          		       RET	;
 68)   1913 11 40 00    		   ld de,$0040	;
 69)   1916 7D          		   ld a,l	;
 70)   1917 6C          		   ld l,h	;
 71)   1918 62          		   ld h,d	;
 72)   1919 B7          		   or a	;
 73)   191A 06 08       		   ld b,8	;
 75)   191C ED 52       		   sbc hl,de	;
 76)   191E 30 01       		   jr nc,Sqr16_Skip	;
 77)   1920 19          		   add hl,de	;
 79)   1921 3F          		   ccf	;
 80)   1922 CB 12       		   rl d	;
 81)   1924 87          		   add a,a	;
 82)   1925 ED 6A       		   adc hl,hl	;
 83)   1927 87          		   add a,a	;
 84)   1928 ED 6A       		   adc hl,hl	;
 85)   192A 10 F0       		   djnz Sqr16_Loop	;
 86)   192C C9          		   ret        	;
 30)   192D C3 38 0E    		@MYOS_CLRSCN:JP LCD_CLRSCR       ; CLRSCN: clears the screen.	; CLRSCN: clears the screen.
 33)   1930 7D          		         LD A,L	;
 34)   1931 32 91 83    		         LD (TIMECTR),A	;
 35)   1934 7C          		     LD A,H	;
 36)   1935 32 92 83    		        LD (TIMECTR+1),A	;
 37)   1938 7B          		        LD A,E	;
 38)   1939 32 93 83    		        LD (TIMECTR+2),A	;
 39)   193C 7A          		        LD A,D	;
 40)   193D 32 94 83    		        LD (TIMECTR+3),A         	;
 41)   1940 C9          		        RET	;
 45)   1941 3A 91 83    		         LD A,(TIMECTR)	;
 46)   1944 6F          		         LD L,A	;
 47)   1945 3A 92 83    		        LD A,(TIMECTR+1)	;
 48)   1948 67          		        LD H,A	;
 49)   1949 3A 93 83    		        LD A,(TIMECTR+2)	;
 50)   194C 5F          		        LD E,A	;
 51)   194D 3A 94 83    		        LD A,(TIMECTR+3)	;
 52)   1950 57          		        LD D,A	;
 53)   1951 C9          		       RET         	;
 55)   1952 63          		          LD H,E	;
 56)   1953 E5          		          PUSH HL	;
 57)   1954 CD F1 0D    		          CALL LCD_RMVCURS	;
 58)   1957 E1          		          POP HL	;
 59)   1958 7C          		          LD A,H	;
 60)   1959 32 0D 83    		          LD (CURSORX),A	;
 61)   195C 7D          		          LD A,L	;
 62)   195D 32 0E 83    		          LD (CURSORY),A	;
 63)   1960 CD F6 0D    		          CALL LCD_PRNCURS                      	;
 64)   1963 C9          		          RET	;
 66)   1964 16 00       		          LD D,0	;
 67)   1966 3A 0D 83    		          LD A,(CURSORX)	;
 68)   1969 5F          		          LD E,A	;
 69)   196A 26 00       		          LD H,0	;
 71)   196C CD 47 0D    		          CALL LCD_CALCLINE ;GETS CURSORY WITH SCROLL	;GETS CURSORY WITH SCROLL
 72)   196F 6F          		       LD L,A	;
 73)   1970 C9          		       RET	;
 74)   1971 06 50       		KEYGET: LD      B,80 ;SCREEN WIDTH IN CHARS      	;SCREEN WIDTH IN CHARS
 76)   1973 E5          		         PUSH    HL	;
 77)   1974 ED 62       		          SBC     HL,HL           ;HL=0	;HL=0
 78)   1976 CD 5E 1B    		          CALL    MYOS_OSKEY	;
 79)   1979 E1          		          POP     HL	;
 80)   197A D8          		          RET     C	;
 81)   197B 18 F6       		          JR      MYOS_OSRDCH           	;
 82)   197D C9          		       RET  	;
 84)   197E F5          		       PUSH    AF	;
 85)   197F D5          		          PUSH    DE	;
 86)   1980 E5          		          PUSH    HL	;
 87)   1981 DD E5       		          PUSH    IX                      	;
 88)   1983 5F          		          LD      E,A	;
 89)   1984 CD 7D 1B    		          CALL    ESCTEST	;
 92)   1987 7B          		          LD A,E	;
 93)   1988 FE 20       		          CP 32	;
 94)   198A 38 0D       		          JR C,CTRCODE	;
 95)   198C FE 7F       		          CP 127   ;BACKSPACE 	;BACKSPACE
 96)   198E C2 12 1B    		          JP NZ,PRINTIT	;
 97)   1991 3E 08       		          LD A,8            ;DO A BACKSPACE	;DO A BACKSPACE
 98)   1993 CD 73 0C    		          CALL LCD_PRINTCHAR	;
 99)   1996 C3 15 1B    		          JP OSWREXIT	;
100)   1999 FE 04       		CTRCODE:  CP 4 ;WRITE TEXT AT TEXT POS	;WRITE TEXT AT TEXT POS
101)   199B 20 06       		          JR NZ,CC1	;
102)   199D 32 16 83    		          LD (VDUMODE),A           	;
103)   19A0 C3 15 1B    		          JP OSWREXIT	;
104)   19A3 FE 05       		CC1:      CP 5 ;WRITE TEXT AT GRAPH POS    	;WRITE TEXT AT GRAPH POS
105)   19A5 20 06       		          JR NZ,CC2	;
106)   19A7 32 16 83    		          LD (VDUMODE),A	;
107)   19AA C3 15 1B    		          JP OSWREXIT	;
108)   19AD FE 06       		CC2:      CP 6 ;ENABLE OUTPUT TO SCREEN	;ENABLE OUTPUT TO SCREEN
109)   19AF 20 03       		          JR NZ,CC3	;
110)   19B1 C3 15 1B    		          JP OSWREXIT	;
111)   19B4 FE 07       		CC3:      CP 7 ;BEEP	;BEEP
112)   19B6 20 03       		          JR NZ,CC4	;
113)   19B8 C3 15 1B    		          JP OSWREXIT	;
114)   19BB FE 08       		CC4:      CP 8 ;MOVE TEXT CURSOR BACK A CHAR	;MOVE TEXT CURSOR BACK A CHAR
115)   19BD 20 03       		          JR NZ,CC5	;
116)   19BF C3 12 1B    		          JP PRINTIT	;
123)   19C2 FE 09       		CC5:      CP 9 ;MOVE TEXT CURSOR FORWARD A CHAR	;MOVE TEXT CURSOR FORWARD A CHAR
124)   19C4 20 0F       		          JR NZ,CC6	;
125)   19C6 3A 0D 83    		          LD A,(CURSORX)	;
126)   19C9 3C          		          INC A	;
127)   19CA FE 50       		          CP 80	;
128)   19CC D2 15 1B    		          JP NC,OSWREXIT	;
129)   19CF 32 0D 83    		          LD (CURSORX),A         	;
130)   19D2 C3 15 1B    		          JP OSWREXIT   	;
131)   19D5 FE 0A       		CC6:      CP 10 ;MOVE TEXT DOWN LF	;MOVE TEXT DOWN LF
132)   19D7 CA 12 1B    		          JP Z,PRINTIT	;
133)   19DA FE 0B       		CC7:      CP 11 ;MOVE TEXT UP	;MOVE TEXT UP
134)   19DC 20 0F       		          JR NZ,CC8	;
135)   19DE 3A 0E 83    		          LD A,(CURSORY)	;
136)   19E1 3D          		          DEC A	;
137)   19E2 FE FF       		          CP 0XFF	;
138)   19E4 CA 15 1B    		          JP Z,OSWREXIT	;
139)   19E7 32 0E 83    		          LD (CURSORY),A           	;
140)   19EA C3 15 1B    		          JP OSWREXIT   	;
141)   19ED FE 0C       		CC8:      CP 12 ; CLS	; CLS
142)   19EF 20 06       		          JR NZ,CC9	;
143)   19F1 CD 38 0E    		          CALL LCD_CLRSCR	;
144)   19F4 C3 15 1B    		          JP OSWREXIT   	;
145)   19F7 FE 0D       		CC9:      CP 13 ;GOTO START OF LINE CR	;GOTO START OF LINE CR
146)   19F9 CA 12 1B    		          JP Z,PRINTIT	;
147)   19FC FE 0E       		CC10:     CP 14 ;ENABLE THE AUTOPAGING MODE	;ENABLE THE AUTOPAGING MODE
148)   19FE 20 03       		          JR NZ,CC11	;
149)   1A00 C3 15 1B    		          JP OSWREXIT   	;
150)   1A03 FE 0F       		CC11:     CP 15 ;DISABLE THE AUTOPAGING MODE	;DISABLE THE AUTOPAGING MODE
151)   1A05 20 03       		          JR NZ,CC12	;
152)   1A07 C3 15 1B    		          JP OSWREXIT   	;
153)   1A0A FE 10       		CC12:     CP 16 ;CLG	;CLG
154)   1A0C 20 06       		          JR NZ,CC13	;
155)   1A0E CD FE 1C    		          CALL MYOS_CLG       	;
156)   1A11 C3 15 1B    		          JP OSWREXIT   	;
157)   1A14 FE 11       		CC13:     CP 17 ; SAME AS COLOUR	; SAME AS COLOUR
158)   1A16 20 09       		          JR NZ,CC14	;
160)   1A18 FD 23       		          INC IY ;SKIP ','	;SKIP ','
161)   1A1A CD 94 5E    		          CALL    EXPRI	;
162)   1A1D D9          		          EXX ;l has the param  color	;l has the param  color
163)   1A1E C3 15 1B    		          JP OSWREXIT   	;
164)   1A21 FE 12       		CC14:     CP 18 ;SAME AS GCOL	;SAME AS GCOL
165)   1A23 20 0F       		          JR NZ,CC15	;
166)   1A25 FD 23       		          INC IY ;SKIP ','	;SKIP ','
167)   1A27 CD 94 5E    		          CALL    EXPRI	;
168)   1A2A D9          		          EXX ;l has the param  mode	;l has the param  mode
169)   1A2B FD 23       		          INC IY ;SKIP ','	;SKIP ','
170)   1A2D CD 94 5E    		          CALL    EXPRI	;
171)   1A30 D9          		          EXX ;l has the param  color                                        	;l has the param  color
173)   1A31 C3 15 1B    		          JP OSWREXIT   	;
174)   1A34 FE 13       		CC15:     CP 19 ;SELECT A COLOR PALLETTE???	;SELECT A COLOR PALLETTE???
175)   1A36 20 0F       		          JR NZ,CC16	;
177)   1A38 06 05       		          LD B,5	;
178)   1A3A C5          		CC15AGN:  PUSH BC	;
179)   1A3B FD 23       		          INC IY ;SKIP ','	;SKIP ','
180)   1A3D CD 94 5E    		          CALL    EXPRI	;
181)   1A40 D9          		          EXX ;l has the param	;l has the param
182)   1A41 C1          		          POP BC	;
183)   1A42 10 F6       		          DJNZ CC15AGN           	;
184)   1A44 C3 15 1B    		          JP OSWREXIT   	;
185)   1A47 FE 14       		CC16:     CP 20 ;RESTORE THE DEFAULT LOGICAL COLORS	;RESTORE THE DEFAULT LOGICAL COLORS
186)   1A49 20 03       		          JR NZ,CC17           	;
188)   1A4B C3 15 1B    		          JP OSWREXIT   	;
189)   1A4E FE 15       		CC17:     CP 21 ;NO OUTPUT TO SCREEN	;NO OUTPUT TO SCREEN
190)   1A50 20 03       		          JR NZ,CC18	;
192)   1A52 C3 15 1B    		          JP OSWREXIT   	;
193)   1A55 FE 16       		CC18:     CP 22 ;LIKE MODE	;LIKE MODE
194)   1A57 20 09       		          JR NZ,CC19	;
195)   1A59 FD 23       		          INC IY ;SKIP ','	;SKIP ','
196)   1A5B CD 94 5E    		          CALL    EXPRI	;
197)   1A5E D9          		          EXX ;l has the param           	;l has the param
198)   1A5F C3 15 1B    		          JP OSWREXIT   	;
199)   1A62 FE 17       		CC19:     CP 23 ;Program characters and control the cursor.???	;Program characters and control the cursor.???
200)   1A64 20 27       		          JR NZ,CC20	;
201)   1A66 06 09       		          LD B,9   ;9 PARAMS CHAR_NO +8 ROWS OF A CHAR	;9 PARAMS CHAR_NO +8 ROWS OF A CHAR
202)   1A68 FD 7E 00    		          LD A,(IY)	;
203)   1A6B FD 23       		          INC IY ;SKIP ',' OR ';'	;SKIP ',' OR ';'
204)   1A6D FE 3B       		          CP ';'	;
205)   1A6F 20 01       		          JR NZ,CC19AGN	;
206)   1A71 05          		          DEC B ; IF ; THE DELIMETER THEN 2 BYTES AT START   	; IF ; THE DELIMETER THEN 2 BYTES AT START
207)   1A72 C5          		CC19AGN:  PUSH BC	;
208)   1A73 CD 94 5E    		          CALL    EXPRI	;
209)   1A76 D9          		          EXX ;l has the param           	;l has the param
210)   1A77 FD 7E 00    		     LD A,(IY)	;
211)   1A7A FE 2C       		     CP ','	;
212)   1A7C 28 07       		     JR Z,CC19NXT0              	;
213)   1A7E FE 3B       		          CP ';'           	;
214)   1A80 20 05       		          JR NZ,CC19NXT	;
215)   1A82 C1          		          POP BC	;
216)   1A83 05          		          DEC B	;
217)   1A84 C5          		          PUSH BC	;
218)   1A85 FD 23       		CC19NXT0: INC IY ;SKIP ','           	;SKIP ','
219)   1A87 C1          		CC19NXT:  POP BC	;
220)   1A88 10 E8       		          DJNZ CC19AGN                     	;
221)   1A8A C3 15 1B    		          JP OSWREXIT   	;
222)   1A8D FE 18       		CC20:     CP 24 ;Define a graphics window	;Define a graphics window
223)   1A8F 20 11       		          JR NZ,CC21	;
224)   1A91 FD 23       		          INC IY ;SKIP ','	;SKIP ','
225)   1A93 06 04       		          LD B,4   ;4 PARAMS TWO CORNERS OF A RECT	;4 PARAMS TWO CORNERS OF A RECT
226)   1A95 C5          		CC20AGN:  PUSH BC           	;
227)   1A96 CD 94 5E    		          CALL    EXPRI	;
228)   1A99 D9          		          EXX ;HL has the param	;HL has the param
229)   1A9A FD 23       		          INC IY ;SKIP ';'	;SKIP ';'
230)   1A9C C1          		          POP BC	;
231)   1A9D 10 F6       		          DJNZ CC20AGN                                	;
232)   1A9F C3 15 1B    		          JP OSWREXIT   	;
233)   1AA2 FE 19       		CC21:     CP 25 ;Identical to PLOT.	;Identical to PLOT.
234)   1AA4 20 17       		          JR NZ,CC22	;
235)   1AA6 FD 23       		          INC IY ;SKIP ','	;SKIP ','
236)   1AA8 CD 94 5E    		          CALL    EXPRI	;
237)   1AAB D9          		          EXX ;L has the param PLOTMODE	;L has the param PLOTMODE
238)   1AAC FD 23       		          INC IY ;SKIP ','	;SKIP ','
239)   1AAE CD 94 5E    		          CALL    EXPRI	;
240)   1AB1 D9          		          EXX ;HL has the param X	;HL has the param X
241)   1AB2 FD 23       		          INC IY ;SKIP ';'	;SKIP ';'
242)   1AB4 CD 94 5E    		          CALL    EXPRI	;
243)   1AB7 D9          		          EXX ;HL has the param Y	;HL has the param Y
244)   1AB8 FD 23       		          INC IY ;SKIP ';'	;SKIP ';'
247)   1ABA C3 15 1B    		          JP OSWREXIT   	;
248)   1ABD FE 1A       		CC22:     CP 26 ;Restore the default text and graphics windows.	;Restore the default text and graphics windows.
249)   1ABF 20 02       		          JR NZ,CC23	;
250)   1AC1 18 52       		          JR OSWREXIT   	;
251)   1AC3 FE 1B       		CC23:     CP 27 ;Send the next character to the screen.	;Send the next character to the screen.
252)   1AC5 20 07       		          JR NZ,CC24	;
253)   1AC7 CD 94 5E    		          CALL    EXPRI	;
254)   1ACA D9          		          EXX ;	;
255)   1ACB 7D          		          LD A,L	;
256)   1ACC 18 44       		          JR PRINTIT           	;
257)   1ACE FE 1C       		CC24:     CP 28 ;Define a text window.	;Define a text window.
258)   1AD0 20 0E       		          JR NZ,CC25	;
259)   1AD2 06 04       		          LD B,4   ;4 PARAMS UPPERLEFT AND LOWERRIGHT	;4 PARAMS UPPERLEFT AND LOWERRIGHT
260)   1AD4 C5          		CC24AGN:  PUSH BC	;
261)   1AD5 FD 23       		     INC IY ;SKIP ','	;SKIP ','
262)   1AD7 CD 94 5E    		          CALL    EXPRI	;
263)   1ADA D9          		          EXX ;l has the param	;l has the param
264)   1ADB C1          		          POP BC           	;
265)   1ADC 10 F6       		          DJNZ CC24AGN                                	;
266)   1ADE 18 35       		          JR OSWREXIT   	;
267)   1AE0 FE 1D       		CC25:     CP 29 ;Set the graphics origin.	;Set the graphics origin.
268)   1AE2 20 10       		          JR NZ,CC26	;
269)   1AE4 FD 23       		          INC IY ;SKIP ','	;SKIP ','
270)   1AE6 CD 94 5E    		          CALL    EXPRI	;
271)   1AE9 D9          		          EXX ;HL has the param X	;HL has the param X
272)   1AEA FD 23       		          INC IY ;SKIP ';'	;SKIP ';'
273)   1AEC CD 94 5E    		          CALL    EXPRI	;
274)   1AEF D9          		          EXX ;HL has the param Y	;HL has the param Y
275)   1AF0 FD 23       		          INC IY ;SKIP ';'	;SKIP ';'
277)   1AF2 18 21       		          JR OSWREXIT   	;
278)   1AF4 FE 1E       		CC26:     CP 30 ;Home the text cursor to the top left of the screen.	;Home the text cursor to the top left of the screen.
279)   1AF6 20 08       		          JR NZ,CC27	;
280)   1AF8 21 00 00    		          LD HL,0	;
281)   1AFB 22 0D 83    		          LD (CURSORX),HL	;
282)   1AFE 18 15       		          JR OSWREXIT   	;
283)   1B00 FE 1F       		CC27:     CP 31 ;Move the text cursor - identical to TAB(x,y).	;Move the text cursor - identical to TAB(x,y).
284)   1B02 20 11       		          JR NZ,OSWREXIT   	;
285)   1B04 FD 23       		          INC IY ;SKIP ','	;SKIP ','
286)   1B06 CD 94 5E    		          CALL    EXPRI	;
287)   1B09 D9          		          EXX ;l has the param X	;l has the param X
288)   1B0A FD 23       		          INC IY ;SKIP ','	;SKIP ','
289)   1B0C CD 94 5E    		          CALL    EXPRI	;
290)   1B0F D9          		          EXX ;l has the param Y	;l has the param Y
292)   1B10 18 03       		          JR OSWREXIT   	;
295)   1B12 CD 1B 1B    		PRINTIT:  CALL    EDPUT	;
296)   1B15 DD E1       		OSWREXIT: POP     IX	;
297)   1B17 E1          		          POP     HL	;
298)   1B18 D1          		          POP     DE	;
299)   1B19 F1          		          POP     AF	;
300)   1B1A C9          		          RET	;
305)   1B1B 3A 00 83    		EDPUT: LD      A,(FLAGS)	;
306)   1B1E CB 5F       		       BIT     3,A	;
307)   1B20 28 10       		       JR      Z,WRCH	;
308)   1B22 7B          		       LD      A,E	;
309)   1B23 FE 20       		       CP      ' '	;
310)   1B25 D8          		       RET     C	;
311)   1B26 2A 12 83    		       LD      HL,(EDPTR)	;
312)   1B29 73          		       LD      (HL),E	;
313)   1B2A 2C          		       INC     L	;
314)   1B2B C8          		       RET     Z	;
315)   1B2C 22 12 83    		       LD      (EDPTR),HL	;
316)   1B2F C9          		       RET           	;
319)   1B30 1E 3E       		          LD E,'>'        	;
320)   1B32 7B          		WRCH:     LD A,E	;
322)   1B33 F5          		          PUSH AF	;
323)   1B34 C5          		          PUSH BC	;
324)   1B35 D5          		          PUSH DE	;
325)   1B36 E5          		     PUSH HL	;
326)   1B37 DD E5       		     PUSH IX	;
327)   1B39 FD E5       		     PUSH IY	;
329)   1B3B F5          		          PUSH AF	;
330)   1B3C C5          		          PUSH BC	;
331)   1B3D D5          		          PUSH DE	;
332)   1B3E E5          		     PUSH HL	;
333)   1B3F CD F1 0D    		     CALL LCD_RMVCURS	;
334)   1B42 E1          		          POP HL	;
335)   1B43 D1          		          POP DE	;
336)   1B44 C1          		          POP BC	;
337)   1B45 F1          		          POP AF	;
338)   1B46 CD 73 0C    		          CALL LCD_PRINTCHAR	;
339)   1B49 CD F6 0D    		          CALL LCD_PRNCURS	;
341)   1B4C FD E1       		          POP IY	;
342)   1B4E DD E1       		          POP IX	;
343)   1B50 E1          		          POP HL	;
344)   1B51 D1          		          POP DE	;
345)   1B52 C1          		          POP BC	;
346)   1B53 F1          		          POP AF	;
347)   1B54 C9          		       RET 	;
349)   1B55 3A 00 83    		TOGGLE: LD     A,(FLAGS)	;
350)   1B58 EE 04       		       XOR     00000100B	;
351)   1B5A 32 00 83    		       LD      (FLAGS),A	;
352)   1B5D C9          		       RET	;
361)   1B5E E5          		@MYOS_OSKEY: PUSH   HL	;
362)   1B5F 21 15 83    		           LD      HL,INKEY	;
363)   1B62 7E          		           LD      A,(HL)	;
364)   1B63 36 00       		           LD      (HL),0	;
365)   1B65 E1          		           POP     HL	;
366)   1B66 B7          		           OR      A	;
367)   1B67 37          		           SCF	;
368)   1B68 C0          		           RET     NZ  	;
370)   1B69 CD 5B 1D    		           CALL    GETKEYNW	;
372)   1B6C D0          		           RET     NC	;
373)   1B6D FE 1B       		           CP      ESC	;
374)   1B6F 37          		           SCF	;
375)   1B70 C0          		           RET     NZ                        	;
376)   1B71 E5          		ESCSET:  PUSH    HL	;
377)   1B72 21 00 83    		         LD      HL,FLAGS	;
378)   1B75 CB 76       		         BIT     6,(HL)          ; ESC DISABLED?	; ESC DISABLED?
379)   1B77 20 02       		         JR      NZ,ESCDIS	;
380)   1B79 CB FE       		         SET     7,(HL)          ; SET ESCAPE FLAG	; SET ESCAPE FLAG
381)   1B7B E1          		ESCDIS:  POP     HL	;
382)   1B7C C9          		         RET 	;
383)   1B7D CD 92 05    		ESCTEST: CALL RS_RXNW	;
384)   1B80 B7          		        OR A	;
385)   1B81 C8          		        RET Z	;
386)   1B82 FE 1B       		        CP 0x1B   ; ESC 	; ESC
387)   1B84 28 EB       		        JR Z,ESCSET	;
388)   1B86 32 15 83    		        LD (INKEY),A	;
389)   1B89 C9          		         RET	;
391)   1B8A CD 7D 1B    		@MYOS_TRAP:  CALL ESCTEST	;
392)   1B8D 3A 00 83    		@MYOS_LTRAP: LD A,(FLAGS)	;
393)   1B90 B7          		            OR A	;
394)   1B91 F0          		             RET P	;
395)   1B92 21 00 83    		ABORT:        LD HL,FLAGS 	;
396)   1B95 CB BE       		            RES 7,(HL)	;
397)   1B97 C3 C2 4D    		            JP ESCAPE          	;
406)   1B9A F3          		           DI	;
407)   1B9B 21 F6 82    		           LD HL,RANDOM    ; SET RANDOM SEED TO NON 0	; SET RANDOM SEED TO NON 0
408)   1B9E 3E 06       		           LD A,0x06	;
409)   1BA0 77          		           LD (HL),A	;
410)   1BA1 3E BB       		           LD A,0xBB	;
411)   1BA3 77          		           LD (HL),A	;
412)   1BA4 21 00 00    		           LD HL,0	;
413)   1BA7 22 0D 83    		           LD (CURSORX),HL  ; CURSOR X 7 Y ZEROED            	; CURSOR X 7 Y ZEROED
414)   1BAA 11 FF FF    		           LD DE,COL_WHITE   ; SET FCOLOR AND BCOLOR DEFAULT VALUES	; SET FCOLOR AND BCOLOR DEFAULT VALUES
415)   1BAD 21 01 83    		           LD HL,FCOLOR	;
416)   1BB0 73          		           LD (HL),E	;
417)   1BB1 23          		           INC HL	;
418)   1BB2 72          		           LD (HL),D	;
419)   1BB3 23          		           INC HL	;
420)   1BB4 11 00 00    		           LD DE,COL_BLACK	;
421)   1BB7 73          		           LD (HL),E	;
422)   1BB8 23          		           INC HL	;
423)   1BB9 72          		           LD (HL),D     	;
424)   1BBA 01 04 00    		           LD BC,4     ; COPY SAME COLORS TO GRAPHICS	; COPY SAME COLORS TO GRAPHICS
425)   1BBD 11 05 83    		           LD DE,FGRCOL	;
426)   1BC0 21 01 83    		           LD HL,FCOLOR	;
427)   1BC3 ED B0       		           LDIR                                          	;
428)   1BC5 11 17 83    		           LD DE,FCOLPAL	;
429)   1BC8 CD D3 1B    		           CALL COPYPAL	;
430)   1BCB 11 37 83    		           LD DE,BCOLPAL            	;
431)   1BCE CD D3 1B    		           CALL COPYPAL	;
432)   1BD1 18 16       		           JR OSFINSH;	;
433)   1BD3 21 46 1C    		COPYPAL:   LD HL,COL_PALET   	;
434)   1BD6 01 20 00    		           LD BC,16*2         ;SHOULD ADD 8 MORE COLORS 	;SHOULD ADD 8 MORE COLORS
435)   1BD9 ED B0       		           LDIR	;
436)   1BDB AF          		           XOR A	;
437)   1BDC 32 0F 83    		           LD (SCRLN),A	;
438)   1BDF 21 00 00    		           LD HL,0	;
439)   1BE2 22 91 83    		           LD (TIMECTR),HL	;
440)   1BE5 22 93 83    		           LD (TIMECTR+2),HL            	;
441)   1BE8 C9          		           RET	;
443)   1BE9 CD 38 0E    		OSFINSH:   CALL LCD_CLRSCR	;
444)   1BEC CD 2B 4C    		           CALL    TELL	;
445)   1BEF 20 20 43 44 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1BF3 65 73 70 20 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1BF7 4D 6F 64 75 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1BFB 6C 61 72 20 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1BFF 5A 38 30 20 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1C03 43 6F 6D 70 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1C07 75 74 65 72 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1C0B 20 32 30 32 		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
445)   1C0F 30 20 20    		     DEFM "  CDesp Modular Z80 Computer 2020  "	;
446)   1C12 0A 0D       		     DEFB 0AH,0DH	;
447)   1C14 41 54 4C 41 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C18 53 20 6F 70 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C1C 65 72 61 74 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C20 69 6E 67 20 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C24 73 79 73 74 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C28 65 6D 20 76 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C2C 65 72 73 69 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C30 6F 6E 20 32 		     DEFM "ATLAS operating system version 2.03"      	;
447)   1C34 2E 30 33    		     DEFM "ATLAS operating system version 2.03"      	;
448)   1C37 0A 0D 0A 0D 		     DEFB 0AH,0DH,0AH,0DH      	;
449)   1C3B 00          		     DEFB 00H	;
450)   1C3C AF          		           XOR A	;
451)   1C3D 11 FF FF    		          LD DE,0xFFFF  ;DE = HIMEM	;DE = HIMEM
452)   1C40 5F          		          LD E,A              ;PAGE BOUNDARY	;PAGE BOUNDARY
453)   1C41 21 A2 83    		          LD HL,@USER      	;
454)   1C44 FB          		          EI     	;
455)   1C45 C9          		          RET 	;
456)   1C46 00 00       		COL_PALET: DW COL_BLACK	;
457)   1C48 00 F8       		           DW COL_RED	;
458)   1C4A C0 07       		           DW COL_GREEN	;
459)   1C4C C0 FF       		           DW COL_YELLOW	;
460)   1C4E 3F 00       		           DW COL_BLUE	;
461)   1C50 3F F8       		           DW COL_MAGENTA	;
462)   1C52 FF 07       		           DW COL_CYAN	;
463)   1C54 FF FF       		           DW COL_WHITE            	;
464)   1C56 00 00       		          DW COL_BLACK ;TODO PICK 8 MORE COLORS	;TODO PICK 8 MORE COLORS
465)   1C58 00 F8       		           DW COL_RED	;
466)   1C5A C0 07       		           DW COL_GREEN	;
467)   1C5C C0 FF       		           DW COL_YELLOW	;
468)   1C5E 3F 00       		           DW COL_BLUE	;
469)   1C60 3F F8       		           DW COL_MAGENTA	;
470)   1C62 FF 07       		           DW COL_CYAN	;
471)   1C64 FF FF       		           DW COL_WHITE            	;
477)   1C66 CD C0 1C    		     CALL    SKIPSP	;
478)   1C69 FE 0D       		  CP      CR	;
479)   1C6B C8          		  RET     Z	;
480)   1C6C FE 7C       		  CP      '|'	;
481)   1C6E C8          		  RET     Z	;
482)   1C6F FE 2E       		  CP      '.'	;
483)   1C71 CA ED 1C    		  JP      Z,DOT           ;*.	;*.
484)   1C74 EB          		  EX      DE,HL	;
485)   1C75 21 CF 1C    		  LD      HL,COMDS	;
486)   1C78 1A          		OSCLI0:  LD      A,(DE)	;
487)   1C79 CD C7 1C    		  CALL    UPPRC	;
488)   1C7C BE          		  CP      (HL)	;
489)   1C7D 28 0B       		  JR      Z,OSCLI2	;
490)   1C7F 38 2E       		  JR      C,HUH	;
491)   1C81 CB 7E       		OSCLI1:  BIT     7,(HL)	;
492)   1C83 23          		  INC     HL	;
493)   1C84 28 FB       		  JR      Z,OSCLI1	;
494)   1C86 23          		  INC     HL	;
495)   1C87 23          		  INC     HL	;
496)   1C88 18 EE       		  JR      OSCLI0	;
498)   1C8A D5          		OSCLI2:  PUSH    DE	;
499)   1C8B 13          		OSCLI3:  INC     DE	;
500)   1C8C 23          		  INC     HL	;
501)   1C8D 1A          		  LD      A,(DE)	;
502)   1C8E CD C7 1C    		  CALL    UPPRC	;
503)   1C91 FE 2E       		  CP      '.'             ;ABBREVIATED?	;ABBREVIATED?
504)   1C93 28 0A       		  JR      Z,OSCLI4	;
505)   1C95 AE          		  XOR     (HL)	;
506)   1C96 28 F3       		  JR      Z,OSCLI3	;
507)   1C98 FE 80       		  CP      80H	;
508)   1C9A 28 03       		  JR      Z,OSCLI4	;
509)   1C9C D1          		  POP     DE	;
510)   1C9D 18 E2       		  JR      OSCLI1	;
512)   1C9F F1          		OSCLI4:  POP     AF	;
513)   1CA0 13          		         INC     DE	;
514)   1CA1 CB 7E       		OSCLI5:  BIT     7,(HL)	;
515)   1CA3 23          		  INC     HL	;
516)   1CA4 28 FB       		  JR      Z,OSCLI5	;
517)   1CA6 7E          		  LD      A,(HL)	;
518)   1CA7 23          		  INC     HL	;
519)   1CA8 66          		  LD      H,(HL)	;
520)   1CA9 6F          		  LD      L,A	;
521)   1CAA E5          		  PUSH    HL	;
522)   1CAB EB          		  EX      DE,HL	;
523)   1CAC C3 C0 1C    		  JP      SKIPSP	;
525)   1CAF 3E FE       		HUH:     LD      A,254	;
526)   1CB1 CD F0 46    		         CALL    EXTERR	;
527)   1CB4 42 61 64 20 		         DEFM    'Bad command'	;
527)   1CB8 63 6F 6D 6D 		         DEFM    'Bad command'	;
527)   1CBC 61 6E 64    		         DEFM    'Bad command'	;
528)   1CBF 00          		         DEFB    0   	;
530)   1CC0 7E          		SKIPSP:  LD      A,(HL)	;
531)   1CC1 FE 20       		         CP      ' '	;
532)   1CC3 C0          		         RET     NZ	;
533)   1CC4 23          		         INC     HL	;
534)   1CC5 18 F9       		         JR      SKIPSP 	;
536)   1CC7 E6 7F       		UPPRC:   AND     7FH	;
537)   1CC9 FE 60       		  CP      '`'	;
538)   1CCB D8          		  RET     C	;
539)   1CCC E6 5F       		  AND     5FH             ;CONVERT TO UPPER CASE	;CONVERT TO UPPER CASE
540)   1CCE C9          		  RET     	;
544)   1CCF 42 59       		COMDS:DEFM   'BY'	;
545)   1CD1 C5          		  DEFB    'E'+80H	;
546)   1CD2 EE 1C       		  DEFW    BYE	;
547)   1CD4 43          		     DEFM    'C'	;
548)   1CD5 C4          		  DEFB    'D'+80H	;
549)   1CD6 F2 1C       		  DEFW    NIMP   	;
550)   1CD8 44 49       		     DEFM    'DI'	;
551)   1CDA D2          		  DEFB    'R'+80H	;
552)   1CDB F2 1C       		  DEFW    NIMP   	;
553)   1CDD 46          		     DEFM    'F'	;
554)   1CDE D8          		  DEFB    'X'+80H	;
555)   1CDF F1 1C       		  DEFW    FX   	;
556)   1CE1 50 57       		     DEFM    'PW'	;
557)   1CE3 C4          		  DEFB    'D'+80H	;
558)   1CE4 F2 1C       		  DEFW    NIMP   	;
559)   1CE6 54 59 50    		     DEFM    'TYP'	;
560)   1CE9 C5          		  DEFB    'E'+80H	;
561)   1CEA F2 1C       		  DEFW    NIMP      	;
563)   1CEC FF          		  DEFB 0FFH	;
566)   1CED C9          		DOT:  RET	;
571)   1CEE C3 00 00    		BYE:  JP 0	;
574)   1CF1 C9          		FX: RET  	;
577)   1CF2 C9          		NIMP: RET  ;NOT IMPLEMENTED YET	;NOT IMPLEMENTED YET
591)   1CF3 3E 01       		@MYOS_GETEXT: LD A,1	;
592)   1CF5 C9          		             RET 	;
594)   1CF6 C9          		@MYOS_RESET: RET	;
596)   1CF7 CD 94 5E    		@MYOS_MODE:CALL EXPRI   ;GET PARAM	;GET PARAM
597)   1CFA D9          		          EXX           ;HL HAS THE PARAM      	;HL HAS THE PARAM
598)   1CFB C3 E8 4C    		          JP XEQ	;
600)   1CFE CD F7 15    		@MYOS_CLG: CALL GRPH_SAVECOLORS	;
601)   1D01 CD 38 0E    		          CALL LCD_CLRSCR	;
602)   1D04 CD 0E 16    		          CALL GRPH_RESTORECOLORS	;
603)   1D07 C3 E8 4C    		          JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
606)   1D0A DD E5       		@MYOS_GCOL:  PUSH IX	;
607)   1D0C 3E 01       		             LD A,1	;
608)   1D0E CD FC 13    		             CALL BAS_COLOUR     	;
609)   1D11 DD E1       		             POP IX	;
610)   1D13 C3 E8 4C    		             JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
612)   1D16 DD E5       		@MYOS_COLOUR: PUSH IX	;
613)   1D18 AF          		             XOR A   	;
614)   1D19 CD FC 13    		             CALL BAS_COLOUR     	;
615)   1D1C DD E1       		             POP IX	;
616)   1D1E C3 E8 4C    		             JP XEQ           ;RETURN TO BASIC              	;RETURN TO BASIC
618)   1D21 DD E5       		@MYOS_DRAW: PUSH IX 	;
619)   1D23 CD D5 14    		           CALL BAS_DRAW	;
620)   1D26 DD E1       		           POP IX	;
621)   1D28 C3 E8 4C    		           JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
623)   1D2B DD E5       		@MYOS_MOVE:PUSH IX	;
624)   1D2D CD FE 14    		          CALL BAS_MOVE	;
625)   1D30 DD E1       		          POP IX	;
626)   1D32 C3 E8 4C    		          JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
628)   1D35 DD E5       		@MYOS_PLOT:PUSH IX	;
629)   1D37 CD 6E 15    		          CALL BAS_PLOT	;
630)   1D3A DD E1       		          POP IX	;
631)   1D3C C3 E8 4C    		          JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
633)   1D3F DD E5       		@MYOS_POINT:PUSH IX	;
634)   1D41 CD 0A 15    		          CALL BAS_POINT ;RETURNS A VALUE TO BASIC	;RETURNS A VALUE TO BASIC
635)   1D44 DD E1       		          POP IX	;
636)   1D46 C9          		          RET	;
646)   1D47 CD 91 14    		@MYOS_PUTIMS:CALL GETBASICPARAMS;            	;
647)   1D4A C3 E8 4C    		            JP XEQ	;
649)   1D4D CD F0 46    		  CALL    EXTERR	;
650)   1D50 53 6F 72 72 		  DEFM    'Sorry'	;
650)   1D54 79          		  DEFM    'Sorry'	;
651)   1D55 00          		  DEFB    0            	;
658)   1D56 CD 04 03    		GETKEY:   CALL GET_CHAR	;
659)   1D59 37          		           SCF	;
660)   1D5A C9          		        RET       	;
665)   1D5B CD 67 1D    		GETKEYNW: CALL CHKCURS	;
666)   1D5E CD E1 02    		           CALL GET_CHARNW	;
667)   1D61 3F          		           CCF	;
668)   1D62 FE 00       		           CP 0	;
669)   1D64 C8          		           RET Z	;
670)   1D65 37          		           SCF	;
671)   1D66 C9          		        RET       	;
673)   1D67 F5          		@CHKCURS:   PUSH AF	;
674)   1D68 3A 91 83    		           LD A,(TIMECTR)	;
675)   1D6B CB 67       		           BIT 4,A	;
676)   1D6D 28 11       		           JR Z,CCSHOW      ;IF SET SHOW       	;IF SET SHOW
677)   1D6F 3A 11 83    		CCHIDE:    LD A,(CURSSTAT)	;
678)   1D72 CB 4F       		           BIT 1,A	;
679)   1D74 20 19       		           JR NZ,CCEX      ;IF NOT SET ALREADY HIDDEN	;IF NOT SET ALREADY HIDDEN
680)   1D76 CB CF       		           SET 1,A	;
681)   1D78 32 11 83    		           LD (CURSSTAT),A	;
682)   1D7B CD F1 0D    		           CALL LCD_RMVCURS	;
683)   1D7E 18 0F       		           JR CCEX                                               	;
684)   1D80 3A 11 83    		CCSHOW:    LD A,(CURSSTAT)	;
685)   1D83 CB 4F       		           BIT 1,A	;
686)   1D85 28 08       		           JR Z,CCEX      ;IF SET ALREADY VISIBLE	;IF SET ALREADY VISIBLE
687)   1D87 CB 8F       		           RES 1,A	;
688)   1D89 32 11 83    		           LD (CURSSTAT),A	;
689)   1D8C CD F6 0D    		           CALL LCD_PRNCURS	;
691)   1D8F F1          		CCEX:      POP AF	;
692)   1D90 C9          		     RET          	;
703)   1D91 3A 00 83    		       LD      A,(FLAGS)	;
704)   1D94 CB 5F       		       BIT     3,A             ;EDIT MODE?	;EDIT MODE?
705)   1D96 28 09       		       JR      Z,OSLIN1	;
706)   1D98 CB 9F       		       RES     3,A	;
707)   1D9A 32 00 83    		       LD      (FLAGS),A	;
708)   1D9D 2A 12 83    		       LD      HL,(EDPTR)	;
709)   1DA0 BD          		       CP      L	;
710)   1DA1 3E 0D       		OSLIN1: LD     A,CR	;
711)   1DA3 77          		       LD      (HL),A	;
712)   1DA4 C4 7E 19    		       CALL    NZ,MYOS_OSWRCH	;
713)   1DA7 2E 00       		       LD      L,0	;
714)   1DA9 4D          		       LD      C,L             ;REPEAT FLAG	;REPEAT FLAG
715)   1DAA 28 20       		       JR      Z,OSWAIT        ;SUPPRESS UNWANTED SPACE	;SUPPRESS UNWANTED SPACE
716)   1DAC 06 00       		UPDATE: LD     B,0	;
717)   1DAE 7E          		UPD1:  LD      A,(HL)	;
718)   1DAF 04          		       INC     B	;
719)   1DB0 23          		       INC     HL	;
720)   1DB1 FE 0D       		       CP      CR	;
721)   1DB3 F5          		       PUSH    AF	;
722)   1DB4 E5          		       PUSH    HL	;
723)   1DB5 5F          		       LD      E,A	;
724)   1DB6 C4 32 1B    		       CALL    NZ,WRCH         ;FAST WRCH	;FAST WRCH
725)   1DB9 E1          		       POP     HL	;
726)   1DBA F1          		       POP     AF	;
727)   1DBB 20 F1       		       JR      NZ,UPD1	;
728)   1DBD 3E 20       		       LD      A,' '	;
729)   1DBF CD 7E 19    		       CALL    MYOS_OSWRCH	;
730)   1DC2 1E 08       		       LD      E,BS	;
731)   1DC4 E5          		UPD2:  PUSH    HL	;
732)   1DC5 CD 32 1B    		       CALL    WRCH            ;FAST WRCH	;FAST WRCH
733)   1DC8 E1          		       POP     HL	;
734)   1DC9 2B          		       DEC     HL	;
735)   1DCA 10 F8       		       DJNZ    UPD2	;
736)   1DCC 79          		OSWAIT: LD     A,C	;
737)   1DCD 05          		       DEC     B	;
738)   1DCE 28 01       		       JR      Z,LIMIT	;
739)   1DD0 B7          		       OR      A               ;REPEAT COMMAND?	;REPEAT COMMAND?
740)   1DD1 CC 71 19    		LIMIT: CALL    Z,KEYGET        ;READ KEYBOARD	;READ KEYBOARD
741)   1DD4 4F          		       LD      C,A             ;SAVE FOR REPEAT	;SAVE FOR REPEAT
742)   1DD5 11 CC 1D    		       LD      DE,OSWAIT       ;RETURN ADDRESS	;RETURN ADDRESS
743)   1DD8 D5          		       PUSH    DE	;
744)   1DD9 3A 00 83    		       LD      A,(FLAGS)	;
745)   1DDC B7          		       OR      A               ;TEST FOR ESCAPE	;TEST FOR ESCAPE
746)   1DDD 79          		       LD      A,C	;
747)   1DDE FA 20 1E    		       JP      M,OSEXIT	;
748)   1DE1 FE 0B       		       CP      11         ;CURSOR UP     (IX-11)	;CURSOR UP     (IX-11)
749)   1DE3 CA 64 1E    		       JP      Z,LEFT	;
750)   1DE6 FE 0A       		       CP      10         ;CURSOR DOWN   (IX-10)	;CURSOR DOWN   (IX-10)
751)   1DE8 CA 97 1E    		       JP      Z,RIGHT	;
752)   1DEB 06 00       		       LD      B,0	;
753)   1DED FE 05       		       CP      5          ;CLEAR LEFT    (IX-5)	;CLEAR LEFT    (IX-5)
754)   1DEF 28 72       		       JR      Z,BACK	;
755)   1DF1 FE 09       		       CP      9          ;START OF LINE (IX-9)	;START OF LINE (IX-9)
756)   1DF3 28 6F       		       JR      Z,LEFT	;
757)   1DF5 FE 07       		       CP      7          ;CLEAR RIGHT   (IX-7)	;CLEAR RIGHT   (IX-7)
758)   1DF7 28 76       		       JR      Z,DELETE	;
759)   1DF9 FE 08       		       CP      8          ;END OF LINE   (IX-8)	;END OF LINE   (IX-8)
760)   1DFB CA 97 1E    		       JP      Z,RIGHT	;
761)   1DFE 0E 00       		       LD      C,0             ;INHIBIT REPEAT	;INHIBIT REPEAT
762)   1E00 FE 10       		       CP      'P' AND 1FH	;
763)   1E02 CA 55 1B    		       JP      Z,TOGGLE	;
764)   1E05 FE 06       		       CP      6          ;DELETE LEFT   (IX-6)	;DELETE LEFT   (IX-6)
765)   1E07 28 5A       		       JR      Z,BACK	;
766)   1E09 FE 04       		       CP      4          ;CURSOR LEFT   (IX-4)	;CURSOR LEFT   (IX-4)
767)   1E0B 28 57       		       JR      Z,LEFT	;
768)   1E0D FE 02       		       CP      2          ;DELETE RIGHT  (IX-2)	;DELETE RIGHT  (IX-2)
769)   1E0F 28 5E       		       JR      Z,DELETE	;
770)   1E11 FE 01       		       CP      1          ;INSERT SPACE  (IX-1)	;INSERT SPACE  (IX-1)
771)   1E13 28 6E       		       JR      Z,INSERT	;
772)   1E15 FE 03       		       CP      3          ;CURSOR RIGHT  (IX-3)	;CURSOR RIGHT  (IX-3)
773)   1E17 28 7E       		       JR      Z,RIGHT	;
774)   1E19 FE 20       		       CP      ' '             ;PRINTING CHARACTER	;PRINTING CHARACTER
775)   1E1B 30 7F       		       JR      NC,SAVECH	;
776)   1E1D FE 0D       		       CP      CR              ;ENTER LINE	;ENTER LINE
777)   1E1F C0          		       RET     NZ	;
778)   1E20 7E          		OSEXIT: LD     A,(HL)	;
779)   1E21 CD 7E 19    		       CALL    MYOS_OSWRCH          ;WRITE REST OF LINE	;WRITE REST OF LINE
780)   1E24 23          		       INC     HL	;
781)   1E25 D6 0D       		       SUB     CR	;
782)   1E27 20 F7       		       JR      NZ,OSEXIT	;
783)   1E29 D1          		       POP     DE              ;DITCH RETURN ADDRESS	;DITCH RETURN ADDRESS
784)   1E2A B9          		       CP      C	;
785)   1E2B C2 92 1B    		       JP      NZ,ABORT        ;ESCAPE	;ESCAPE
786)   1E2E 3E 0A       		       LD      A,LF	;
787)   1E30 CD 7E 19    		       CALL    MYOS_OSWRCH	;
788)   1E33 ED 5B F4 82 		       LD      DE,(ERRLIN)	;
789)   1E37 AF          		       XOR     A	;
790)   1E38 6F          		       LD      L,A	;
791)   1E39 22 12 83    		       LD      (EDPTR),HL	;
792)   1E3C BA          		       CP      D	;
793)   1E3D C0          		       RET     NZ	;
794)   1E3E BB          		       CP      E	;
795)   1E3F C0          		       RET     NZ	;
796)   1E40 11 B0 1E    		       LD      DE,EDITST	;
797)   1E43 06 04       		       LD      B,4	;
798)   1E45 1A          		CMPARE: LD     A,(DE)	;
799)   1E46 BE          		       CP      (HL)	;
800)   1E47 3E 00       		       LD      A,0	;
801)   1E49 C0          		       RET     NZ	;
802)   1E4A 23          		       INC     HL	;
803)   1E4B 13          		       INC     DE	;
804)   1E4C 7E          		       LD      A,(HL)	;
805)   1E4D FE 2E       		       CP      '.'	;
806)   1E4F 28 02       		       JR      Z,ABBR	;
807)   1E51 10 F2       		       DJNZ    CMPARE	;
808)   1E53 AF          		ABBR:  XOR     A	;
809)   1E54 47          		       LD      B,A	;
810)   1E55 4D          		       LD      C,L	;
811)   1E56 6F          		       LD      L,A	;
812)   1E57 11 B4 1E    		       LD      DE,LISTST	;
813)   1E5A EB          		       EX      DE,HL	;
814)   1E5B ED B0       		       LDIR	;
815)   1E5D 21 00 83    		       LD      HL,FLAGS	;
816)   1E60 CB DE       		       SET     3,(HL)	;
817)   1E62 C9          		       RET	;
819)   1E63 37          		BACK:  SCF                     ;DELETE LEFT	;DELETE LEFT
820)   1E64 2C          		LEFT:  INC     L               ;CURSOR LEFT	;CURSOR LEFT
821)   1E65 2D          		       DEC     L	;
822)   1E66 28 45       		       JR      Z,STOP	;
823)   1E68 3E 08       		       LD      A,BS	;
824)   1E6A CD 7E 19    		       CALL    MYOS_OSWRCH	;
825)   1E6D 2D          		       DEC     L	;
826)   1E6E D0          		       RET     NC	;
827)   1E6F 7E          		DELETE: LD     A,(HL)          ;DELETE RIGHT	;DELETE RIGHT
828)   1E70 FE 0D       		       CP      CR	;
829)   1E72 28 39       		       JR      Z,STOP	;
830)   1E74 54          		       LD      D,H	;
831)   1E75 5D          		       LD      E,L	;
832)   1E76 13          		DEL1:  INC     DE	;
833)   1E77 1A          		       LD      A,(DE)	;
834)   1E78 1B          		       DEC     DE	;
835)   1E79 12          		       LD      (DE),A	;
836)   1E7A 13          		       INC     DE	;
837)   1E7B FE 0D       		       CP      CR	;
838)   1E7D 20 F7       		       JR      NZ,DEL1	;
839)   1E7F D1          		DEL2:  POP     DE              ;DITCH	;DITCH
840)   1E80 C3 AC 1D    		       JP      UPDATE	;
842)   1E83 3E 0D       		INSERT: LD     A,CR            ;INSERT SPACE	;INSERT SPACE
843)   1E85 BE          		       CP      (HL)	;
844)   1E86 C8          		       RET     Z	;
845)   1E87 54          		       LD      D,H	;
846)   1E88 1E FE       		       LD      E,254	;
847)   1E8A 13          		INS1:  INC     DE	;
848)   1E8B 12          		       LD      (DE),A	;
849)   1E8C 1B          		       DEC     DE	;
850)   1E8D 7B          		       LD      A,E	;
851)   1E8E BD          		       CP      L	;
852)   1E8F 1B          		       DEC     DE	;
853)   1E90 1A          		       LD      A,(DE)	;
854)   1E91 20 F7       		       JR      NZ,INS1	;
855)   1E93 36 20       		       LD      (HL),' '	;
856)   1E95 18 E8       		       JR      DEL2	;
858)   1E97 7E          		RIGHT: LD      A,(HL)          ;CURSOR RIGHT	;CURSOR RIGHT
859)   1E98 FE 0D       		       CP      CR	;
860)   1E9A 28 11       		       JR      Z,STOP	;
861)   1E9C 56          		SAVECH: LD     D,(HL)          ;PRINTING CHARACTER	;PRINTING CHARACTER
862)   1E9D 77          		       LD      (HL),A	;
863)   1E9E 2C          		       INC     L	;
864)   1E9F 28 09       		       JR      Z,WONTGO        ;LINE TOO LONG	;LINE TOO LONG
865)   1EA1 CD 7E 19    		       CALL    MYOS_OSWRCH	;
866)   1EA4 3E 0D       		       LD      A,CR	;
867)   1EA6 BA          		       CP      D	;
868)   1EA7 C0          		       RET     NZ	;
869)   1EA8 77          		       LD      (HL),A	;
870)   1EA9 C9          		       RET	;
872)   1EAA 2D          		WONTGO: DEC    L	;
873)   1EAB 36 0D       		       LD      (HL),CR	;
876)   1EAD 0E 00       		STOP:  LD      C,0             ;STOP REPEAT	;STOP REPEAT
877)   1EAF C9          		       RET	;
880)   1EB0 45 44 49 54 		EDITST: DEFM   'EDIT'	;
881)   1EB4 4C 49 53 54 		LISTST: DEFM   'LIST'	;
  9)   8300 00          		   @FLAGS   DEFS 1  ; Flags: B7=ESC PRESSED, B6=ESC DISABLED	; Flags: B7=ESC PRESSED, B6=ESC DISABLED
 10)   8301 00 00       		   @FCOLOR   DEFS 2 ;FOREGROUND COLOR FOR TEXT	;FOREGROUND COLOR FOR TEXT
 11)   8303 00 00       		   @BCOLOR   DEFS 2 ;BACKGROUND COLOR FOR TEXT	;BACKGROUND COLOR FOR TEXT
 12)   8305 00 00       		   @FGRCOL   DEFS 2 ;FOREGROUND COLOR FOR GRAPHICS	;FOREGROUND COLOR FOR GRAPHICS
 13)   8307 00 00       		   @BGRCOL   DEFS 2 ;BACKGROUND COLOR FOR GRAPHICS 	;BACKGROUND COLOR FOR GRAPHICS
 14)   8309 00 00       		   @FCOLTM   DEFS 2 ;TEMP FOREGROUND COLOR 	;TEMP FOREGROUND COLOR
 15)   830B 00 00       		   @BCOLTM   DEFS 2 ;TEMP BACKGROUND COLOR 	;TEMP BACKGROUND COLOR
 16)   830D 00          		   @CURSORX  DEFS 1    ;0-79	;0-79
 17)   830E 00          		   @CURSORY  DEFS 1    ;0-47	;0-47
 18)   830F 00          		   @SCRLN    DEFS 1    ;0-47 SCROLL LINES	;0-47 SCROLL LINES
 19)   8310 00          		   @LASTCHAR DEFS 1; 	;
 20)   8311 00          		   @CURSSTAT DEFS 1;  ;IF BIT 0 SET THEN SHOW ELSE HIDE, IF BIT 1 SET THEN VISIBLE ELSE HIDDEN	;  ;IF BIT 0 SET THEN SHOW ELSE HIDE, IF BIT 1 SET THEN VISIBLE ELSE HIDDEN
 21)   8312 00 00       		   @EDPTR    DEFS 2	;
 22)   8314 00          		   @OPTVAL   DEFS 1	;
 23)   8315 00          		   @INKEY    DEFS 1	;
 24)   8316 00          		   @VDUMODE  DEFS 1    ;VDU 4 TEXT PRINT 5 GRAPH PRINT	;VDU 4 TEXT PRINT 5 GRAPH PRINT
 25)   8317 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   831B 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   831F 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   8323 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   8327 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   832B 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   832F 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 25)   8333 00 00 00 00 		   @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 26)   8337 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   833B 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   833F 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   8343 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   8347 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   834B 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   834F 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 26)   8353 00 00 00 00 		   @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 27)   8357 00 00       		   @GR_LASTX3 DEFS 2	;
 28)   8359 00 00       		   @GR_LASTY3 DEFS 2	;
 29)   835B 00 00       		   @GR_LASTX2 DEFS 2	;
 30)   835D 00 00       		   @GR_LASTY2 DEFS 2    	;
 31)   835F 00 00       		   @GR_LASTX DEFS 2	;
 32)   8361 00 00       		   @GR_LASTY DEFS 2	;
 33)   8363 00 00       		   @GR_PARAM1 DEFS 2	;
 34)   8365 00 00       		   @GR_PARAM2 DEFS 2	;
 35)   8367 00 00       		   @GR_PARAM3 DEFS 2	;
 36)   8369 00 00       		   @GR_PARAM4 DEFS 2	;
 38)   836B 00 00       		   @FILL_X   DEFS 2	;
 39)   836D 00 00       		   @FILL_Y   DEFS 2 	;
 40)   836F 00 00       		   @FILL_L   DEFS 2	;
 41)   8371 00 00       		   @FILL_X1  DEFS 2	;
 42)   8373 00 00       		   @FILL_X2  DEFS 2	;
 43)   8375 00 00       		   @FILL_DY  DEFS 2	;
 44)   8377 00 00       		   @FILL_Q   DEFS 2  ;START OF QUEUE	;START OF QUEUE
 45)   8379 00 00       		   @FILL_IDX DEFS 2  ;INDEX OF QUEUE	;INDEX OF QUEUE
 46)   837B 00 00       		   @FILL_PY  DEFS 2  ;FOR PUSH/POP	;FOR PUSH/POP
 47)   837D 00 00       		   @FILL_PXL DEFS 2	;
 48)   837F 00 00       		   @FILL_PXR DEFS 2	;
 49)   8381 00 00       		   @FILL_PDY DEFS 2    	;
 50)   8383 00 00       		   @FILL_OV  DEFS 2  ;OLD COLOR	;OLD COLOR
 51)   8385 00 00       		   @FILL_OLDSP DEFS 2; OLD SP	; OLD SP
 55)   8387 00          		   @FFSTAT   DEFS 1  ;FOR OUTPUT FLIP FLOPS DEVEPR, DEVKBD	;FOR OUTPUT FLIP FLOPS DEVEPR, DEVKBD
 56)   8388 00          		  @KEYCTR   DEFS 1  ;FOR USB KEYBOARD 	;FOR USB KEYBOARD
 57)   8389 00          		  @SERERR  DEFS 1;	;
 58)   838A 00          		  @SERER2  DEFS 1  ;AT RAM ADDRESS	;AT RAM ADDRESS
 59)   838B 00          		  @DISPCT   DEFS 1  ;	;
 60)   838C 00          		  @LCDCX    DEFS 1  ;DB 0  ;DISPLAY X POS (0..F  FOR 1..16)	;DB 0  ;DISPLAY X POS (0..F  FOR 1..16)
 61)   838D 00          		  @LCDCY    DEFS 1  ;DB 0  ;DISPLAY Y POS (0 OR 1 FOR LINE 1 AND 2)	;DB 0  ;DISPLAY Y POS (0 OR 1 FOR LINE 1 AND 2)
 62)   838E 00 00       		  @PRGEX   DEFS 2  ;2 BYTES	;2 BYTES
 63)   8390 00          		  @TVSTAT   DEFS 1  ;1 BYTE	;1 BYTE
 64)   8391 00 00 00 00 		  @TIMECTR  DEFS 4	;
 65)   8395 00 00 00 00 		   @MYNUM   DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 65)   8399 00 00 00 00 		   @MYNUM   DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 65)   839D 00 00 00 00 		   @MYNUM   DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 65)   83A1 00          		   @MYNUM   DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
