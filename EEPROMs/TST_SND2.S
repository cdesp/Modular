INCLUDE MYOS_2_0000_HARD.SYM

ORG $C000

	

		
		
		CALL TESTSND2
		;CALL MYDELAY
		;CALL PLAYSONG2
		CALL SND_MUTEALL
		JP 4
;Em = E,G,B

;GGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGGGGEmEm CDGG
SONG	
	DW	$0101 ;SET VOLUME
	DW 	nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
        DW	$0000 ;SET VOLUME
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	$0202 ;SET VOLUME
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nG4,nG4,nE4,nE4
	DW	nC4,nD4,nG4,nG4,nEND
	DW	$0000
		
		DEFCHN EQU 1
                @SNDVOLHI EQU 0
                @SNDVOLM1 EQU 1
                @SNDVOLM2 EQU 2
                @SNDVOLLO EQU 3
                @SNDMUTE EQU 4


DOBEEP:         LD A,DEFCHN
                LD C,SNDVOLHI
                CALL SND_SETVOLUME 
		;LD A,$91	;FULL VOLUME
		;CALL SND_OUT
               
                LD A,DEFCHN
                CALL SND_NOTE
                LD B,160
		CALL DELAYMILI
                LD A,DEFCHN
                LD C,SNDMUTE
                CALL SND_SETVOLUME
                RET

BEEP:            LD HL,nC6             ;NOTE C6 ON CHANNEL2
                CALL DOBEEP
                RET


TESTSND2:	CALL BEEP
		RET


cntr		DB 0

MYDELAY:  	PUSH AF
		LD B,250
		CALL DELAYMILI
		POP AF
		RET

PLAYSONG2:	LD A,$91	;FULL VOLUME
		CALL SND_OUT
		LD A,0		
		CALL SND_ENABLE
		CALL MYDELAY
		LD HL,SONG
		LD (CHANDATA),HL
		XOR A
		LD (CHANCN),A
		LD (CNTR),A
PLNXTNOTE:	CALL MYDELAY
		LD A,(CNTR)
		INC A
		LD (CNTR),A	
		CP 10
		JR NZ,PN2NXT				
		LD A,0		
		CALL SND_DISABLE		
PN2NXT:		CP 20
		JR NZ,P2NXT2
		LD A,0		
		CALL SND_ENABLE		
P2NXT2:		CALL SND_PLAYMUSIC		
		JR NZ,PLNXTNOTE		
		CALL SND_MUTEALL
		RET
		
		


PLAYSONG:	LD DE,SONG		
NXTNT:		LD A,(DE)
		LD L,A
		INC DE
		LD A,(DE)
		LD H,A
		INC DE
		OR A
		RET Z
		XOR A
		PUSH DE
		CALL SND_NOTE
		CALL MYDELAY
		POP DE
		JR NXTNT


TESTSND: 	LD A,$91	;FULL VOLUME
		CALL SND_OUT
		XOR A		;CHANNEL 0
	 	LD HL,$842A	;C4 NOTE
	 	CALL SND_NOTE   ;PLAY NOTE
		CALL MYDELAY
	 	LD HL,$840A	;D4 NOTE
	 	CALL SND_NOTE   ;PLAY NOTE
		CALL MYDELAY
		LD HL,$842A	;C4 NOTE
	 	CALL SND_NOTE   ;PLAY NOTE
		CALL MYDELAY
		RET