ORG $8000

INCLUDE ..\MYOS_2_0000.SYM


;TRANSFER MES2 TO PAGE 5
	LD HL,MES2
	LD DE,$A000
	LD BC,14
	LDIR
;TRANSFER MES3 TO PAGE 6
	LD HL,MES3
	LD DE,$C000
	LD BC,14
	LDIR	
AGN:	LD HL, MES1
	CALL RS_TXT
STRT:	CALL GET_CHAR
	CP '1'
	CALL Z, PG1
	CP '2'
	CALL Z, PG2
	CP '3'
	CALL Z, PG3
	CP '4'
	CALL Z, PG4
	CP 'P'
	CALL Z, PMSG
	CP  'M'
	JP Z,4
	JP AGN

MES1: DEFM "1 FOR PG1, 2 FOR PG2, P PRINT MESG, M FOR MENU"
	DB 13,10,0

MES2: DEFM "I AM PAGE 5"
	DB 13,10,0

MES3: DEFM "I AM PAGE 6"
	DB 13,10,0

MES4: DEFM "SAME THING"
	DB 13,10,0




;PRINT MESSAGE FROM PAGE5
PMSG:	LD HL,$A000
	CALL RS_TXT
	RET


;PUT PAGE 5 TO BANK 5
PG1:	LD A,5
	LD B,5.SHL.5
	LD C,0
	OUT (C),A
	RET

;PUT PAGE 6 TO BANK 5
PG2:	LD A,6
	LD B,5.SHL.5
	LD C,0
	OUT (C),A
	RET

;PUT PAGE 5 TO BANK 5
PG3:	LD A,5
	LD B,5
	CALL PUTPGINBANK2
	RET

;PUT PAGE 6 TO BANK 5
PG4:	LD A,6
	LD B,5
	CALL PUTPGINBANK2
	RET


PUTPGINBANK2:	LD C, A 							;SAVE PAGE
		LD A, B                                                         ;BANK IN A
		CP 2
		RET C 								;BANK 0,1 WILL NEVER CHANGE
		CP 7
		RET Z 								;BANK 7 WILL NEVER CHANGE
		LD HL, BANKS
		LD D, 0
		LD E, A
		ADD HL, DE
		LD A, C 							;RESTORE PAGE
		LD (HL), A 							;SAVE PG IN BANK B MEMORY
		LD C, DEVMMU
		SLA B 								;SHIFT BANK TO A15..A13 FROM A2..A0 WE USE THESE PINS ON THE CPLD FOR BANK INPUT
		SLA B
		SLA B
		SLA B
		SLA B 								;SET TO A15,A14,A13
		OUT (C), A
		LD HL,MES4
		CALL RS_TXT
		RET



