  5)   0000 00          			NOP	;
  6)   0001 C3 00 02    			JP START	;
  7)   0004 C3 83 02    			JP MENU	;
  9)   0007 00 00 00 00 			DEFS $31	;
  9)   000B 00 00 00 00 			DEFS $31	;
  9)   000F 00 00 00 00 			DEFS $31	;
  9)   0013 00 00 00 00 			DEFS $31	;
  9)   0017 00 00 00 00 			DEFS $31	;
  9)   001B 00 00 00 00 			DEFS $31	;
  9)   001F 00 00 00 00 			DEFS $31	;
  9)   0023 00 00 00 00 			DEFS $31	;
  9)   0027 00 00 00 00 			DEFS $31	;
  9)   002B 00 00 00 00 			DEFS $31	;
  9)   002F 00 00 00 00 			DEFS $31	;
  9)   0033 00 00 00 00 			DEFS $31	;
  9)   0037 00          			DEFS $31	;
 12)   0038 C3 00 A0    			JP $A000 ;TEMP I.S.	;TEMP I.S.
 14)   003B 00 00 00 00 			ALIGN 256	;
 14)   003F 00 00 00 00 			ALIGN 256	;
 14)   0043 00 00 00 00 			ALIGN 256	;
 14)   0047 00 00 00 00 			ALIGN 256	;
 14)   004B 00 00 00 00 			ALIGN 256	;
 14)   004F 00 00 00 00 			ALIGN 256	;
 14)   0053 00 00 00 00 			ALIGN 256	;
 14)   0057 00 00 00 00 			ALIGN 256	;
 14)   005B 00 00 00 00 			ALIGN 256	;
 14)   005F 00 00 00 00 			ALIGN 256	;
 14)   0063 00 00 00 00 			ALIGN 256	;
 14)   0067 00 00 00 00 			ALIGN 256	;
 14)   006B 00 00 00 00 			ALIGN 256	;
 14)   006F 00 00 00 00 			ALIGN 256	;
 14)   0073 00 00 00 00 			ALIGN 256	;
 14)   0077 00 00 00 00 			ALIGN 256	;
 14)   007B 00 00 00 00 			ALIGN 256	;
 14)   007F 00 00 00 00 			ALIGN 256	;
 14)   0083 00 00 00 00 			ALIGN 256	;
 14)   0087 00 00 00 00 			ALIGN 256	;
 14)   008B 00 00 00 00 			ALIGN 256	;
 14)   008F 00 00 00 00 			ALIGN 256	;
 14)   0093 00 00 00 00 			ALIGN 256	;
 14)   0097 00 00 00 00 			ALIGN 256	;
 14)   009B 00 00 00 00 			ALIGN 256	;
 14)   009F 00 00 00 00 			ALIGN 256	;
 14)   00A3 00 00 00 00 			ALIGN 256	;
 14)   00A7 00 00 00 00 			ALIGN 256	;
 14)   00AB 00 00 00 00 			ALIGN 256	;
 14)   00AF 00 00 00 00 			ALIGN 256	;
 14)   00B3 00 00 00 00 			ALIGN 256	;
 14)   00B7 00 00 00 00 			ALIGN 256	;
 14)   00BB 00 00 00 00 			ALIGN 256	;
 14)   00BF 00 00 00 00 			ALIGN 256	;
 14)   00C3 00 00 00 00 			ALIGN 256	;
 14)   00C7 00 00 00 00 			ALIGN 256	;
 14)   00CB 00 00 00 00 			ALIGN 256	;
 14)   00CF 00 00 00 00 			ALIGN 256	;
 14)   00D3 00 00 00 00 			ALIGN 256	;
 14)   00D7 00 00 00 00 			ALIGN 256	;
 14)   00DB 00 00 00 00 			ALIGN 256	;
 14)   00DF 00 00 00 00 			ALIGN 256	;
 14)   00E3 00 00 00 00 			ALIGN 256	;
 14)   00E7 00 00 00 00 			ALIGN 256	;
 14)   00EB 00 00 00 00 			ALIGN 256	;
 14)   00EF 00 00 00 00 			ALIGN 256	;
 14)   00F3 00 00 00 00 			ALIGN 256	;
 14)   00F7 00 00 00 00 			ALIGN 256	;
 14)   00FB 00 00 00 00 			ALIGN 256	;
 14)   00FF 00          			ALIGN 256	;
 17)   0100 C3 39 05    		      JP MYOS_CLRSCN	;
 18)   0103 C3 3C 05    		      JP MYOS_PUTIME	;
 19)   0106 C3 3D 05    		      JP MYOS_GETIME	;
 20)   0109 C3 44 05    		      JP MYOS_PUTCSR	;
 21)   010C C3 56 05    		      JP MYOS_GETCSR	;
 22)   010F C3 65 05    		      JP MYOS_OSRDCH	;
 23)   0112 C3 93 05    		      JP MYOS_PROMPT	;
 24)   0115 C3 70 05    		      JP MYOS_OSWRCH	;
 25)   0118 C3 BB 05    		      JP MYOS_OSKEY	;
 26)   011B C3 F7 05    		      JP MYOS_OSINIT	;
 27)   011E C3 47 07    		      JP MYOS_OSLINE	;
 28)   0121 C3 69 06    		      JP MYOS_OSCLI	;
 29)   0124 C3 2B 07    		      JP MYOS_OSBPUT 	;
 30)   0127 C3 2B 07    		      JP MYOS_OSBGET 	;
 31)   012A C3 2B 07    		      JP MYOS_OSSTAT 	;
 32)   012D C3 2B 07    		      JP MYOS_OSSHUT 	;
 33)   0130 C3 2B 07    		      JP MYOS_OSOPEN 	;
 34)   0133 C3 2B 07    		      JP MYOS_OSCALL 	;
 35)   0136 C3 DC 06    		      JP MYOS_OSSAVE 	;
 36)   0139 C3 FF 06    		      JP MYOS_OSLOAD 	;
 37)   013C C3 2B 07    		      JP MYOS_GETPTR 	;
 38)   013F C3 2B 07    		      JP MYOS_PUTPTR 	;
 39)   0142 C3 2B 07    		      JP MYOS_GETEXT 	;
 40)   0145 C3 2B 07    		      JP MYOS_RESET 	;
 41)   0148 C3 E7 05    		      JP MYOS_TRAP	;
 42)   014B C3 EA 05    		      JP MYOS_LTRAP  	;
 43)   014E C3 2C 07    		      JP MYOS_CLG	;
 44)   0151 C3 32 07    		      JP MYOS_COLOUR	;
 45)   0154 C3 38 07    		      JP MYOS_DRAW	;
 46)   0157 C3 38 07    		      JP MYOS_ENVEL	;
 47)   015A C3 38 07    		      JP MYOS_GCOL	;
 48)   015D C3 38 07    		      JP MYOS_MODE	;
 49)   0160 C3 38 07    		      JP MYOS_MOVE	;
 50)   0163 C3 38 07    		      JP MYOS_PLOT	;
 51)   0166 C3 38 07    		      JP MYOS_SOUND	;
 52)   0169 C3 38 07    		      JP MYOS_ADVAL	;
 53)   016C C3 38 07    		      JP MYOS_POINT	;
 54)   016F C3 38 07    		      JP MYOS_GETIMS	;
 55)   0172 C3 38 07    		      JP MYOS_PUTIMS    	;
 57)   0175 00 00 00 00 		 	ALIGN 256     	;
 57)   0179 00 00 00 00 		 	ALIGN 256     	;
 57)   017D 00 00 00 00 		 	ALIGN 256     	;
 57)   0181 00 00 00 00 		 	ALIGN 256     	;
 57)   0185 00 00 00 00 		 	ALIGN 256     	;
 57)   0189 00 00 00 00 		 	ALIGN 256     	;
 57)   018D 00 00 00 00 		 	ALIGN 256     	;
 57)   0191 00 00 00 00 		 	ALIGN 256     	;
 57)   0195 00 00 00 00 		 	ALIGN 256     	;
 57)   0199 00 00 00 00 		 	ALIGN 256     	;
 57)   019D 00 00 00 00 		 	ALIGN 256     	;
 57)   01A1 00 00 00 00 		 	ALIGN 256     	;
 57)   01A5 00 00 00 00 		 	ALIGN 256     	;
 57)   01A9 00 00 00 00 		 	ALIGN 256     	;
 57)   01AD 00 00 00 00 		 	ALIGN 256     	;
 57)   01B1 00 00 00 00 		 	ALIGN 256     	;
 57)   01B5 00 00 00 00 		 	ALIGN 256     	;
 57)   01B9 00 00 00 00 		 	ALIGN 256     	;
 57)   01BD 00 00 00 00 		 	ALIGN 256     	;
 57)   01C1 00 00 00 00 		 	ALIGN 256     	;
 57)   01C5 00 00 00 00 		 	ALIGN 256     	;
 57)   01C9 00 00 00 00 		 	ALIGN 256     	;
 57)   01CD 00 00 00 00 		 	ALIGN 256     	;
 57)   01D1 00 00 00 00 		 	ALIGN 256     	;
 57)   01D5 00 00 00 00 		 	ALIGN 256     	;
 57)   01D9 00 00 00 00 		 	ALIGN 256     	;
 57)   01DD 00 00 00 00 		 	ALIGN 256     	;
 57)   01E1 00 00 00 00 		 	ALIGN 256     	;
 57)   01E5 00 00 00 00 		 	ALIGN 256     	;
 57)   01E9 00 00 00 00 		 	ALIGN 256     	;
 57)   01ED 00 00 00 00 		 	ALIGN 256     	;
 57)   01F1 00 00 00 00 		 	ALIGN 256     	;
 57)   01F5 00 00 00 00 		 	ALIGN 256     	;
 57)   01F9 00 00 00 00 		 	ALIGN 256     	;
 57)   01FD 00 00 00    		 	ALIGN 256     	;
 47)   0200 F3          		@START:	DI	;
 48)   0201 21 00 A0    		  LD HL,$A000 ;TEMPORARY INTERRUPT SERVICE IN RAM	;TEMPORARY INTERRUPT SERVICE IN RAM
 49)   0204 3E ED       		  LD A,$ED ;RETI	;RETI
 50)   0206 77          		  LD (HL),A	;
 51)   0207 23          		  INC HL	;
 52)   0208 3E 4D       		  LD A,$4D ;RETI	;RETI
 53)   020A 77          		  LD (HL),A	;
 63)   020B 06 05       		CN1:	LD B,5	;
 64)   020D 0E 00       		AGN1:	LD C,0	;
 65)   020F 3E 00       			LD A,0	;
 66)   0211 ED 79       			OUT (C),A	;
 67)   0213 0E 00       			LD C,0	;
 68)   0215 3E FF       			LD A,255	;
 69)   0217 ED 79       			OUT (C),A	;
 70)   0219 10 F2       			DJNZ AGN1	;
 75)   021B 11 01 00    			LD DE,1	;
 76)   021E 3E 00       			LD A,0		;WRITE 0	;WRITE 0
 77)   0220 4F          			LD C,A	;
 78)   0221 21 00 80    			LD HL,RAMAD		;
 79)   0224 06 08       			LD B,8	;
 80)   0226 77          		AGN2:	LD (HL),A	;
 81)   0227 4E          			LD C,(HL)	;
 82)   0228 B9          			CP C	;
 83)   0229 C2 43 02    			JP NZ, ERR	;
 84)   022C 19          			ADD HL,DE	;
 85)   022D C6 20       			ADD A,32	;WRITE +32	;WRITE +32
 86)   022F 4F          			LD C,A	;
 87)   0230 10 F4       			DJNZ AGN2	;
 89)   0232 06 05       			LD B,5	;
 90)   0234 0E 08       		AGN3:	LD C,00001000B  ;LLH ON 138 Y1 OUT	;LLH ON 138 Y1 OUT
 91)   0236 3E 40       			LD A,64	;
 92)   0238 ED 79       			OUT (C),A	;
 93)   023A C6 80       			ADD A,128	;
 94)   023C ED 79       			OUT (C),A		;
 95)   023E 10 F4       			DJNZ AGN3  	; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8	; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8
 96)   0240 C3 4C 02    			JP BOOT	;
 99)   0243 0E 38       		ERR:	LD C,00111000B  ;HHH ON 138 Y7 OUT	;HHH ON 138 Y7 OUT
100)   0245 3E 40       			LD A,64	;
101)   0247 ED 79       			OUT (C),A	;
103)   0249 C3 43 02    			JP ERR 	;DO AGAIN PORT 1	;DO AGAIN PORT 1
105)   024C F3          		@BOOT:	DI	;
106)   024D ED 56       		  IM 1 	;
107)   024F 31 F0 FF    			LD SP,STACKP		;
110)   0252 CD 6E 08    			CALL RS_INI	;RS232 INITIALIZE	;RS232 INITIALIZE
111)   0255 21 FF 04    			LD HL,STR00	;
112)   0258 CD 96 08    			CALL RS_TXT	;
120)   025B CD 11 09    		  CALL LCD_INIT	;
121)   025E 21 3F 00    		  LD HL,COL_BLUE	;
122)   0261 22 03 83    		  LD (BCOLOR),HL	;
123)   0264 21 C0 FF    		  LD HL,COL_YELLOW	;
124)   0267 22 01 83    		  LD (FCOLOR),HL	;
125)   026A 21 EC 04    		  LD HL,STRSCR		;
126)   026D CD 96 08    		  CALL RS_TXT	;
127)   0270 CD 8E 0E    		  CALL LCD_CLRSCR  	;
128)   0273 3E 01       		  LD A,1	;
129)   0275 32 05 83    		  LD (CURSORX),A	;
130)   0278 3E 16       		  LD A,22	;
131)   027A 32 06 83    		  LD (CURSORY),A  	;
132)   027D 21 40 04    			LD HL,STR0   ;LCD INIT MSG	;LCD INIT MSG
133)   0280 CD B2 0E    			CALL LCD_MSG	;
141)   0283 21 B5 04    			LD HL,STRMN	;
142)   0286 CD 96 08    			CALL RS_TXT	;OUTPUT MENU COMMANDS AT RS232		;OUTPUT MENU COMMANDS AT RS232
143)   0289 21 15 05    			LD HL,STR01	;
144)   028C CD 96 08    			CALL RS_TXT	;OUTPUT WAITING AT RS232	;OUTPUT WAITING AT RS232
151)   028F 21 0B 04    			LD HL,SMENU	;
152)   0292 3E 05       		  LD A,5	;
153)   0294 32 05 83    		  LD (CURSORX),A	;
154)   0297 3E 02       		  LD A,2	;
155)   0299 32 06 83    		  LD (CURSORY),A  	;
156)   029C CD B2 0E    			CALL LCD_MSG	;
158)   029F CD DC 02    			CALL GET_CHAR	;TAKE A CHAR FROM RS232 OR PS2 KEYB	;TAKE A CHAR FROM RS232 OR PS2 KEYB
161)   02A2 FE 55       			CP 'U'		;UPLOAD PROGRAM	;UPLOAD PROGRAM
162)   02A4 CC 24 03    			CALL Z, UPLOD	;
163)   02A7 FE 58       			CP 'X'	;
164)   02A9 CA 07 03    			JP Z,EXEC	;
165)   02AC FE 54       			CP 'T'	;
166)   02AE CC BC 03    			CALL Z,RSTST	;
167)   02B1 FE 53       			CP 'S'	;
168)   02B3 CC EE 03    			CALL Z,TXTSCR	;
169)   02B6 FE 49       			CP 'I'	;
170)   02B8 CC 73 03    			CALL Z,UPLOD2	;
171)   02BB FE 59       			CP 'Y'	;
172)   02BD CC D2 03    			CALL Z,RSTST2	;
173)   02C0 FE 48       			CP 'H'	;
174)   02C2 CC E1 03    			CALL Z,XMTST	;
175)   02C5 FE 4A       			CP 'J'	;
176)   02C7 CC A1 03    			CALL Z,DNLOD	;
179)   02CA FE 43       			CP 'C'	;
180)   02CC CC 8E 0E    			CALL Z,LCD_CLRSCR	;
181)   02CF FE 4C       			CP 'L'	;
182)   02D1 CC 30 0F    			CALL Z,LCD_TEST	;
183)   02D4 FE 42       			CP 'B'	;
184)   02D6 CA 00 40    			JP Z,BBCBASIC	;
186)   02D9 C3 83 02    			JP MENU	;
190)   02DC AF          		@GET_CHAR:	XOR A	;
193)   02DD CD C4 08    			CALL RS_KEYRD	;CHAR IN RS232?	;CHAR IN RS232?
194)   02E0 28 04       			JR Z,GT_TST2	;
195)   02E2 CD A0 08    			CALL RS_RX	; GET THAT CHAR	; GET THAT CHAR
196)   02E5 C9          			RET	;
199)   02E6 18 F4       		  JR GET_CHAR ; SHOULD BE REMOVED WHEN USB KEUB WORKS OK	; SHOULD BE REMOVED WHEN USB KEUB WORKS OK
200)   02E8 CD 79 11    		  CALL PS2ISK  	;A=0 IF WE HAVE A KEY ELSE 1	;A=0 IF WE HAVE A KEY ELSE 1
201)   02EB FE 01       			CP 1	;
202)   02ED 28 ED       			JR Z,GET_CHAR	;RECHECK	;RECHECK
203)   02EF CD 72 11    			CALL READCHAR	;GET THE KEY FROM USB KEYBOARD	;GET THE KEY FROM USB KEYBOARD
204)   02F2 FE 00       			CP 0	;
205)   02F4 CA DC 02    			JP Z GET_CHAR	;
208)   02F7 F5          			PUSH AF	;
209)   02F8 CD 87 08    			CALL RS_TX	;
210)   02FB 3E 0A       			LD A,10	;
211)   02FD CD 87 08    			CALL RS_TX	;
212)   0300 3E 0D       			LD A,13	;
213)   0302 CD 87 08    			CALL RS_TX	;
214)   0305 F1          			POP AF	;
215)   0306 C9          			RET	;
218)   0307 CD 03 10    		EXEC:	CALL LCDCLS	;
219)   030A CD 4D 10    			CALL LCDLN2	;
220)   030D 21 91 04    			LD HL,SPRGX	;
221)   0310 CD F3 0F    			CALL LCDTXT		;
222)   0313 CD 45 10    			CALL LCDLN1	;
224)   0316 3E 05       			LD A,5	;
225)   0318 CD CE 12    			CALL SCPRN				;
227)   031B 11 55 83    			LD DE,PRGEX	;
228)   031E 1A          			LD A,(DE)	;
229)   031F 6F          			LD L,A	;
230)   0320 13          			INC DE	;
231)   0321 1A          			LD A,(DE)	;
232)   0322 67          			LD H,A	;
233)   0323 E9          			JP (HL)	;
235)   0324 F3          		UPLOD: DI		;
236)   0325 21 84 04    			LD HL,DATST	;
237)   0328 CD 4D 10    			CALL LCDLN2	;
238)   032B CD F3 0F    			CALL LCDTXT	;
240)   032E CD A0 08    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
241)   0331 6F          			LD L,A	;
242)   0332 CD A0 08    			CALL RS_RX	;
243)   0335 67          			LD H,A	;
244)   0336 CD A0 08    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
245)   0339 4F          			LD C,A	;
246)   033A CD A0 08    			CALL RS_RX	;
247)   033D 47          			LD B,A	;
249)   033E 11 55 83    			LD DE,PRGEX 	;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
250)   0341 7D          			LD A,L	;
251)   0342 12          			LD (DE),A	;
252)   0343 13          			INC DE	;
253)   0344 7C          			LD A,H	;
254)   0345 12          			LD (DE),A	;
256)   0346 FE 80       			CP $80	;
257)   0348 30 02       			JR NC,ROMWR  ;NC ROM IN 0-8000 C ROM IN 8000-FFFF	;NC ROM IN 0-8000 C ROM IN 8000-FFFF
258)   034A 18 04       			JR NORWR	;
260)   034C 3E 01       		ROMWR	LD A,1	;
261)   034E D3 08       		      OUT (DEVEPR),A 	;SET ROM WRITABLE = '0'	;SET ROM WRITABLE = '0'
266)   0350 E5          		NORWR:	PUSH HL	;
267)   0351 CD A0 08    		NXB:	CALL RS_RX	;
268)   0354 77          			LD (HL),A	;
269)   0355 23          			INC HL	;
270)   0356 0B          			DEC BC	;
271)   0357 78          			LD A,B	;
272)   0358 B1          			OR C	;
273)   0359 20 F6       			JR NZ,NXB	;LOOP ALL BYTES		;LOOP ALL BYTES
274)   035B 3E 00       		  LD A,0	;
275)   035D D3 08       		  OUT (DEVEPR),A 	;SET ROM NON WRITABLE ='1'	;SET ROM NON WRITABLE ='1'
277)   035F 21 75 04    			LD HL,DATTR	;
278)   0362 CD 03 10    			CALL LCDCLS	;
279)   0365 CD F3 0F    			CALL LCDTXT	;
280)   0368 3E 05       			LD A,5		;
281)   036A CD CE 12    			CALL SCPRN				;
282)   036D CD DB 12    			CALL DELAY	;
284)   0370 E1          			POP HL	;
287)   0371 FB          		  EI	;
288)   0372 C9          			RET	;
292)   0373 F3          		UPLOD2:	DI	;
293)   0374 21 84 04    			LD HL,DATST	;
294)   0377 CD 4D 10    			CALL LCDLN2	;
295)   037A CD F3 0F    			CALL LCDTXT	;
297)   037D CD A0 08    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
298)   0380 6F          			LD L,A	;
299)   0381 CD A0 08    			CALL RS_RX	;
300)   0384 67          			LD H,A	;
301)   0385 CD A0 08    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
302)   0388 4F          			LD C,A	;
303)   0389 CD A0 08    			CALL RS_RX	;
304)   038C 47          			LD B,A	;
306)   038D 11 55 83    			LD DE,PRGEX 	;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
307)   0390 7D          			LD A,L	;
308)   0391 12          			LD (DE),A	;
309)   0392 13          			INC DE	;
310)   0393 7C          			LD A,H	;
311)   0394 12          			LD (DE),A	;
313)   0395 CD A0 08    		NXB2:	CALL RS_RX	;
314)   0398 77          			LD (HL),A	;
315)   0399 23          			INC HL	;
316)   039A 0B          			DEC BC	;
317)   039B 78          			LD A,B	;
318)   039C B1          			OR C	;
319)   039D 20 F6       			JR NZ,NXB2	;LOOP ALL BYTES	  		;LOOP ALL BYTES
321)   039F FB          			EI	;
323)   03A0 C9          			RET	;
330)   03A1 CD A0 08    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
331)   03A4 6F          			LD L,A	;
332)   03A5 CD A0 08    			CALL RS_RX	;
333)   03A8 67          			LD H,A	;
334)   03A9 CD A0 08    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
335)   03AC 4F          			LD C,A	;
336)   03AD CD A0 08    			CALL RS_RX	;
337)   03B0 47          			LD B,A	;
339)   03B1 7E          		NXB3:	LD A,(HL)	;
340)   03B2 CD 87 08    			CALL RS_TX	;SEND BYTE	;SEND BYTE
341)   03B5 23          			INC HL	;
342)   03B6 0B          			DEC BC	;
343)   03B7 78          			LD A,B	;
344)   03B8 B1          			OR C	;
345)   03B9 20 F6       			JR NZ,NXB3	;LOOP ALL BYTES	  			;LOOP ALL BYTES
346)   03BB C9          			RET	;
348)   03BC 00          		RSTST:	NOP	;GET A KEY FROM RS232	;GET A KEY FROM RS232
349)   03BD 06 0A       			LD B,10	;
350)   03BF C5          		TEN:	PUSH BC	;
351)   03C0 CD A0 08    			CALL RS_RX	;
353)   03C3 CD 87 08    			CALL RS_TX	;SEND BACK THE CHAR	;SEND BACK THE CHAR
355)   03C6 3E 20       			LD A,' '	;
357)   03C8 3E 52       			LD A,'R'	;
360)   03CA CD E8 12    			CALL DEL2	;
362)   03CD C1          			POP BC	;
363)   03CE 10 EF       			DJNZ TEN	;
365)   03D0 AF          			XOR A	;
366)   03D1 C9          			RET	;
368)   03D2 00          		RSTST2:	NOP	;TEST RECEIVING AND SENDING 255 BYTES	;TEST RECEIVING AND SENDING 255 BYTES
369)   03D3 06 FF       			LD B,255	;
370)   03D5 C5          		TEN2:	PUSH BC	;
371)   03D6 CD A0 08    			CALL RS_RX	;
373)   03D9 CD 87 08    			CALL RS_TX	;SEND BACK THE CHAR			;SEND BACK THE CHAR
375)   03DC C1          			POP BC	;
376)   03DD 10 F6       			DJNZ TEN2	;
377)   03DF AF          			XOR A	;
378)   03E0 C9          			RET	;
381)   03E1 00          		XMTST:	NOP	;TEST XMIT ALL 8 BITS	;TEST XMIT ALL 8 BITS
382)   03E2 06 FF       			LD B,255	;
383)   03E4 C5          		TEN3:	PUSH BC	;
384)   03E5 78          			LD A,B	;
385)   03E6 CD 87 08    			CALL RS_TX	;SEND  THE BYTE	;SEND  THE BYTE
386)   03E9 C1          			POP BC	;
387)   03EA 10 F8       			DJNZ TEN3	;
388)   03EC AF          			XOR A	;
389)   03ED C9          			RET	;
391)   03EE C9          		TXTSCR: RET	;
393)   03EF F5          		SOUTAS:	PUSH AF  	;SERIAL PRINT ASCII IN DECIMAL	;SERIAL PRINT ASCII IN DECIMAL
394)   03F0 26 00       			LD H,0	;
395)   03F2 6F          			LD L,A	;
396)   03F3 11 58 83    			LD DE,MYNUM	;
397)   03F6 CD F0 12    			CALL OUTASC	;
399)   03F9 3E 0A       			LD A,10	;
400)   03FB 12          			LD (DE),A	;
401)   03FC 13          			INC DE	;
402)   03FD 3E 0D       			LD A,13	;
403)   03FF 12          			LD (DE),A	;
404)   0400 13          			INC DE	;
405)   0401 AF          			XOR A	;
406)   0402 12          			LD (DE),A	;
408)   0403 21 58 83    			LD HL,MYNUM	;
409)   0406 CD 96 08    			CALL RS_TXT	;
410)   0409 F1          			POP AF	;
411)   040A C9          			RET	;
416)   040B 55 49 3A 55 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   040F 50 20 4A 3A 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0413 44 4E 20 58 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0417 3A 52 55 4E 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   041B 20 54 59 48 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   041F 3A 52 53 20 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0423 53 3A 44 49 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0427 53 50 20 43 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   042B 3A 43 4C 53 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   042F 20 4C 3A 4C 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0433 43 44 53 54 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   0437 20 42 3A 42 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
416)   043B 41 53 49 43 		SMENU	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
417)   043F 00          			DB 0	;
419)   0440 4C 43 44 20 		STR0	DEFM "LCD INITIALIZED"	;
419)   0444 49 4E 49 54 		STR0	DEFM "LCD INITIALIZED"	;
419)   0448 49 41 4C 49 		STR0	DEFM "LCD INITIALIZED"	;
419)   044C 5A 45 44    		STR0	DEFM "LCD INITIALIZED"	;
420)   044F 00          			DB 0	;
422)   0450 52 53 32 33 		STR1	DEFM "RS232 INIT"	;
422)   0454 32 20 49 4E 		STR1	DEFM "RS232 INIT"	;
422)   0458 49 54       		STR1	DEFM "RS232 INIT"	;
423)   045A 00          			DB 0	;
425)   045B 50 52 4F 47 		STR2	DEFM "PROGRAM HALTED"	;
425)   045F 52 41 4D 20 		STR2	DEFM "PROGRAM HALTED"	;
425)   0463 48 41 4C 54 		STR2	DEFM "PROGRAM HALTED"	;
425)   0467 45 44       		STR2	DEFM "PROGRAM HALTED"	;
426)   0469 00          			DB 0	;
428)   046A 57 41 49 54 		STR02	DEFM "WAITING..."	;
428)   046E 49 4E 47 2E 		STR02	DEFM "WAITING..."	;
428)   0472 2E 2E       		STR02	DEFM "WAITING..."	;
429)   0474 00          			DB 0	;
431)   0475 50 52 47 20 		DATTR	DEFM "PRG TRANSFERED"	;
431)   0479 54 52 41 4E 		DATTR	DEFM "PRG TRANSFERED"	;
431)   047D 53 46 45 52 		DATTR	DEFM "PRG TRANSFERED"	;
431)   0481 45 44       		DATTR	DEFM "PRG TRANSFERED"	;
432)   0483 00          			DB 0	;
434)   0484 52 45 43 45 		DATST	DEFM "RECEIVING..."	;
434)   0488 49 56 49 4E 		DATST	DEFM "RECEIVING..."	;
434)   048C 47 2E 2E 2E 		DATST	DEFM "RECEIVING..."	;
435)   0490 00          			DB 0		;
437)   0491 50 52 47 20 		SPRGX	DEFM "PRG EXECUTE"	;
437)   0495 45 58 45 43 		SPRGX	DEFM "PRG EXECUTE"	;
437)   0499 55 54 45    		SPRGX	DEFM "PRG EXECUTE"	;
438)   049C 00          			DB 0	;
440)   049D 49 4D 41 47 		STIMG	DEFM "IMAGE COPY"	;
440)   04A1 45 20 43 4F 		STIMG	DEFM "IMAGE COPY"	;
440)   04A5 50 59       		STIMG	DEFM "IMAGE COPY"	;
441)   04A7 00          			DB 0	;
443)   04A8 53 43 52 45 		TXTMES	DEFM "SCREEN READY"	;
443)   04AC 45 4E 20 52 		TXTMES	DEFM "SCREEN READY"	;
443)   04B0 45 41 44 59 		TXTMES	DEFM "SCREEN READY"	;
444)   04B4 00          			DB 0	;
446)   04B5 55 49 3A 55 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04B9 50 20 4A 3A 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04BD 44 4E 20 58 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04C1 3A 52 55 4E 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04C5 20 54 59 48 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04C9 3A 52 53 20 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04CD 53 3A 44 49 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04D1 53 50 20 43 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04D5 3A 43 4C 53 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04D9 20 4C 3A 4C 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04DD 43 44 53 54 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04E1 20 42 3A 42 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
446)   04E5 41 53 49 43 		STRMN	DEFM "UI:UP J:DN X:RUN TYH:RS S:DISP C:CLS L:LCDST B:BASIC"	;
447)   04E9 0A 0D 00    			DB 10,13,0	;
449)   04EC 43 4C 45 41 		STRSCR	DEFM "CLEARING SCREEN."	;
449)   04F0 52 49 4E 47 		STRSCR	DEFM "CLEARING SCREEN."	;
449)   04F4 20 53 43 52 		STRSCR	DEFM "CLEARING SCREEN."	;
449)   04F8 45 45 4E 2E 		STRSCR	DEFM "CLEARING SCREEN."	;
450)   04FC 0A 0D 00    			DB 10,13,0	;
452)   04FF 0A 0D       		STR00	DB 10,13	;
453)   0501 52 53 32 33 			DEFM "RS232 INITIALIZED"	;
453)   0505 32 20 49 4E 			DEFM "RS232 INITIALIZED"	;
453)   0509 49 54 49 41 			DEFM "RS232 INITIALIZED"	;
453)   050D 4C 49 5A 45 			DEFM "RS232 INITIALIZED"	;
453)   0511 44          			DEFM "RS232 INITIALIZED"	;
454)   0512 0A 0D 00    			DB 10,13,0	;
456)   0515 0A 0D       		STR01	DB 10,13	;
457)   0517 57 41 49 54 			DEFM "WAITING..."	;
457)   051B 49 4E 47 2E 			DEFM "WAITING..."	;
457)   051F 2E 2E       			DEFM "WAITING..."	;
458)   0521 0A 0D 00    			DB 10,13,0	;
459)   0524 00          			DB 0	;
461)   0525 0A 0D       		STR06	DB 10,13	;
462)   0527 4B 45 59 20 			DEFM "KEY PRESSED"	;
462)   052B 50 52 45 53 			DEFM "KEY PRESSED"	;
462)   052F 53 45 44    			DEFM "KEY PRESSED"	;
463)   0532 0A 0D 00    			DB 10,13,0	;
464)   0535 00          			DB 0	;
 37)   0536 C3 30 0F    		TEST: JP LCD_TEST    	;
 39)   0539 C3 8E 0E    		@MYOS_CLRSCN:JP LCD_CLRSCR        ; CLRSCN: clears the screen.	; CLRSCN: clears the screen.
 42)   053C C9          				       RET	;
 44)   053D 11 00 00    		       		 LD DE, 0	;
 45)   0540 21 00 00    		 	  		   LD HL, 0	;
 46)   0543 C9          					     RET		       	;
 48)   0544 63          		           LD H,E	;
 49)   0545 E5          		           PUSH HL	;
 50)   0546 CD 42 0E    		           CALL LCD_RMVCURS	;
 51)   0549 E1          		           POP HL	;
 52)   054A 7C          		           LD A,H	;
 53)   054B 32 05 83    		           LD (CURSORX),A	;
 54)   054E 7D          		           LD A,L	;
 55)   054F 32 06 83    		           LD (CURSORY),A	;
 56)   0552 CD 47 0E    		           CALL LCD_PRNCURS                      	;
 57)   0555 C9          		           RET	;
 59)   0556 16 00       		           LD D,0	;
 60)   0558 3A 05 83    		           LD A,(CURSORX)	;
 61)   055B 5F          		           LD E,A	;
 62)   055C 26 00       		           LD H,0	;
 63)   055E 3A 06 83    		           LD A,(CURSORY)	;
 64)   0561 6F          					     LD L,A	;
 65)   0562 C9          					     RET	;
 66)   0563 06 50       		KEYGET:		LD      B,80 ;SCREEN WIDTH IN CHARS	     	;SCREEN WIDTH IN CHARS
 68)   0565 E5          		        	 PUSH    HL	;
 69)   0566 ED 62       		           SBC     HL,HL           ;HL=0	;HL=0
 70)   0568 CD BB 05    		           CALL    MYOS_OSKEY	;
 71)   056B E1          		           POP     HL	;
 72)   056C D8          		           RET     C	;
 73)   056D 18 F6       		           JR      MYOS_OSRDCH           	;
 74)   056F C9          					     RET			;
 76)   0570 F5          					     PUSH    AF	;
 77)   0571 D5          		           PUSH    DE	;
 78)   0572 E5          		           PUSH    HL	;
 79)   0573 5F          		           LD      E,A	;
 80)   0574 CD DA 05    		           CALL    ESCTEST	;
 81)   0577 CD 7E 05    		           CALL    EDPUT	;
 82)   057A E1          		           POP     HL	;
 83)   057B D1          		           POP     DE	;
 84)   057C F1          		           POP     AF	;
 85)   057D C9          		           RET	;
 87)   057E 3A 00 83    		EDPUT:  LD      A,(FLAGS)	;
 88)   0581 CB 5F       		        BIT     3,A	;
 89)   0583 28 10       		        JR      Z,WRCH	;
 90)   0585 7B          		        LD      A,E	;
 91)   0586 FE 20       		        CP      ' '	;
 92)   0588 D8          		        RET     C	;
 93)   0589 2A 08 83    		        LD      HL,(EDPTR)	;
 94)   058C 73          		        LD      (HL),E	;
 95)   058D 2C          		        INC     L	;
 96)   058E C8          		        RET     Z	;
 97)   058F 22 08 83    		        LD      (EDPTR),HL	;
 98)   0592 C9          		        RET           	;
101)   0593 1E 3E       		           LD E,'>'			     	;
102)   0595 7B          		WRCH:      LD A,E	;
103)   0596 D3 00       		           OUT (0),A      	;
104)   0598 F5          		           PUSH AF	;
105)   0599 C5          		           PUSH BC	;
106)   059A D5          		           PUSH DE	;
107)   059B E5          							 PUSH HL	;
109)   059C F5          		           PUSH AF	;
110)   059D C5          		           PUSH BC	;
111)   059E D5          		           PUSH DE	;
112)   059F E5          							 PUSH HL	;
113)   05A0 CD 42 0E    							 CALL LCD_RMVCURS	;
114)   05A3 E1          		           POP HL	;
115)   05A4 D1          		           POP DE	;
116)   05A5 C1          		           POP BC	;
117)   05A6 F1          		           POP AF	;
118)   05A7 CD 7F 0D    		           CALL LCD_PRINTCHAR	;
119)   05AA CD 47 0E    		           CALL LCD_PRNCURS	;
121)   05AD E1          		           POP HL	;
122)   05AE D1          		           POP DE	;
123)   05AF C1          		           POP BC	;
124)   05B0 F1          		           POP AF	;
125)   05B1 C9          					     RET 	;
127)   05B2 3A 00 83    		TOGGLE: LD      A,(FLAGS)	;
128)   05B5 EE 04       		        XOR     00000100B	;
129)   05B7 32 00 83    		        LD      (FLAGS),A	;
130)   05BA C9          		        RET	;
139)   05BB E5          		@MYOS_OSKEY:	PUSH    HL	;
140)   05BC 21 0B 83    		            LD      HL,INKEY	;
141)   05BF 7E          		            LD      A,(HL)	;
142)   05C0 36 00       		            LD      (HL),0	;
143)   05C2 E1          		            POP     HL	;
144)   05C3 B7          		            OR      A	;
145)   05C4 37          		            SCF	;
146)   05C5 C0          		            RET     NZ			;
148)   05C6 CD 42 07    		            CALL    GETKEY	;
150)   05C9 D0          		            RET     NC	;
151)   05CA FE 1B       		            CP      ESC	;
152)   05CC 37          		            SCF	;
153)   05CD C0          		            RET     NZ                        	;
154)   05CE E5          		ESCSET: 		PUSH    HL	;
155)   05CF 21 00 83    		        		LD      HL,FLAGS	;
156)   05D2 CB 76       		        		BIT     6,(HL)          ; ESC DISABLED?	; ESC DISABLED?
157)   05D4 20 02       		        		JR      NZ,ESCDIS	;
158)   05D6 CB FE       		        		SET     7,(HL)          ; SET ESCAPE FLAG	; SET ESCAPE FLAG
159)   05D8 E1          		ESCDIS: 		POP     HL	;
160)   05D9 C9          		        		RET		;
161)   05DA CD AD 08    		ESCTEST:		CALL RS_RXNW	;
162)   05DD B7          				      	OR A	;
163)   05DE C8          				      	RET Z	;
164)   05DF FE 1B       				      	CP 0x1B			; ESC		; ESC
165)   05E1 28 EB       			      		JR Z,ESCSET	;
166)   05E3 32 0B 83    			      		LD (INKEY),A	;
167)   05E6 C9          			       		RET	;
169)   05E7 CD DA 05    		@MYOS_TRAP:			CALL ESCTEST	;
170)   05EA 3A 00 83    		@MYOS_LTRAP:			LD A,(FLAGS)	;
171)   05ED B7          					          OR A	;
172)   05EE F0          				           	RET P	;
173)   05EF 21 00 83    		ABORT:       		LD HL,FLAGS 	;
174)   05F2 CB BE       				          	RES 7,(HL)	;
175)   05F4 C3 C2 4D    				          	JP ESCAPE          	;
184)   05F7 F3          		            DI	;
185)   05F8 21 F6 82    		            LD HL,RANDOM    ; SET RANDOM SEED TO NON 0	; SET RANDOM SEED TO NON 0
186)   05FB 3E 06       		            LD A,0x06	;
187)   05FD 77          		            LD (HL),A	;
188)   05FE 3E BB       		            LD A,0xBB	;
189)   0600 77          		            LD (HL),A	;
190)   0601 21 00 00    		            LD HL,0	;
191)   0604 22 05 83    		            LD (CURSORX),HL  ; CURSOR X 7 Y ZEROED            	; CURSOR X 7 Y ZEROED
192)   0607 11 FF FF    		            LD DE,COL_WHITE   ; SET FCOLOR AND BCOLOR DEFAULT VALUES	; SET FCOLOR AND BCOLOR DEFAULT VALUES
193)   060A 21 01 83    		            LD HL,FCOLOR	;
194)   060D 73          		            LD (HL),E	;
195)   060E 23          		            INC HL	;
196)   060F 72          		            LD (HL),D	;
197)   0610 23          		            INC HL	;
198)   0611 11 00 00    		            LD DE,COL_BLACK	;
199)   0614 73          		            LD (HL),E	;
200)   0615 23          		            INC HL	;
201)   0616 72          		            LD (HL),D                                   	;
202)   0617 11 0E 83    		            LD DE,FCOLPAL	;
203)   061A CD 25 06    		            CALL COPYPAL	;
204)   061D 11 2E 83    		            LD DE,BCOLPAL            	;
205)   0620 CD 25 06    		            CALL COPYPAL	;
206)   0623 18 09       		            JR OSFINSH;	;
207)   0625 21 59 06    		COPYPAL:    LD HL,COL_PALET   	;
208)   0628 01 10 00    		            LD BC,8*2         ;SHOULD ADD 8 MORE COLORS 	;SHOULD ADD 8 MORE COLORS
209)   062B ED B0       		            LDIR	;
210)   062D C9          		            RET	;
212)   062E CD 2B 4C    		OSFINSH:    CALL    TELL	;
213)   0631 43 44 45 53 								DEFM	"CDESP Modular Computer 1.0"	;
213)   0635 50 20 4D 6F 								DEFM	"CDESP Modular Computer 1.0"	;
213)   0639 64 75 6C 61 								DEFM	"CDESP Modular Computer 1.0"	;
213)   063D 72 20 43 6F 								DEFM	"CDESP Modular Computer 1.0"	;
213)   0641 6D 70 75 74 								DEFM	"CDESP Modular Computer 1.0"	;
213)   0645 65 72 20 31 								DEFM	"CDESP Modular Computer 1.0"	;
213)   0649 2E 30       								DEFM	"CDESP Modular Computer 1.0"	;
214)   064B 0A 0D 0A 0D 								DEFB	0AH,0DH,0AH,0DH,00H	;
214)   064F 00          								DEFB	0AH,0DH,0AH,0DH,00H	;
215)   0650 AF          		            XOR A	;
216)   0651 11 FF FF    		         		LD DE,0xFFFF		;DE = HIMEM	;DE = HIMEM
217)   0654 5F          		         		LD E,A             	;PAGE BOUNDARY	;PAGE BOUNDARY
218)   0655 21 65 83    		         		LD HL,@USER         			;
219)   0658 C9          		         		RET		;
220)   0659 00 00       		COL_PALET:  DW COL_BLACK	;
221)   065B 00 F8       		            DW COL_RED	;
222)   065D C0 07       		            DW COL_GREEN	;
223)   065F C0 FF       		            DW COL_YELLOW	;
224)   0661 3F 00       		            DW COL_BLUE	;
225)   0663 3F F8       		            DW COL_MAGENTA	;
226)   0665 FF 07       		            DW COL_CYAN	;
227)   0667 FF FF       		            DW COL_WHITE            	;
233)   0669 CD C3 06    		      CALL    SKIPSP	;
234)   066C FE 0D       					CP      CR	;
235)   066E C8          					RET     Z	;
236)   066F FE 7C       					CP      '|'	;
237)   0671 C8          					RET     Z	;
238)   0672 FE 2E       					CP      '.'	;
239)   0674 CA D2 06    					JP      Z,DOT           ;*.	;*.
240)   0677 EB          					EX      DE,HL	;
241)   0678 21 D6 06    					LD      HL,COMDS	;
242)   067B 1A          		OSCLI0:			LD      A,(DE)	;
243)   067C CD CA 06    					CALL    UPPRC	;
244)   067F BE          					CP      (HL)	;
245)   0680 28 0B       					JR      Z,OSCLI2	;
246)   0682 38 2E       					JR      C,HUH	;
247)   0684 CB 7E       		OSCLI1:			BIT     7,(HL)	;
248)   0686 23          					INC     HL	;
249)   0687 28 FB       					JR      Z,OSCLI1	;
250)   0689 23          					INC     HL	;
251)   068A 23          					INC     HL	;
252)   068B 18 EE       					JR      OSCLI0	;
254)   068D D5          		OSCLI2:			PUSH    DE	;
255)   068E 13          		OSCLI3:			INC     DE	;
256)   068F 23          					INC     HL	;
257)   0690 1A          					LD      A,(DE)	;
258)   0691 CD CA 06    					CALL    UPPRC	;
259)   0694 FE 2E       					CP      '.'             ;ABBREVIATED?	;ABBREVIATED?
260)   0696 28 0A       					JR      Z,OSCLI4	;
261)   0698 AE          					XOR     (HL)	;
262)   0699 28 F3       					JR      Z,OSCLI3	;
263)   069B FE 80       					CP      80H	;
264)   069D 28 03       					JR      Z,OSCLI4	;
265)   069F D1          					POP     DE	;
266)   06A0 18 E2       					JR      OSCLI1	;
268)   06A2 F1          		OSCLI4:			POP     AF	;
269)   06A3 13          				        INC     DE	;
270)   06A4 CB 7E       		OSCLI5:			BIT     7,(HL)	;
271)   06A6 23          					INC     HL	;
272)   06A7 28 FB       					JR      Z,OSCLI5	;
273)   06A9 7E          					LD      A,(HL)	;
274)   06AA 23          					INC     HL	;
275)   06AB 66          					LD      H,(HL)	;
276)   06AC 6F          					LD      L,A	;
277)   06AD E5          					PUSH    HL	;
278)   06AE EB          					EX      DE,HL	;
279)   06AF C3 C3 06    					JP      SKIPSP	;
281)   06B2 3E FE       		HUH:    		LD      A,254	;
282)   06B4 CD F0 46    		        		CALL    EXTERR	;
283)   06B7 42 61 64 20 		        		DEFM    'Bad command'	;
283)   06BB 63 6F 6D 6D 		        		DEFM    'Bad command'	;
283)   06BF 61 6E 64    		        		DEFM    'Bad command'	;
284)   06C2 00          		        		DEFB    0				;
286)   06C3 7E          		SKIPSP:			LD      A,(HL)	;
287)   06C4 FE 20       		        		CP      ' '	;
288)   06C6 C0          		        		RET     NZ	;
289)   06C7 23          		        		INC     HL	;
290)   06C8 18 F9       		        		JR      SKIPSP		;
292)   06CA E6 7F       		UPPRC:  		AND     7FH	;
293)   06CC FE 60       					CP      '`'	;
294)   06CE D8          					RET     C	;
295)   06CF E6 5F       					AND     5FH             ;CONVERT TO UPPER CASE	;CONVERT TO UPPER CASE
296)   06D1 C9          					RET						;
299)   06D2 C9          		DOT:			RET	;
303)   06D3 C3 00 00    		BYE:			JP 0	;
305)   06D6 42 59       		COMDS:  		DEFM    'BY'	;
306)   06D8 C5          					DEFB    'E'+80H	;
307)   06D9 D3 06       					DEFW    BYE	;
308)   06DB FF          					DEFB	0FFH	;
319)   06DC 3E DD       		            LD A,0xDD	;
320)   06DE D3 20       		            OUT (PORT_TAPE),A	;
321)   06E0 3E 0A       		            LD A,COMMD_SAVE	;
322)   06E2 D3 20       		            OUT (PORT_TAPE),A	;
324)   06E4 7E          		OSSV_NXT:   LD A,(HL)	;
325)   06E5 D3 20       		            OUT (PORT_TAPE),A	;
326)   06E7 23          		            INC HL	;
327)   06E8 FE 0D       		            CP 0x0D	;
328)   06EA 20 F8       		            JR NZ,OSSV_NXT	;
330)   06EC 79          		            LD A,C	;
331)   06ED D3 20       		            OUT (PORT_TAPE),A	;
332)   06EF 78          		            LD A,B	;
333)   06F0 D3 20       		            OUT (PORT_TAPE),A	;
335)   06F2 2A DC 82    		            LD HL,(PAGE)	;
336)   06F5 7E          		OSSV_NXT2:  LD A,(HL)	;
337)   06F6 D3 20       		            OUT (PORT_TAPE),A	;
338)   06F8 23          		            INC HL	;
339)   06F9 0B          		            DEC BC	;
340)   06FA 78          		            LD A,B	;
341)   06FB B1          		            OR C	;
342)   06FC 20 F7       		            JR NZ,OSSV_NXT2                        	;
343)   06FE C9          		            RET              	;
349)   06FF 3E DD       		            LD A,0xDD	;
350)   0701 D3 20       		            OUT (PORT_TAPE),A	;
351)   0703 3E 14       		            LD A,COMMD_LOAD	;
352)   0705 D3 20       		            OUT (PORT_TAPE),A	;
354)   0707 7E          		OSLD_NXT:   LD A,(HL)	;
355)   0708 D3 20       		            OUT (PORT_TAPE),A	;
356)   070A 23          		            INC HL	;
357)   070B FE 0D       		            CP 0x0D	;
358)   070D 20 F8       		            JR NZ,OSLD_NXT	;
360)   070F DB 20       		            IN A,(PORT_TAPE)	;
361)   0711 4F          		            LD C,A	;
362)   0712 DB 20       		            IN A,(PORT_TAPE)	;
363)   0714 47          		            LD B,A	;
365)   0715 2A DC 82    		            LD HL,(PAGE)                        	;
366)   0718 DB 20       		OSLD_NXT2:  IN A,(PORT_TAPE)	;
367)   071A 77          		            LD (HL),A	;
368)   071B 23          		            INC HL	;
369)   071C 0B          		            DEC BC	;
370)   071D 78          		            LD A,B	;
371)   071E B1          		            OR C	;
372)   071F 20 F7       		            JR NZ,OSLD_NXT2                        	;
373)   0721 44          		            LD B,H	;
374)   0722 4D          		            LD C,L	;
375)   0723 21 DE 82    		            LD HL,TOP ;SAVE TOP OF BASIC 	;SAVE TOP OF BASIC
376)   0726 71          		            LD (HL),C	;
377)   0727 23          		            INC HL	;
378)   0728 70          		            LD (HL),B            	;
379)   0729 37          		            SCF       ;SET C = NO ERROR            	;SET C = NO ERROR
380)   072A C9          		            RET   	;
394)   072B C9          		            RET	;
396)   072C CD 8E 0E    		@MYOS_CLG: CALL LCD_CLRSCR	;
397)   072F C3 E8 4C    		          JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
400)   0732 CD BE 0E    		@MYOS_COLOUR:  CALL LCD_COLOUR     	;
401)   0735 C3 E8 4C    		              JP XEQ           ;RETURN TO BASIC    	;RETURN TO BASIC
416)   0738 AF          					XOR     A	;
417)   0739 CD F0 46    					CALL    EXTERR	;
418)   073C 53 6F 72 72 					DEFM    'Sorry'	;
418)   0740 79          					DEFM    'Sorry'	;
419)   0741 00          					DEFB    0            	;
426)   0742 CD DC 02    		GETKEY:		  CALL GET_CHAR	;
427)   0745 37          		            SCF	;
428)   0746 C9          					      RET       	;
440)   0747 3A 00 83    		        LD      A,(FLAGS)	;
441)   074A CB 5F       		        BIT     3,A             ;EDIT MODE?	;EDIT MODE?
442)   074C 28 09       		        JR      Z,OSLIN1	;
443)   074E CB 9F       		        RES     3,A	;
444)   0750 32 00 83    		        LD      (FLAGS),A	;
445)   0753 2A 08 83    		        LD      HL,(EDPTR)	;
446)   0756 BD          		        CP      L	;
447)   0757 3E 0D       		OSLIN1: LD      A,CR	;
448)   0759 77          		        LD      (HL),A	;
449)   075A C4 70 05    		        CALL    NZ,MYOS_OSWRCH	;
450)   075D 2E 00       		        LD      L,0	;
451)   075F 4D          		        LD      C,L             ;REPEAT FLAG	;REPEAT FLAG
452)   0760 28 20       		        JR      Z,OSWAIT        ;SUPPRESS UNWANTED SPACE	;SUPPRESS UNWANTED SPACE
453)   0762 06 00       		UPDATE: LD      B,0	;
454)   0764 7E          		UPD1:   LD      A,(HL)	;
455)   0765 04          		        INC     B	;
456)   0766 23          		        INC     HL	;
457)   0767 FE 0D       		        CP      CR	;
458)   0769 F5          		        PUSH    AF	;
459)   076A E5          		        PUSH    HL	;
460)   076B 5F          		        LD      E,A	;
461)   076C C4 95 05    		        CALL    NZ,WRCH         ;FAST WRCH	;FAST WRCH
462)   076F E1          		        POP     HL	;
463)   0770 F1          		        POP     AF	;
464)   0771 20 F1       		        JR      NZ,UPD1	;
465)   0773 3E 20       		        LD      A,' '	;
466)   0775 CD 70 05    		        CALL    MYOS_OSWRCH	;
467)   0778 1E 08       		        LD      E,BS	;
468)   077A E5          		UPD2:   PUSH    HL	;
469)   077B CD 95 05    		        CALL    WRCH            ;FAST WRCH	;FAST WRCH
470)   077E E1          		        POP     HL	;
471)   077F 2B          		        DEC     HL	;
472)   0780 10 F8       		        DJNZ    UPD2	;
473)   0782 79          		OSWAIT: LD      A,C	;
474)   0783 05          		        DEC     B	;
475)   0784 28 01       		        JR      Z,LIMIT	;
476)   0786 B7          		        OR      A               ;REPEAT COMMAND?	;REPEAT COMMAND?
477)   0787 CC 63 05    		LIMIT:  CALL    Z,KEYGET        ;READ KEYBOARD	;READ KEYBOARD
478)   078A 4F          		        LD      C,A             ;SAVE FOR REPEAT	;SAVE FOR REPEAT
479)   078B 11 82 07    		        LD      DE,OSWAIT       ;RETURN ADDRESS	;RETURN ADDRESS
480)   078E D5          		        PUSH    DE	;
481)   078F 3A 00 83    		        LD      A,(FLAGS)	;
482)   0792 B7          		        OR      A               ;TEST FOR ESCAPE	;TEST FOR ESCAPE
483)   0793 79          		        LD      A,C	;
484)   0794 FA D6 07    		        JP      M,OSEXIT	;
485)   0797 FE 0B       		        CP      11         ;CURSOR UP     (IX-11)	;CURSOR UP     (IX-11)
486)   0799 CA 1A 08    		        JP      Z,LEFT	;
487)   079C FE 0A       		        CP      10         ;CURSOR DOWN   (IX-10)	;CURSOR DOWN   (IX-10)
488)   079E CA 4D 08    		        JP      Z,RIGHT	;
489)   07A1 06 00       		        LD      B,0	;
490)   07A3 FE 05       		        CP      5          ;CLEAR LEFT    (IX-5)	;CLEAR LEFT    (IX-5)
491)   07A5 28 72       		        JR      Z,BACK	;
492)   07A7 FE 09       		        CP      9          ;START OF LINE (IX-9)	;START OF LINE (IX-9)
493)   07A9 28 6F       		        JR      Z,LEFT	;
494)   07AB FE 07       		        CP      7          ;CLEAR RIGHT   (IX-7)	;CLEAR RIGHT   (IX-7)
495)   07AD 28 76       		        JR      Z,DELETE	;
496)   07AF FE 08       		        CP      8          ;END OF LINE   (IX-8)	;END OF LINE   (IX-8)
497)   07B1 CA 4D 08    		        JP      Z,RIGHT	;
498)   07B4 0E 00       		        LD      C,0             ;INHIBIT REPEAT	;INHIBIT REPEAT
499)   07B6 FE 10       		        CP      'P' AND 1FH	;
500)   07B8 CA B2 05    		        JP      Z,TOGGLE	;
501)   07BB FE 06       		        CP      6          ;DELETE LEFT   (IX-6)	;DELETE LEFT   (IX-6)
502)   07BD 28 5A       		        JR      Z,BACK	;
503)   07BF FE 04       		        CP      4          ;CURSOR LEFT   (IX-4)	;CURSOR LEFT   (IX-4)
504)   07C1 28 57       		        JR      Z,LEFT	;
505)   07C3 FE 02       		        CP      2          ;DELETE RIGHT  (IX-2)	;DELETE RIGHT  (IX-2)
506)   07C5 28 5E       		        JR      Z,DELETE	;
507)   07C7 FE 01       		        CP      1          ;INSERT SPACE  (IX-1)	;INSERT SPACE  (IX-1)
508)   07C9 28 6E       		        JR      Z,INSERT	;
509)   07CB FE 03       		        CP      3          ;CURSOR RIGHT  (IX-3)	;CURSOR RIGHT  (IX-3)
510)   07CD 28 7E       		        JR      Z,RIGHT	;
511)   07CF FE 20       		        CP      ' '             ;PRINTING CHARACTER	;PRINTING CHARACTER
512)   07D1 30 7F       		        JR      NC,SAVECH	;
513)   07D3 FE 0D       		        CP      CR              ;ENTER LINE	;ENTER LINE
514)   07D5 C0          		        RET     NZ	;
515)   07D6 7E          		OSEXIT: LD      A,(HL)	;
516)   07D7 CD 70 05    		        CALL    MYOS_OSWRCH          ;WRITE REST OF LINE	;WRITE REST OF LINE
517)   07DA 23          		        INC     HL	;
518)   07DB D6 0D       		        SUB     CR	;
519)   07DD 20 F7       		        JR      NZ,OSEXIT	;
520)   07DF D1          		        POP     DE              ;DITCH RETURN ADDRESS	;DITCH RETURN ADDRESS
521)   07E0 B9          		        CP      C	;
522)   07E1 C2 EF 05    		        JP      NZ,ABORT        ;ESCAPE	;ESCAPE
523)   07E4 3E 0A       		        LD      A,LF	;
524)   07E6 CD 70 05    		        CALL    MYOS_OSWRCH	;
525)   07E9 ED 5B F4 82 		        LD      DE,(ERRLIN)	;
526)   07ED AF          		        XOR     A	;
527)   07EE 6F          		        LD      L,A	;
528)   07EF 22 08 83    		        LD      (EDPTR),HL	;
529)   07F2 BA          		        CP      D	;
530)   07F3 C0          		        RET     NZ	;
531)   07F4 BB          		        CP      E	;
532)   07F5 C0          		        RET     NZ	;
533)   07F6 11 66 08    		        LD      DE,EDITST	;
534)   07F9 06 04       		        LD      B,4	;
535)   07FB 1A          		CMPARE: LD      A,(DE)	;
536)   07FC BE          		        CP      (HL)	;
537)   07FD 3E 00       		        LD      A,0	;
538)   07FF C0          		        RET     NZ	;
539)   0800 23          		        INC     HL	;
540)   0801 13          		        INC     DE	;
541)   0802 7E          		        LD      A,(HL)	;
542)   0803 FE 2E       		        CP      '.'	;
543)   0805 28 02       		        JR      Z,ABBR	;
544)   0807 10 F2       		        DJNZ    CMPARE	;
545)   0809 AF          		ABBR:   XOR     A	;
546)   080A 47          		        LD      B,A	;
547)   080B 4D          		        LD      C,L	;
548)   080C 6F          		        LD      L,A	;
549)   080D 11 6A 08    		        LD      DE,LISTST	;
550)   0810 EB          		        EX      DE,HL	;
551)   0811 ED B0       		        LDIR	;
552)   0813 21 00 83    		        LD      HL,FLAGS	;
553)   0816 CB DE       		        SET     3,(HL)	;
554)   0818 C9          		        RET	;
556)   0819 37          		BACK:   SCF                     ;DELETE LEFT	;DELETE LEFT
557)   081A 2C          		LEFT:   INC     L               ;CURSOR LEFT	;CURSOR LEFT
558)   081B 2D          		        DEC     L	;
559)   081C 28 45       		        JR      Z,STOP	;
560)   081E 3E 08       		        LD      A,BS	;
561)   0820 CD 70 05    		        CALL    MYOS_OSWRCH	;
562)   0823 2D          		        DEC     L	;
563)   0824 D0          		        RET     NC	;
564)   0825 7E          		DELETE: LD      A,(HL)          ;DELETE RIGHT	;DELETE RIGHT
565)   0826 FE 0D       		        CP      CR	;
566)   0828 28 39       		        JR      Z,STOP	;
567)   082A 54          		        LD      D,H	;
568)   082B 5D          		        LD      E,L	;
569)   082C 13          		DEL1:   INC     DE	;
570)   082D 1A          		        LD      A,(DE)	;
571)   082E 1B          		        DEC     DE	;
572)   082F 12          		        LD      (DE),A	;
573)   0830 13          		        INC     DE	;
574)   0831 FE 0D       		        CP      CR	;
575)   0833 20 F7       		        JR      NZ,DEL1	;
576)   0835 D1          		DEL2:   POP     DE              ;DITCH	;DITCH
577)   0836 C3 62 07    		        JP      UPDATE	;
579)   0839 3E 0D       		INSERT: LD      A,CR            ;INSERT SPACE	;INSERT SPACE
580)   083B BE          		        CP      (HL)	;
581)   083C C8          		        RET     Z	;
582)   083D 54          		        LD      D,H	;
583)   083E 1E FE       		        LD      E,254	;
584)   0840 13          		INS1:   INC     DE	;
585)   0841 12          		        LD      (DE),A	;
586)   0842 1B          		        DEC     DE	;
587)   0843 7B          		        LD      A,E	;
588)   0844 BD          		        CP      L	;
589)   0845 1B          		        DEC     DE	;
590)   0846 1A          		        LD      A,(DE)	;
591)   0847 20 F7       		        JR      NZ,INS1	;
592)   0849 36 20       		        LD      (HL),' '	;
593)   084B 18 E8       		        JR      DEL2	;
595)   084D 7E          		RIGHT:  LD      A,(HL)          ;CURSOR RIGHT	;CURSOR RIGHT
596)   084E FE 0D       		        CP      CR	;
597)   0850 28 11       		        JR      Z,STOP	;
598)   0852 56          		SAVECH: LD      D,(HL)          ;PRINTING CHARACTER	;PRINTING CHARACTER
599)   0853 77          		        LD      (HL),A	;
600)   0854 2C          		        INC     L	;
601)   0855 28 09       		        JR      Z,WONTGO        ;LINE TOO LONG	;LINE TOO LONG
602)   0857 CD 70 05    		        CALL    MYOS_OSWRCH	;
603)   085A 3E 0D       		        LD      A,CR	;
604)   085C BA          		        CP      D	;
605)   085D C0          		        RET     NZ	;
606)   085E 77          		        LD      (HL),A	;
607)   085F C9          		        RET	;
609)   0860 2D          		WONTGO: DEC     L	;
610)   0861 36 0D       		        LD      (HL),CR	;
613)   0863 0E 00       		STOP:   LD      C,0             ;STOP REPEAT	;STOP REPEAT
614)   0865 C9          		        RET	;
617)   0866 45 44 49 54 		EDITST: DEFM    'EDIT'	;
618)   086A 4C 49 53 54 		LISTST: DEFM    'LIST'	;
 15)   086E 	            			RBR EQU DEVSER+0	;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)	;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)
 16)   086E 	            			THR EQU DEVSER+0	;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)	;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)
 17)   086E 	            			IER EQU DEVSER+1	;INTERRUPT ENABLE REGISTER (DLAB = 0)	;INTERRUPT ENABLE REGISTER (DLAB = 0)
 22)   086E 	            			IIR EQU DEVSER+2	;INTERRUPT IDENT. REGISTER (READ ONLY)	;INTERRUPT IDENT. REGISTER (READ ONLY)
 27)   086E 	            			FCR EQU DEVSER+2	;FIFO CONTROL REGISTER (WRITE ONLY)	;FIFO CONTROL REGISTER (WRITE ONLY)
 35)   086E 	            			LCR EQU DEVSER+3	;LINE CONTROL REGISTER	;LINE CONTROL REGISTER
 43)   086E 	            			MCR EQU DEVSER+4	;MODEM CONTROL REGISTER 	;MODEM CONTROL REGISTER
 44)   086E 	            			LSR EQU DEVSER+5	;LINE STATUS REGISTER	;LINE STATUS REGISTER
 53)   086E 	            			MSR EQU DEVSER+6	;MODEM STATUS REGISTER	;MODEM STATUS REGISTER
 54)   086E 	            			SCR EQU DEVSER+7	;SCRATCH REGISTER	;SCRATCH REGISTER
 55)   086E 	            			DLL EQU DEVSER+0	;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)
 56)   086E 	            			DLM EQU DEVSER+1	;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)
 62)   086E 3E 80       			LD      A,$80          	; Mask to set DLAB on	; Mask to set DLAB on
 63)   0870 D3 23       			OUT     (LCR),A         ; Send to LINe Control Register	; Send to LINe Control Register
 64)   0872 3E 0C       			LD      A,12           ; Divisor of 12 = 9600 bps with 1.8432 MHz clock	; Divisor of 12 = 9600 bps with 1.8432 MHz clock
 69)   0874 D3 20       			OUT     (DLL),A        	; Set LSB of divisor	; Set LSB of divisor
 70)   0876 3E 00       			LD      A,00            ; This will be the MSB of the divisior	; This will be the MSB of the divisior
 71)   0878 D3 21       			OUT     (DLM),A        	; Send to the MSB register	; Send to the MSB register
 72)   087A 3E 03       			LD      A,$03          	; 8 bits, 1 stop, no parity (and clear DLAB)	; 8 bits, 1 stop, no parity (and clear DLAB)
 73)   087C D3 23       			OUT     (LCR),A        	; Write new value to LCR	; Write new value to LCR
 75)   087E 3E 00       		  LD A, 0								;
 76)   0880 D3 22       		  OUT 	(FCR),A						;//was commented	;//was commented
 77)   0882 3E 00       			LD      A,$00          	; 5 A=0 Disable all INterrupts	; 5 A=0 Disable all INterrupts
 78)   0884 D3 21       			OUT     (IER),A        	; Send to INterrupt Enable Register		; Send to INterrupt Enable Register
 79)   0886 C9          			RET	;
 82)   0887 CD 8D 08    		RS_TX:	CALL    RSTXRD	;
 83)   088A D3 20       		        OUT     (THR),A	;
 85)   088C C9          		        RET	;
 89)   088D F5          		RSTXRD: PUSH    AF	;
 90)   088E DB 25       		RSTXLP: IN      A,(LSR)        	; fetch the control register	; fetch the control register
 91)   0890 CB 6F       		        BIT     5,A             ; bit will be set if UART is ready	; bit will be set if UART is ready
 92)   0892 28 FA       		        JR      Z,RSTXLP	;
 93)   0894 F1          		        POP     AF	;
 94)   0895 C9          		        RET			;
 97)   0896 7E          		RS_TXT: LD A,(HL)	;
 98)   0897 23          			INC HL		;
 99)   0898 FE 00       			CP 0	;
100)   089A C8          			RET Z	;
101)   089B CD 87 08    		        CALL RS_TX	;
102)   089E 18 F6       			JR RS_TXT	;
109)   08A0 3E 01       		RS_RX:  LD A,1					;ready to receive SIGNAL DSR 1	;ready to receive SIGNAL DSR 1
110)   08A2 D3 24       		        OUT (MCR),A	;
111)   08A4 CD BB 08    						CALL    RSRXRD              	;
112)   08A7 AF          		RS_GTCH: XOR A						;NOT ready to receive SIGNAL DSR 0	;NOT ready to receive SIGNAL DSR 0
113)   08A8 D3 24       		        OUT (MCR),A        	;
115)   08AA DB 20       			      IN A,(RBR)	;
116)   08AC C9          		        RET	;
118)   08AD 3E 01       		RS_RXNW:LD A,1					;ready to receive SIGNAL DSR 1	;ready to receive SIGNAL DSR 1
119)   08AF D3 24       		        OUT (MCR),A	;
120)   08B1 DB 25       						IN      A,(LSR)        	; fetch the conrtol register	; fetch the conrtol register
121)   08B3 CB 47       		        BIT     0,A                    	;
122)   08B5 28 02       		        JR Z,RS_NOCHAR	;
123)   08B7 18 EE       		        JR RS_GTCH	;
125)   08B9 AF          		RS_NOCHAR: XOR A  ;RETURN ZERO	;RETURN ZERO
126)   08BA C9          		        RET	;
133)   08BB F5          		RSRXRD: PUSH    AF	;
134)   08BC DB 25       		RSRXLP: IN      A,(LSR)        	; fetch the conrtol register	; fetch the conrtol register
135)   08BE CB 47       		        BIT     0,A             ; bit will be set if UART has data	; bit will be set if UART has data
136)   08C0 28 FA       		        JR      Z,RSRXLP	;
137)   08C2 F1          		        POP     AF	;
138)   08C3 C9          		        RET			;
142)   08C4 DB 25       		RS_KEYRD:IN      A,(LSR)        	; fetch the conrtol register	; fetch the conrtol register
143)   08C6 CB 47       		         BIT     0,A             ; bit will be set if UART has data        	; bit will be set if UART has data
144)   08C8 C9          		         RET		;
146)   08C9 F5          		SHLCD:	PUSH AF	;
148)   08CA F1          			POP AF	;
150)   08CB C9          			RET	;
154)   08CC F5          		CHKERR: PUSH AF	;
155)   08CD E5          			PUSH HL	;
156)   08CE C5          			PUSH BC	;
157)   08CF DB 25       			IN A,(LSR) 		;FETCH LINE STATUS REGISTER	;FETCH LINE STATUS REGISTER
158)   08D1 CB 67       			BIT 4,A	;
159)   08D3 28 04       			JR Z,LBLPE	;
160)   08D5 3E 42       			LD A,'B' ;$20		;BREAK	;$20		;BREAK
161)   08D7 18 1A       			JR EXIT	;
162)   08D9 CB 57       		LBLPE:	BIT 2,A		;
163)   08DB 28 04       			JR Z,LBLFE	;
164)   08DD 3E 50       			LD A,'P' ;$40		;PARITY	;$40		;PARITY
165)   08DF 18 12       			JR EXIT	;
166)   08E1 CB 5F       		LBLFE:	BIT 3,A	;
167)   08E3 28 04       			JR Z,LBLOE	;
168)   08E5 3E 46       			LD A,'F' ;$60		;FRAME		;$60		;FRAME
169)   08E7 18 0A       			JR EXIT	;
170)   08E9 CB 4F       		LBLOE:	BIT 1,A	;
171)   08EB 28 04       			JR Z,LBLNE	;
172)   08ED 3E 4F       			LD A,'O'  ;$80		;OVERRUN	;$80		;OVERRUN
173)   08EF 18 02       			JR EXIT	;
174)   08F1 3E 4E       		LBLNE:	LD A,'N'		;NO ERROR	;NO ERROR
175)   08F3 21 50 83    		EXIT:	LD HL,SERERR	;
176)   08F6 77          			LD (HL),A	;
178)   08F7 C1          			POP BC	;
179)   08F8 E1          			POP HL	;
180)   08F9 F1          			POP AF	;
181)   08FA C9          			RET	;
 19)   08FB 	            		       LCD_RS EQU DEVTFT;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS	;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS
 20)   08FB 	            		       LCD_CS EQU DEVTFT+1;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA	;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA
 33)   08FB 7B          		    LD A,E	;
 34)   08FC D3 11       		    OUT (LCD_CS),A	;
 40)   08FE 7A          		    LD A,D  	;
 41)   08FF D3 11       		    OUT (LCD_CS),A	;
 42)   0901 C9          		    RET	;
 48)   0902 7A          		    LD A,D  	;
 49)   0903 D3 10       		    OUT (LCD_RS),A	;
 50)   0905 C9          		    RET	;
 57)   0906 AF          		    XOR A	;
 58)   0907 D3 10       		    OUT (LCD_RS),A  ;RS LOW = COMMAND BYTE      	;RS LOW = COMMAND BYTE
 59)   0909 CD FE 08    		    CALL LCD_WR_BUS	;
 60)   090C 3E 01       		    LD A,1	;
 61)   090E D3 10       		    OUT (LCD_RS),A  ;RS HIGH  = DATA BYTE	;RS HIGH  = DATA BYTE
 62)   0910 C9          		    RET	;
 66)   0911 16 E2       		    LD D,0xE2         ;PLL multiplier, set PLL clock to 120M	;PLL multiplier, set PLL clock to 120M
 67)   0913 CD 02 09    		    CALL LCD_WR_COM   ;N=0x36 for 6.5M, 0x23 for 10M crystal	;N=0x36 for 6.5M, 0x23 for 10M crystal
 68)   0916 16 23       		    LD D,0x23 ;1E	;1E
 69)   0918 CD FE 08    		    CALL LCD_WR_DAT	;
 70)   091B 16 02       		    LD D,0x02	;
 71)   091D CD FE 08    		    CALL LCD_WR_DAT	;
 72)   0920 16 54       		    LD D,0x54	;
 73)   0922 CD FE 08    		    CALL LCD_WR_DAT	;
 74)   0925 16 E0       		    LD D,0xE0         ; PLL enable    	; PLL enable
 75)   0927 CD 02 09    		    CALL LCD_WR_COM	;
 76)   092A 16 01       		    LD D,0x01	;
 77)   092C CD FE 08    		    CALL LCD_WR_DAT	;
 78)   092F 06 0A       		    LD B,10        ;delay(10);	;delay(10);
 79)   0931 CD D5 12    		    CALL DELAYMICRO	;
 80)   0934 16 E0       		    LD D,0xE0         ; PLL enable    	; PLL enable
 81)   0936 CD 02 09    		    CALL LCD_WR_COM   	;
 82)   0939 16 03       		    LD D,0x03	;
 83)   093B CD FE 08    		    CALL LCD_WR_DAT	;
 84)   093E 06 0A       		    LD B,10        ;delay(10);	;delay(10);
 85)   0940 CD D5 12    		    CALL DELAYMICRO    	;
 87)   0943 16 01       		    LD D,0x01         ; software reset  	; software reset
 88)   0945 CD 02 09    		    CALL LCD_WR_COM   	;
 89)   0948 06 14       		    LD B,20       ;delay(20); MICROSECS	;delay(20); MICROSECS
 90)   094A CD D5 12    		    CALL DELAYMICRO        	;
 91)   094D 16 E6       		    LD D,0xE6         ;PLL setting for PCLK, depends on resolution  	;PLL setting for PCLK, depends on resolution
 92)   094F CD 02 09    		    CALL LCD_WR_COM           	;
 93)   0952 16 03       		    LD D,0x03	;
 94)   0954 CD FE 08    		    CALL LCD_WR_DAT   	;
 95)   0957 16 33       		    LD D,0x33 ;FF	;FF
 96)   0959 CD FE 08    		    CALL LCD_WR_DAT       	;
 97)   095C 16 33       		    LD D,0x33 ;FF	;FF
 98)   095E CD FE 08    		    CALL LCD_WR_DAT   	;
100)   0961 16 B0       		    LD D,0xB0         ;LCD SPECIFICATION	;LCD SPECIFICATION
101)   0963 CD 02 09    		    CALL LCD_WR_COM       	;
102)   0966 16 20       		    LD D,0x20	;
103)   0968 CD FE 08    		    CALL LCD_WR_DAT   	;
104)   096B 16 00       		    LD D,0x00	;
105)   096D CD FE 08    		    CALL LCD_WR_DAT       	;
106)   0970 16 03       		    LD D,0x03         ;Set HDP  799	;Set HDP  799
107)   0972 CD FE 08    		    CALL LCD_WR_DAT   	;
108)   0975 16 1F       		    LD D,0x1F	;
109)   0977 CD FE 08    		    CALL LCD_WR_DAT   	;
110)   097A 16 01       		    LD D,0x01         ;Set VDP  479	;Set VDP  479
111)   097C CD FE 08    		    CALL LCD_WR_DAT   	;
112)   097F 16 DF       		    LD D,0xDF	;
113)   0981 CD FE 08    		    CALL LCD_WR_DAT 	;
114)   0984 16 00       		    LD D,0x00	;
115)   0986 CD FE 08    		    CALL LCD_WR_DAT     	;
118)   0989 16 B4       		    LD D,0xB4         ;HSYNC	;HSYNC
119)   098B CD 02 09    		    CALL LCD_WR_COM       	;
120)   098E 16 04       		    LD D,0x04 ;03         ;Set HT 928	;03         ;Set HT 928
121)   0990 CD FE 08    		    CALL LCD_WR_DAT   	;
122)   0993 16 1F       		    LD D,0x1F ;A0	;A0
123)   0995 CD FE 08    		    CALL LCD_WR_DAT       	;
124)   0998 16 00       		    LD D,0x00         ;Set HPS  46	;Set HPS  46
125)   099A CD FE 08    		    CALL LCD_WR_DAT   	;
126)   099D 16 D2       		    LD D,0xD2 ;2E	;2E
127)   099F CD FE 08    		    CALL LCD_WR_DAT   	;
128)   09A2 16 00       		    LD D,0x00 ;30         ;Set HPW  48	;30         ;Set HPW  48
129)   09A4 CD FE 08    		    CALL LCD_WR_DAT   	;
130)   09A7 16 00       		    LD D,0x00         ;Set LPS  15	;Set LPS  15
131)   09A9 CD FE 08    		    CALL LCD_WR_DAT 	;
132)   09AC 16 00       		    LD D,0x00 ;0F	;0F
133)   09AE CD FE 08    		    CALL LCD_WR_DAT   	;
134)   09B1 16 00       		    LD D,0x00	;
135)   09B3 CD FE 08    		    CALL LCD_WR_DAT     	;
137)   09B6 16 B6       		    LD D,0xB6         ;VSYNC	;VSYNC
138)   09B8 CD 02 09    		    CALL LCD_WR_COM       	;
139)   09BB 16 02       		    LD D,0x02         ;Set VT 525	;Set VT 525
140)   09BD CD FE 08    		    CALL LCD_WR_DAT   	;
141)   09C0 16 0C       		    LD D,0x0C ;0D	;0D
142)   09C2 CD FE 08    		    CALL LCD_WR_DAT       	;
143)   09C5 16 00       		    LD D,0x00         ;Set VPS  16	;Set VPS  16
144)   09C7 CD FE 08    		    CALL LCD_WR_DAT   	;
145)   09CA 16 22       		    LD D,0x22 ;10	;10
146)   09CC CD FE 08    		    CALL LCD_WR_DAT   	;
147)   09CF 16 00       		    LD D,0x00 ;10         ;Set VPW  16	;10         ;Set VPW  16
148)   09D1 CD FE 08    		    CALL LCD_WR_DAT   	;
149)   09D4 16 00       		    LD D,0x00         ;Set FPS  8	;Set FPS  8
150)   09D6 CD FE 08    		    CALL LCD_WR_DAT 	;
151)   09D9 16 00       		    LD D,0x00 ; 08	; 08
152)   09DB CD FE 08    		    CALL LCD_WR_DAT   	;
154)   09DE 16 B8       		    LD D,0xB8         	;
155)   09E0 CD 02 09    		    CALL LCD_WR_COM           	;
156)   09E3 16 0F       		    LD D,0x0F ;07         ;GPIO3=input, GPIO[2:0]=output	;07         ;GPIO3=input, GPIO[2:0]=output
157)   09E5 CD FE 08    		    CALL LCD_WR_DAT         	;
158)   09E8 16 01       		    LD D,0x01         ;GPIO0 normal	;GPIO0 normal
159)   09EA CD FE 08    		    CALL LCD_WR_DAT 	;
161)   09ED 16 BA       		    LD D,0xBA         	;
162)   09EF CD 02 09    		    CALL LCD_WR_COM           	;
163)   09F2 16 01       		    LD D,0x01 ;0F	;0F
164)   09F4 CD FE 08    		    CALL LCD_WR_DAT   ;GPIO[3:0] out 1	;GPIO[3:0] out 1
166)   09F7 16 36       		    LD D,0x36         ;rotation	;rotation
167)   09F9 CD 02 09    		    CALL LCD_WR_COM           	;
168)   09FC 16 08       		    LD D,0x08 ;2A         	;2A
169)   09FE CD FE 08    		    CALL LCD_WR_DAT         	;
171)   0A01 16 F0       		    LD D,0xF0         ;pixel data interface	;pixel data interface
172)   0A03 CD 02 09    		    CALL LCD_WR_COM           	;
173)   0A06 16 06       		    LD D,0x06         ;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES 	;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES
174)   0A08 CD FE 08    		    CALL LCD_WR_DAT     	;
176)   0A0B 06 05       		    LD B,5       ;delay(5);	;delay(5);
177)   0A0D CD D5 12    		    CALL DELAYMICRO        	;
179)   0A10 16 BC       		    LD D,0xBC         	;
180)   0A12 CD 02 09    		    CALL LCD_WR_COM           	;
181)   0A15 16 40       		    LD D,0x40	;
182)   0A17 CD FE 08    		    CALL LCD_WR_DAT   	;
183)   0A1A 16 80       		    LD D,0x80	;
184)   0A1C CD FE 08    		    CALL LCD_WR_DAT   	;
185)   0A1F 16 40       		    LD D,0x40	;
186)   0A21 CD FE 08    		    CALL LCD_WR_DAT   	;
187)   0A24 16 01       		    LD D,0x01	;
188)   0A26 CD FE 08    		    CALL LCD_WR_DAT       	;
189)   0A29 06 05       		    LD B,5       ;delay(5);	;delay(5);
190)   0A2B CD D5 12    		    CALL DELAYMICRO  	;
192)   0A2E 16 29       		    LD D,0x29         ;display on 	;display on
193)   0A30 CD 02 09    		    CALL LCD_WR_COM       	;
194)   0A33 16 BE       		    LD D,0xBE         ;set PWM for B/L	;set PWM for B/L
195)   0A35 CD 02 09    		    CALL LCD_WR_COM                 	;
196)   0A38 16 06       		    LD D,0x06	;
197)   0A3A CD FE 08    		    CALL LCD_WR_DAT                 	;
198)   0A3D 16 F0       		    LD D,0xF0         	;
199)   0A3F CD FE 08    		    CALL LCD_WR_DAT   	;
200)   0A42 16 01       		    LD D,0x01         	;
201)   0A44 CD FE 08    		    CALL LCD_WR_DAT   	;
202)   0A47 16 F0       		    LD D,0xF0         	;
203)   0A49 CD FE 08    		    CALL LCD_WR_DAT   	;
204)   0A4C 16 00       		    LD D,0x00         	;
205)   0A4E CD FE 08    		    CALL LCD_WR_DAT   	;
206)   0A51 16 00       		    LD D,0x00         	;
207)   0A53 CD FE 08    		    CALL LCD_WR_DAT                   	;
209)   0A56 16 D0       		    LD D,0xD0         	;
210)   0A58 CD 02 09    		    CALL LCD_WR_COM                 	;
211)   0A5B 16 0D       		    LD D,0x0D         	;
212)   0A5D CD FE 08    		    CALL LCD_WR_DAT         	;
215)   0A60 21 00 00    		    LD HL,0	;
216)   0A63 E5          		    PUSH HL	;
217)   0A64 E5          		    PUSH HL	;
218)   0A65 21 1F 03    		    LD HL,799	;
219)   0A68 E5          		    PUSH HL	;
220)   0A69 21 DF 01    		    LD HL,479	;
221)   0A6C E5          		    PUSH HL	;
222)   0A6D CD 76 0A    		    CALL LCD_SETXY	;
223)   0A70 21 08 00    		    LD HL,8       ;REMOVE 4 PARAMS FROM STACK	;REMOVE 4 PARAMS FROM STACK
224)   0A73 39          		    ADD HL,SP	;
225)   0A74 F9          		    LD SP,HL	;
226)   0A75 C9          		    RET	;
243)   0A76 DD 21 02 00 		    LD IX,2	;
244)   0A7A DD 39       		    ADD IX,SP         	;
245)   0A7C 16 2A       		    LD D,0x2A         ;SEND IX PARAMS	;SEND IX PARAMS
246)   0A7E CD 02 09    		    CALL LCD_WR_COM    	;
247)   0A81 DD 56 07    		    LD D,(IX+7)	;
248)   0A84 CD FE 08    		    CALL LCD_WR_DAT	;
249)   0A87 DD 56 06    		    LD D,(IX+6)	;
250)   0A8A CD FE 08    		    CALL LCD_WR_DAT	;
251)   0A8D DD 56 03    		    LD D,(IX+3)	;
252)   0A90 CD FE 08    		    CALL LCD_WR_DAT	;
253)   0A93 DD 56 02    		    LD D,(IX+2)	;
254)   0A96 CD FE 08    		    CALL LCD_WR_DAT       	;
255)   0A99 16 2B       		    LD D,0x2B         ;SEND Y PARAMS	;SEND Y PARAMS
256)   0A9B CD 02 09    		    CALL LCD_WR_COM   	;
257)   0A9E DD 56 05    		    LD D,(IX+5)	;
258)   0AA1 CD FE 08    		    CALL LCD_WR_DAT	;
259)   0AA4 DD 56 04    		    LD D,(IX+4)	;
260)   0AA7 CD FE 08    		    CALL LCD_WR_DAT	;
261)   0AAA DD 56 01    		    LD D,(IX+1)	;
262)   0AAD CD FE 08    		    CALL LCD_WR_DAT	;
263)   0AB0 DD 56 00    		    LD D,(IX)	;
264)   0AB3 CD FE 08    		    CALL LCD_WR_DAT       	;
265)   0AB6 16 2C       		    LD D,0x2C         ;SEND DATA	;SEND DATA
266)   0AB8 CD 02 09    		    CALL LCD_WR_COM           	;
267)   0ABB C9          		    RET	;
273)   0ABC 54          		    LD D,H        	;
274)   0ABD CD FE 08    		    CALL LCD_WR_DAT 	;
275)   0AC0 55          		    LD D,L	;
276)   0AC1 CD FE 08    		    CALL LCD_WR_DAT 	;
277)   0AC4 C9          		    RET	;
280)   0AC5 DD 21 02 00 		    LD IX,2     ;setXY(x, y, x, y);	;setXY(x, y, x, y);
281)   0AC9 DD 39       		    ADD IX,SP	;
282)   0ACB DD 66 03    		    LD H,(IX+3)   ;X	;X
283)   0ACE DD 6E 02    		    LD L,(IX+2)   ;X	;X
284)   0AD1 DD 56 01    		    LD D,(IX+1) ;Y	;Y
285)   0AD4 DD 5E 00    		    LD E,(IX) ;Y	;Y
286)   0AD7 E5          		    PUSH HL	;
287)   0AD8 D5          		    PUSH DE	;
288)   0AD9 E5          		    PUSH HL	;
289)   0ADA D5          		    PUSH DE	;
290)   0ADB CD 76 0A    		    CALL LCD_SETXY	;
291)   0ADE 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
292)   0AE1 39          		    ADD HL,SP	;
293)   0AE2 F9          		    LD SP,HL	;
294)   0AE3 2A 01 83    		    LD HL,(FCOLOR)	;
295)   0AE6 CD BC 0A    		    CALL LCD_SETPIXEL	;
296)   0AE9 CD ED 0A    		    CALL LCD_CLRXY	;
297)   0AEC C9          		    RET	;
300)   0AED 21 00 00    		     LD HL,0	;
301)   0AF0 E5          		     PUSH HL	;
302)   0AF1 E5          		     PUSH HL	;
303)   0AF2 21 1F 03    		     LD HL,LCD_WIDTH	;
304)   0AF5 E5          		     PUSH HL	;
305)   0AF6 21 DF 01    		     LD HL,LCD_HEIGHT	;
306)   0AF9 E5          		     PUSH HL	;
307)   0AFA CD 76 0A    		     CALL LCD_SETXY	;
308)   0AFD 21 08 00    		     LD HL,8        ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
309)   0B00 39          		     ADD HL,SP	;
310)   0B01 F9          		     LD SP,HL	;
311)   0B02 C9          		     RET	;
315)   0B03 DD 21 02 00 		      LD IX,2	;
316)   0B07 DD 39       		      ADD IX,SP	;
317)   0B09 DD 66 05    		      LD H,(IX+5)   ;X  	;X
318)   0B0C DD 6E 04    		      LD L,(IX+4)   ;X	;X
319)   0B0F DD 56 03    		      LD D,(IX+3)   ;Y	;Y
320)   0B12 DD 5E 02    		      LD E,(IX+2)   ;Y	;Y
321)   0B15 DD 46 01    		      LD B,(IX+1)   ;LENGTH	;LENGTH
322)   0B18 DD 4E 00    		      LD C,(IX)     ;LENGTH	;LENGTH
325)   0B1B E5          		      PUSH HL	;
326)   0B1C 21 00 00    		      LD HL,0	;
327)   0B1F B7          		      OR A           ;CLEAR CARRY	;CLEAR CARRY
328)   0B20 ED 42       		      SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
329)   0B22 38 0A       		      JR C,POSH1	;
330)   0B24 AF          		      XOR A          ;l=-l	;l=-l
331)   0B25 91          					SUB C	;
332)   0B26 4F          					LD C,A	;
333)   0B27 9F          					SBC A,A	;
334)   0B28 90          					SUB B	;
335)   0B29 47          					LD B,A	;
336)   0B2A E1          					POP HL	;
337)   0B2B ED 42       		      SBC HL,BC       ;x -= l;	;x -= l;
338)   0B2D E5          		      PUSH HL                    	;
339)   0B2E E1          		POSH1: POP HL	;
340)   0B2F E5          					PUSH HL	;
341)   0B30 D5          		      PUSH DE	;
342)   0B31 09          		      ADD HL,BC	;
343)   0B32 E5          		      PUSH HL	;
344)   0B33 D5          		      PUSH DE	;
345)   0B34 CD 76 0A    		      CALL LCD_SETXY   ;setXY(x, y, x+l, y);	;setXY(x, y, x+l, y);
346)   0B37 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
347)   0B3A 39          		      ADD HL,SP	;
348)   0B3B F9          		      LD SP,HL	;
349)   0B3C 2A 01 83    		      LD HL,(FCOLOR)    	;
350)   0B3F CD BC 0A    		NXTH1: CALL LCD_SETPIXEL	;
351)   0B42 0B          		      DEC BC	;
352)   0B43 79          		      LD A,C	;
353)   0B44 B0          		      OR B	;
354)   0B45 20 F8       		      JR NZ, NXTH1     	;
355)   0B47 CD ED 0A    		      CALL LCD_CLRXY	;
356)   0B4A C9          		      RET	;
361)   0B4B DD 21 02 00 		      LD IX,2	;
362)   0B4F DD 39       		      ADD IX,SP	;
363)   0B51 DD 56 05    		      LD D,(IX+5)   ;X  	;X
364)   0B54 DD 5E 04    		      LD E,(IX+4)   ;X	;X
365)   0B57 DD 66 03    		      LD H,(IX+3)   ;Y	;Y
366)   0B5A DD 6E 02    		      LD L,(IX+2)   ;Y	;Y
367)   0B5D DD 46 01    		      LD B,(IX+1)   ;LENGTH	;LENGTH
368)   0B60 DD 4E 00    		      LD C,(IX)     ;LENGTH     	;LENGTH
369)   0B63 E5          		      PUSH HL	;
370)   0B64 21 00 00    		      LD HL,0	;
371)   0B67 B7          		      OR A           ;CLEAR CARRY	;CLEAR CARRY
372)   0B68 ED 42       		      SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
373)   0B6A 38 0A       		      JR C,POSV1	;
374)   0B6C AF          		      XOR A          ;l=-l	;l=-l
375)   0B6D 91          					SUB C	;
376)   0B6E 4F          					LD C,A	;
377)   0B6F 9F          					SBC A,A	;
378)   0B70 90          					SUB B	;
379)   0B71 47          					LD B,A	;
380)   0B72 E1          					POP HL	;
381)   0B73 ED 42       		      SBC HL,BC       ;Y -= l;	;Y -= l;
382)   0B75 E5          		      PUSH HL                   	;
383)   0B76 E1          		POSV1: POP HL	;
384)   0B77 D5          					PUSH DE	;
385)   0B78 E5          		      PUSH HL	;
386)   0B79 D5          		      PUSH DE	;
387)   0B7A 09          		      ADD HL,BC	;
388)   0B7B E5          		      PUSH HL	;
389)   0B7C CD 76 0A    		      CALL LCD_SETXY   ;setXY(x, y, x, y+l);	;setXY(x, y, x, y+l);
390)   0B7F 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
391)   0B82 39          		      ADD HL,SP	;
392)   0B83 F9          		      LD SP,HL	;
393)   0B84 2A 01 83    		      LD HL,(FCOLOR)    	;
394)   0B87 CD BC 0A    		NXTV1: CALL LCD_SETPIXEL	;
395)   0B8A 0B          		      DEC BC	;
396)   0B8B 79          		      LD A,C	;
397)   0B8C B0          		      OR B	;
398)   0B8D 20 F8       		      JR NZ, NXTV1     	;
399)   0B8F CD ED 0A    		      CALL LCD_CLRXY	;
400)   0B92 C9          		      RET	;
404)   0B93 DD 21 02 00 		      LD IX,2	;
405)   0B97 DD 39       		      ADD IX,SP	;
415)   0B99 DD 66 05    		      LD H,(IX+5)   ;Y1	;Y1
416)   0B9C DD 6E 04    		      LD L,(IX+4)   ;Y1	;Y1
417)   0B9F DD 56 01    		      LD D,(IX+1)   ;Y2	;Y2
418)   0BA2 DD 5E 00    		      LD E,(IX)     ;Y2	;Y2
419)   0BA5 B7          		      OR A	;
420)   0BA6 ED 52       		      SBC HL,DE	;
421)   0BA8 20 1A       		      JR NZ,YNOTEQ	;
423)   0BAA DD 46 07    		      LD B,(IX+7)   ;X1	;X1
424)   0BAD DD 4E 06    		      LD C,(IX+6)   ;X1	;X1
425)   0BB0 C5          		      PUSH BC       ;X1 1ST PARAM ON STACK	;X1 1ST PARAM ON STACK
426)   0BB1 D5          		      PUSH DE				;Y 2ND PARAM ON STACK	;Y 2ND PARAM ON STACK
427)   0BB2 DD 66 03    		      LD H,(IX+3)   ;X2	;X2
428)   0BB5 DD 6E 02    		      LD L,(IX+2)   ;X2       	;X2
429)   0BB8 ED 42       		      SBC HL,BC  	  ;X2-X1 = LENGTH OF HORIZ LINE	;X2-X1 = LENGTH OF HORIZ LINE
430)   0BBA E5          		      PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
431)   0BBB CD 03 0B    		      CALL LCD_DRAWHLINE	;
432)   0BBE 21 06 00    		      LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
433)   0BC1 39          		      ADD HL,SP	;
434)   0BC2 F9          		      LD SP,HL      	;
435)   0BC3 C9          		      RET	;
437)   0BC4 DD 66 07    		      LD H,(IX+7)   ;X1	;X1
438)   0BC7 DD 6E 06    		      LD L,(IX+6)   ;X1	;X1
439)   0BCA DD 56 03    		      LD D,(IX+3)   ;X2	;X2
440)   0BCD DD 5E 02    		      LD E,(IX+2)   ;X2 	;X2
441)   0BD0 B7          		      OR A	;
442)   0BD1 ED 52       		      SBC HL,DE	;
443)   0BD3 20 1A       		      JR NZ,XNOTEQ	;
445)   0BD5 D5          		      PUSH DE       ;X2=X1 1ST PARAM ON STACK	;X2=X1 1ST PARAM ON STACK
446)   0BD6 DD 46 05    		      LD B,(IX+5)   ;Y1	;Y1
447)   0BD9 DD 4E 04    		      LD C,(IX+4)   ;Y1	;Y1
448)   0BDC C5          		      PUSH BC       ;Y1 2ND PARAM ON STACK	;Y1 2ND PARAM ON STACK
449)   0BDD DD 66 01    		      LD H,(IX+1)   ;Y2	;Y2
450)   0BE0 DD 6E 00    		      LD L,(IX)   ;Y2       	;Y2
451)   0BE3 ED 42       		      SBC HL,BC  	  ;Y2-Y1 = LENGTH OF VERT LINE	;Y2-Y1 = LENGTH OF VERT LINE
452)   0BE5 E5          		      PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
453)   0BE6 CD 4B 0B    		      CALL LCD_DRAWVLINE	;
454)   0BE9 21 06 00    		      LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
455)   0BEC 39          		      ADD HL,SP	;
456)   0BED F9          		      LD SP,HL	;
457)   0BEE C9          		      RET	;
460)   0BEF 38 04       		      JR C,X2GTX1	;
462)   0BF1 AF          		      XOR A			;
463)   0BF2 3D          		      DEC A  ;XSTEP=-1	;XSTEP=-1
464)   0BF3 18 0D       		      JR DLNXT1	;
467)   0BF5 D5          		      PUSH DE	;
468)   0BF6 E1          		      POP HL	;
469)   0BF7 DD 56 07    		      LD D,(IX+7)   ;X1	;X1
470)   0BFA DD 5E 06    		      LD E,(IX+6)   ;X1 	;X1
471)   0BFD B7          		      OR A     	;
472)   0BFE ED 52       		      SBC HL,DE     ;X2-X1 ON HL	;X2-X1 ON HL
474)   0C00 3E 01       		      LD A,1        ;XSTEP=1	;XSTEP=1
476)   0C02 06 00       		      LD B,0	;
477)   0C04 0E 00       		      LD C,0	;
478)   0C06 C5          		      PUSH BC       ;T	;T
479)   0C07 E5          		      PUSH HL       ;DX	;DX
480)   0C08 FE 01       		      CP 1	;
481)   0C0A 28 02       		      JR Z,DLXMINUS1	;
482)   0C0C 06 FF       		      LD B,0XFF	;
483)   0C0E 4F          		DLXMINUS1:LD C,A      	;
484)   0C0F C5          		      PUSH BC       ;XSTEP	;XSTEP
485)   0C10 DD 66 05    		      LD H,(IX+5)   ;Y1	;Y1
486)   0C13 DD 6E 04    		      LD L,(IX+4)   ;Y1	;Y1
487)   0C16 DD 56 01    		      LD D,(IX+1)   ;Y2	;Y2
488)   0C19 DD 5E 00    		      LD E,(IX)     ;Y2      	;Y2
489)   0C1C B7          		      OR A	;
490)   0C1D ED 52       		      SBC HL,DE	;
491)   0C1F 38 04       		      JR C,Y2GTY1	;
493)   0C21 AF          		      XOR A	;
494)   0C22 3D          		      DEC A         ;YSTEP=-1	;YSTEP=-1
495)   0C23 18 0F       		      JR DLNXT2	;
498)   0C25 D5          		      PUSH DE	;
499)   0C26 E1          		      POP HL	;
500)   0C27 DD 56 05    		      LD D,(IX+5)   ;Y1	;Y1
501)   0C2A DD 5E 04    		      LD E,(IX+4)   ;Y1  	;Y1
502)   0C2D B7          		      OR A	;
503)   0C2E ED 52       		      SBC HL,DE  	;
505)   0C30 06 00       		      LD B,0	;
506)   0C32 3E 01       		      LD A,1        ;YSTEP=1	;YSTEP=1
508)   0C34 FE 01       		      CP 1	;
509)   0C36 28 02       		      JR Z,DLYMINUS1	;
510)   0C38 06 FF       		      LD B,0XFF	;
512)   0C3A 4F          		      LD C,A      	;
513)   0C3B E5          		      PUSH HL       ;DY	;DY
514)   0C3C C5          		      PUSH BC       ;YSTEP   	;YSTEP
515)   0C3D FD 21 00 00 		      LD IY,0	;
516)   0C41 FD 39       		      ADD IY,SP	;
531)   0C43 FD 56 07    		      LD D,(IY+7)    ;DX	;DX
532)   0C46 FD 5E 06    		      LD E,(IY+6)    ;DX	;DX
533)   0C49 B7          		      OR A	;
534)   0C4A ED 52       		      SBC HL,DE      ;DY-DX	;DY-DX
535)   0C4C DA E6 0C    		      JP C,DXGTDY	;
536)   0C4F CA E6 0C    		      JP Z,DXGTDY	;
538)   0C52 19          		      ADD HL,DE      ;HL=DY	;HL=DY
539)   0C53 44          		      LD B,H	;
540)   0C54 4D          		      LD C,L	;
541)   0C55 CB 38       		      SRL B	;
542)   0C57 CB 19       		      RR C           ;(dy >> 1)	;(dy >> 1)
543)   0C59 21 00 00    		      LD HL,0	;
544)   0C5C ED 42       		      SBC HL,BC      ;t = - (dy >> 1);	;t = - (dy >> 1);
545)   0C5E FD 74 09    		      LD (IY+9),H    ;SAVE T	;SAVE T
546)   0C61 FD 75 08    		      LD (IY+8),L    ;SAVE T	;SAVE T
548)   0C64 DD 56 05    		      LD D,(IX+5)   ;ROW	;ROW
549)   0C67 DD 5E 04    		      LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
550)   0C6A DD 66 07    		      LD H,(IX+7)   ;COL	;COL
551)   0C6D DD 6E 06    		      LD L,(IX+6)   ;COL=X1	;COL=X1
552)   0C70 D5          		      PUSH DE	;
553)   0C71 DD E5       		      PUSH IX	;
554)   0C73 E5          		      PUSH HL	;
555)   0C74 D5          		      PUSH DE	;
556)   0C75 E5          		      PUSH HL	;
557)   0C76 D5          		      PUSH DE	;
558)   0C77 CD 76 0A    		      CALL LCD_SETXY	;
559)   0C7A 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
560)   0C7D 39          		      ADD HL,SP     ;	;
561)   0C7E F9          		      LD SP,HL      	;
562)   0C7F 2A 01 83    		      LD HL,(FCOLOR)    	;
563)   0C82 CD BC 0A    		      CALL LCD_SETPIXEL	;
564)   0C85 DD E1       		      POP IX	;
565)   0C87 D1          		      POP DE	;
566)   0C88 DD 66 01    		      LD H,(IX+1)   ;Y2	;Y2
567)   0C8B DD 6E 00    		      LD L,(IX)     ;Y2 	;Y2
568)   0C8E ED 52       		      SBC HL,DE     ; ROW=Y2	; ROW=Y2
569)   0C90 CA 79 0D    		      JP Z,DLEXIT	;
570)   0C93 FD 46 01    		      LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
571)   0C96 FD 4E 00    		      LD C,(IY)     ;YSTEP LO	;YSTEP LO
572)   0C99 EB          		      EX DE,HL	;
573)   0C9A 09          		      ADD HL,BC     ;row += ystep;	;row += ystep;
574)   0C9B DD 74 05    		      LD (IX+5),H   ;SAVE ROW	;SAVE ROW
575)   0C9E DD 75 04    		      LD (IX+4),L   ;   	;
577)   0CA1 FD 56 09    		      LD D,(IY+9)   ; T	; T
578)   0CA4 FD 5E 08    		      LD E,(IY+8)   ; T      	; T
579)   0CA7 FD 66 07    		      LD H,(IY+7)   ;DX	;DX
580)   0CAA FD 6E 06    		      LD L,(IY+6)   ;DX	;DX
581)   0CAD 19          		      ADD HL,DE	;
582)   0CAE FD 74 09    		      LD (IY+9),H   ;t += dx;	;t += dx;
583)   0CB1 FD 75 08    		      LD (IY+8),L	;
584)   0CB4 EB          		      EX DE,HL	;
585)   0CB5 21 00 00    		      LD HL,0	;
586)   0CB8 ED 52       		      SBC HL,DE	;
587)   0CBA 30 A8       		      JR NC,DLAGN1      	;
588)   0CBC FD 46 05    		      LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
589)   0CBF FD 4E 04    		      LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
590)   0CC2 DD 66 07    		      LD H,(IX+7)   ;COL HI	;COL HI
591)   0CC5 DD 6E 06    		      LD L,(IX+6)   ;COL LO	;COL LO
592)   0CC8 09          		      ADD HL,BC     ;col += xstep;	;col += xstep;
593)   0CC9 DD 74 07    		      LD (IX+7),H   ;SAVE COL	;SAVE COL
594)   0CCC DD 75 06    		      LD (IX+6),L   ;         	;
596)   0CCF FD 66 09    		      LD H,(IY+9)   ; T	; T
597)   0CD2 FD 6E 08    		      LD L,(IY+8)   ; T      	; T
598)   0CD5 FD 46 03    		      LD B,(IY+3)   ;DY	;DY
599)   0CD8 FD 4E 02    		      LD C,(IY+2)   ;DY	;DY
600)   0CDB ED 42       		      SBC HL,BC	;
601)   0CDD FD 74 09    		      LD (IY+9),H   ;t -= dY;	;t -= dY;
602)   0CE0 FD 75 08    		      LD (IY+8),L								;
603)   0CE3 C3 64 0C    		      JP DLAGN1	;
605)   0CE6 19          		      ADD HL,DE      ;HL=DY DE=DX	;HL=DY DE=DX
606)   0CE7 42          		      LD B,D	;
607)   0CE8 4B          		      LD C,E	;
608)   0CE9 CB 38       		      SRL B	;
609)   0CEB CB 19       		      RR C           ;(dX >> 1)	;(dX >> 1)
610)   0CED 21 00 00    		      LD HL,0	;
611)   0CF0 ED 42       		      SBC HL,BC      ;t = - (dy >> 1);	;t = - (dy >> 1);
612)   0CF2 FD 74 09    		      LD (IY+9),H    ;SAVE T	;SAVE T
613)   0CF5 FD 75 08    		      LD (IY+8),L    ;SAVE T	;SAVE T
615)   0CF8 DD 56 05    		      LD D,(IX+5)   ;ROW	;ROW
616)   0CFB DD 5E 04    		      LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
617)   0CFE DD 66 07    		      LD H,(IX+7)   ;COL	;COL
618)   0D01 DD 6E 06    		      LD L,(IX+6)   ;COL=X1	;COL=X1
619)   0D04 E5          		      PUSH HL       ;SAVE COL	;SAVE COL
620)   0D05 DD E5       		      PUSH IX	;
621)   0D07 E5          		      PUSH HL	;
622)   0D08 D5          		      PUSH DE	;
623)   0D09 E5          		      PUSH HL	;
624)   0D0A D5          		      PUSH DE	;
625)   0D0B CD 76 0A    		      CALL LCD_SETXY	;
626)   0D0E 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
627)   0D11 39          		      ADD HL,SP     ;	;
628)   0D12 F9          		      LD SP,HL      	;
629)   0D13 2A 01 83    		      LD HL,(FCOLOR)    	;
630)   0D16 CD BC 0A    		      CALL LCD_SETPIXEL	;
631)   0D19 DD E1       		      POP IX	;
632)   0D1B D1          		      POP DE        ;RETRIEVE COL	;RETRIEVE COL
633)   0D1C DD 66 03    		      LD H,(IX+3)   ;X2	;X2
634)   0D1F DD 6E 02    		      LD L,(IX+2)   ;X2 	;X2
635)   0D22 ED 52       		      SBC HL,DE     ; COL=X2?	; COL=X2?
636)   0D24 28 53       		      JR Z,DLEXIT	;
637)   0D26 EB          		      EX DE,HL      ;HL=COL	;HL=COL
638)   0D27 FD 46 05    		      LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
639)   0D2A FD 4E 04    		      LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
640)   0D2D 09          		      ADD HL,BC     ;col += xstep;	;col += xstep;
641)   0D2E DD 74 07    		      LD (IX+7),H   ;SAVE COL	;SAVE COL
642)   0D31 DD 75 06    		      LD (IX+6),L   ;   	;
643)   0D34 FD 56 09    		      LD D,(IY+9)   ; T	; T
644)   0D37 FD 5E 08    		      LD E,(IY+8)   ; T      	; T
645)   0D3A FD 66 03    		      LD H,(IY+3)   ;DY	;DY
646)   0D3D FD 6E 02    		      LD L,(IY+2)   ;DY	;DY
647)   0D40 19          		      ADD HL,DE	;
648)   0D41 FD 74 09    		      LD (IY+9),H   ;t += dY;	;t += dY;
649)   0D44 FD 75 08    		      LD (IY+8),L	;
650)   0D47 EB          		      EX DE,HL      ;T=DE	;T=DE
651)   0D48 21 00 00    		      LD HL,0	;
652)   0D4B ED 52       		      SBC HL,DE	;
653)   0D4D 30 A9       		      JR NC,DLAGN2      	;
654)   0D4F FD 46 01    		      LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
655)   0D52 FD 4E 00    		      LD C,(IY)     ;YSTEP LO	;YSTEP LO
656)   0D55 DD 66 05    		      LD H,(IX+5)   ;ROW HI	;ROW HI
657)   0D58 DD 6E 04    		      LD L,(IX+4)   ;ROW LO	;ROW LO
658)   0D5B 09          		      ADD HL,BC     ;ROW += Ystep;	;ROW += Ystep;
659)   0D5C DD 74 05    		      LD (IX+5),H   ;SAVE COL	;SAVE COL
660)   0D5F DD 75 04    		      LD (IX+4),L   ;         	;
662)   0D62 FD 66 09    		      LD H,(IY+9)   ; T	; T
663)   0D65 FD 6E 08    		      LD L,(IY+8)   ; T      	; T
664)   0D68 FD 46 07    		      LD B,(IY+7)   ;DX	;DX
665)   0D6B FD 4E 06    		      LD C,(IY+6)   ;DX	;DX
666)   0D6E ED 42       		      SBC HL,BC	;
667)   0D70 FD 74 09    		      LD (IY+9),H   ;t -= dX;	;t -= dX;
668)   0D73 FD 75 08    		      LD (IY+8),L								;
669)   0D76 C3 F8 0C    		      JP DLAGN2	;
672)   0D79 21 0A 00    		      LD HL,10      ;REMOVE 10 IY PARAMS FROM STACK	;REMOVE 10 IY PARAMS FROM STACK
673)   0D7C 39          		      ADD HL,SP     ;	;
674)   0D7D F9          		      LD SP,HL           	;
675)   0D7E C9          		      RET          	;
681)   0D7F FE 08       		      CP 0X08   ;BACKSPACE	;BACKSPACE
682)   0D81 CA 91 0D    		      JP Z,PRCH_DOBCKSPC	;
683)   0D84 FE 0A       		      CP 0X0A   ;LINE FEED JUST IGNORE IT	;LINE FEED JUST IGNORE IT
684)   0D86 C8          		      RET Z	;
685)   0D87 FE 0D       		      CP 0X0D   ;CHECK FOR ENTER	;CHECK FOR ENTER
686)   0D89 20 3A       		      JR NZ,PRCH_DOPRN	;
687)   0D8B 21 05 83    		      LD HL,CURSORX	;
688)   0D8E C3 36 0E    		      JP PRCH_NEWLN 	;
690)   0D91 21 05 83    		      LD HL,CURSORX      	;
691)   0D94 7E          		      LD A,(HL)	;
692)   0D95 38 05       		      JR C,DOREALBCKSPC	;
694)   0D97 FE 01       		      CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
695)   0D99 C8          		      RET Z	;
696)   0D9A 35          		      DEC (HL)	;
697)   0D9B C9          		      RET      	;
699)   0D9C FE 01       		      CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
700)   0D9E 28 0A       		      JR Z,PRCH_DOBCKSPC2     ;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER	;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER
701)   0DA0 35          		      DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
702)   0DA1 E5          		      PUSH HL	;
703)   0DA2 3E 20       		      LD A,32   ;PRINT SPACE	;PRINT SPACE
704)   0DA4 CD C5 0D    		      CALL PRCH_DOPRN ;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN	;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN
705)   0DA7 E1          		      POP HL	;
706)   0DA8 35          		      DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
707)   0DA9 B7          		      OR A      	;
711)   0DAA DD 21 02 00 		      LD IX,2	;
712)   0DAE DD 39       		      ADD IX,SP	;
713)   0DB0 DD 66 01    		      LD H,(IX+1);POSITION IN ACCS FOR THE NEW CHARACTER      	;POSITION IN ACCS FOR THE NEW CHARACTER
714)   0DB3 DD 6E 00    		      LD L,(IX) ;POSITION IN ACCS FOR THE NEW CHARACTER  	;POSITION IN ACCS FOR THE NEW CHARACTER
715)   0DB6 3E 00       		      LD A,0    ;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG	;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG
716)   0DB8 28 02       		      JR Z,PRCH_SKIP1  ;WE ARE ON COLUMN 1	;WE ARE ON COLUMN 1
717)   0DBA 2B          		      DEC HL     ;PREVIOUS POSITION DELETE BACKSPACE	;PREVIOUS POSITION DELETE BACKSPACE
718)   0DBB 77          		      LD (HL),A  ;PUT 0 ON LAST POSITION	;PUT 0 ON LAST POSITION
720)   0DBC 2B          		      DEC HL     ;PREVIOUS POSITION DELETE PREVIOUS CHAR	;PREVIOUS POSITION DELETE PREVIOUS CHAR
721)   0DBD 77          		      LD (HL),A  ;PUT 0 ON LAST POSITION      	;PUT 0 ON LAST POSITION
722)   0DBE DD 74 01    		      LD (IX+1),H ;PUT POSITION BACK ON STACK IT WILL POPED	;PUT POSITION BACK ON STACK IT WILL POPED
723)   0DC1 DD 75 00    		      LD (IX),L	;
724)   0DC4 C9          		      RET	;
727)   0DC5 F5          		      PUSH AF  ;SAVE CHAR TO STACK	;SAVE CHAR TO STACK
728)   0DC6 32 07 83    		      LD (LASTCHAR),A ;SAVE LAST PRINTED CHAR	;SAVE LAST PRINTED CHAR
729)   0DC9 3A 05 83    		      LD A,(CURSORX)	;
730)   0DCC 06 08       		      LD B,FONT_WIDTH	;
731)   0DCE 16 00       		      LD D,0	;
732)   0DD0 5F          		      LD E,A	;
733)   0DD1 21 00 00    		      LD HL,0	;
734)   0DD4 B7          		      OR A          ; CLEAR CARRY	; CLEAR CARRY
736)   0DD5 ED 5A       		      ADC HL,DE	;
737)   0DD7 10 FC       		      DJNZ PRCH_AGN1 ;HL=DE*B	;HL=DE*B
738)   0DD9 E5          		      PUSH HL       ;1ST PARAM X1	;1ST PARAM X1
739)   0DDA 11 08 00    		      LD DE,FONT_WIDTH 	;
740)   0DDD ED 5A       		      ADC HL,DE      	;
741)   0DDF 2B          		      DEC HL	;
742)   0DE0 E5          		      PUSH HL       ;SAVE 3RD PARAM X2	;SAVE 3RD PARAM X2
743)   0DE1 3A 06 83    		      LD A,(CURSORY)	;
744)   0DE4 06 0A       		      LD B,FONT_HEIGHT 	;
745)   0DE6 16 00       		      LD D,0	;
746)   0DE8 5F          		      LD E,A	;
747)   0DE9 21 00 00    		      LD HL,0	;
749)   0DEC ED 5A       		      ADC HL,DE	;
750)   0DEE 10 FC       		      DJNZ PRCH_AGN2      	;
751)   0DF0 D1          		      POP DE        ;RETREIVE 3RD PARAM X2	;RETREIVE 3RD PARAM X2
752)   0DF1 E5          		      PUSH HL       ;2ND PARAM Y1	;2ND PARAM Y1
753)   0DF2 D5          		      PUSH DE       ;3RD PARAM X2	;3RD PARAM X2
754)   0DF3 11 0A 00    		      LD DE,FONT_HEIGHT	;
755)   0DF6 ED 5A       		      ADC HL,DE     ;CALC 4TH PARAM      	;CALC 4TH PARAM
756)   0DF8 2B          		      DEC HL        ;4TH PARAM -1  	;4TH PARAM -1
757)   0DF9 E5          		      PUSH HL				;4TH PARAM Y2	;4TH PARAM Y2
758)   0DFA CD 76 0A    		      CALL LCD_SETXY	;
759)   0DFD 21 08 00    		      LD HL,8	;
760)   0E00 39          		      ADD HL,SP	;
761)   0E01 F9          		      LD SP,HL      ;SKIP 4 PARAMS 8 BYTES	;SKIP 4 PARAMS 8 BYTES
762)   0E02 F1          		      POP AF        ;CHAR TO PRINT FROM STACK	;CHAR TO PRINT FROM STACK
763)   0E03 21 00 75    		      LD HL,FONT_ADDR	;
764)   0E06 16 00       		      LD D,0	;
765)   0E08 5F          		      LD E,A	;
766)   0E09 ED 5A       		      ADC HL,DE     ;THIS IS THE CHAR ADDRESS	;THIS IS THE CHAR ADDRESS
767)   0E0B E5          		      PUSH HL	;
768)   0E0C D1          		      POP DE        ; CHAR ADDRESS ON DE	; CHAR ADDRESS ON DE
769)   0E0D 0E 0A       		      LD C,FONT_HEIGHT   ; TOTAL FONT LINES	; TOTAL FONT LINES
771)   0E0F 1A          		      LD A,(DE)           ;FONT 8BIT PATTERN FOR A LINE	;FONT 8BIT PATTERN FOR A LINE
772)   0E10 06 08       		      LD B,FONT_WIDTH      	;
774)   0E12 CB 27       		      SLA A               ;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR	;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR
775)   0E14 38 05       		      JR C,FORECOLOR	;
776)   0E16 2A 03 83    		      LD HL,(BCOLOR)	;
777)   0E19 18 03       		      JR PRCH_CONT	;
779)   0E1B 2A 01 83    		      LD HL,(FCOLOR)      	;
781)   0E1E F5          		      PUSH AF	;
782)   0E1F D5          		      PUSH DE             ;TODO:PROBABLY NOT NEEDED HERE 	;TODO:PROBABLY NOT NEEDED HERE
783)   0E20 CD BC 0A    		      CALL LCD_SETPIXEL	;
784)   0E23 D1          		      POP DE	;
785)   0E24 F1          		      POP AF      	;
786)   0E25 10 EB       		      DJNZ PRCH_AGN4	;
787)   0E27 14          		      INC D             ;ADD 256 FOR NEXT CHAR PATTERN	;ADD 256 FOR NEXT CHAR PATTERN
788)   0E28 0D          		      DEC C	;
789)   0E29 20 E4       		      JR NZ,PRCH_AGN3	;
791)   0E2B 21 05 83    		      LD HL,CURSORX	;
792)   0E2E 7E          		      LD A,(HL)	;
793)   0E2F 3C          		      INC A	;
794)   0E30 FE 50       		      CP 80	;
795)   0E32 28 02       		      JR Z,PRCH_NEWLN  ;NEW LINE	;NEW LINE
796)   0E34 77          		      LD (HL),A	;
797)   0E35 C9          		      RET	;
800)   0E36 AF          		      XOR A  	;
801)   0E37 77          		      LD (HL),A   	;
802)   0E38 23          		      INC HL	;
803)   0E39 7E          		      LD A,(HL)	;
804)   0E3A 3C          		      INC A       	;
806)   0E3B FE 2F       		      CP 47         ;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!	;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!
807)   0E3D 20 01       		      JR NZ,PRCH_NOTYET	;
808)   0E3F AF          		      XOR A	;
810)   0E40 77          		      LD (HL),A                             	;
811)   0E41 C9          		      RET	;
824)   0E42 2A 03 83    		      LD HL,(BCOLOR);      	;
825)   0E45 18 03       		      JR LCD_SETCURS	;
836)   0E47 2A 01 83    		      LD HL,(FCOLOR)      ;COLOR PARAM      	;COLOR PARAM
839)   0E4A E5          		      PUSH HL             ;COLOR PARAM	;COLOR PARAM
840)   0E4B 3A 05 83    		      LD A,(CURSORX)	;
841)   0E4E 06 08       		      LD B,FONT_WIDTH	;
842)   0E50 16 00       		      LD D,0	;
843)   0E52 5F          		      LD E,A	;
844)   0E53 21 00 00    		      LD HL,0	;
845)   0E56 B7          		      OR A                ;CLEAR CARRY	;CLEAR CARRY
847)   0E57 ED 5A       		      ADC HL,DE	;
848)   0E59 10 FC       		      DJNZ SCUR_AGN1      ;HL = DE * B 	;HL = DE * B
849)   0E5B E5          		      PUSH HL             ;1ST PARAM X1	;1ST PARAM X1
850)   0E5C 01 08 00    		      LD BC,FONT_WIDTH	;
851)   0E5F ED 4A       		      ADC HL,BC           ;NEXT CHAR	;NEXT CHAR
852)   0E61 2B          		      DEC HL              ;MINUS 1	;MINUS 1
853)   0E62 E5          		      PUSH HL             ;SAVE 3RD PARAM X2      	;SAVE 3RD PARAM X2
854)   0E63 3A 06 83    		      LD A,(CURSORY)      	;
855)   0E66 06 0A       		      LD B,FONT_HEIGHT 	;
856)   0E68 16 00       		      LD D,0	;
857)   0E6A 5F          		      LD E,A	;
858)   0E6B 21 00 00    		      LD HL,0	;
860)   0E6E ED 5A       		      ADC HL,DE	;
861)   0E70 10 FC       		      DJNZ SCUR_AGN2      ;HL=B*DE	;HL=B*DE
862)   0E72 0E 08       		      LD C,FONT_HEIGHT-2  ;2 PIXEL HEIGTH CURSOR       	;2 PIXEL HEIGTH CURSOR
863)   0E74 06 00       		      LD B,0	;
864)   0E76 ED 4A       		      ADC HL,BC           ;ADD FONT_HEIGHT-2 PIXELS	;ADD FONT_HEIGHT-2 PIXELS
865)   0E78 D1          		      POP DE              ;RETREIVE 3RD PARAM ON DE	;RETREIVE 3RD PARAM ON DE
866)   0E79 E5          		      PUSH HL             ;2ND PARAM Y1	;2ND PARAM Y1
867)   0E7A D5          		      PUSH DE             ;3RD PARAM X2	;3RD PARAM X2
869)   0E7B 23          		      INC HL              ; Y2 ADD THE LAST +2 PIXELS  	; Y2 ADD THE LAST +2 PIXELS
870)   0E7C E5          		      PUSH HL             ;4TH PARAM Y2	;4TH PARAM Y2
871)   0E7D CD 76 0A    		      CALL LCD_SETXY	;
872)   0E80 21 08 00    		      LD HL,8	;
873)   0E83 39          		      ADD HL,SP	;
874)   0E84 F9          		      LD SP,HL            ;SKIP 4 PARAMS 8 BYTES            	;SKIP 4 PARAMS 8 BYTES
876)   0E85 E1          		      POP HL              ;GET THE COLOR	;GET THE COLOR
877)   0E86 06 10       		      LD B,2*FONT_WIDTH   ;2*8=16	;2*8=16
879)   0E88 CD BC 0A    		      CALL LCD_SETPIXEL   ;DESTROYS D,A	;DESTROYS D,A
880)   0E8B 10 FB       		      DJNZ SCUR_AGN3                            	;
885)   0E8D C9          		      RET	;
888)   0E8E CD ED 0A    		     CALL LCD_CLRXY;	;
889)   0E91 2A 03 83    		     LD HL,(BCOLOR)     	;
891)   0E94 06 DF       		     LD B,LCD_HEIGHT.AND.0xFF   ;lsb	;lsb
892)   0E96 0E 02       		     LD C,LCD_HEIGHT.SHR.8+1      ;MSB+1	;MSB+1
894)   0E98 C5          		     PUSH BC          	;
896)   0E99 06 1F       		     LD B,LCD_WIDTH.AND.0xFF   ;lsb	;lsb
897)   0E9B 0E 04       		     LD C,LCD_WIDTH.SHR.8+1      ;MSV+1          	;MSV+1
899)   0E9D CD BC 0A    		     CALL LCD_SETPIXEL         ;DESTROYS D,A, HL HAS COLOR INFO	;DESTROYS D,A, HL HAS COLOR INFO
900)   0EA0 10 FB       		     DJNZ CS_AGN1	;
901)   0EA2 0D          		     DEC C	;
902)   0EA3 20 F8       		     JR NZ,CS_AGN1     	;
903)   0EA5 C1          		     POP BC	;
904)   0EA6 10 F0       		     DJNZ CS_AGN2	;
905)   0EA8 0D          		     DEC C	;
906)   0EA9 20 ED       		     JR NZ,CS_AGN2 	;
907)   0EAB 21 00 00    		     LD HL,0                   ;RESET CURSOR AT 0,0	;RESET CURSOR AT 0,0
908)   0EAE 22 05 83    		     LD (CURSORX),HL       	;
909)   0EB1 C9          		     RET	;
913)   0EB2 7E          		     LD A,(HL)	;
914)   0EB3 FE 00       		     CP 0	;
915)   0EB5 C8          		     RET Z	;
916)   0EB6 E5          		     PUSH HL	;
917)   0EB7 CD 7F 0D    		     CALL LCD_PRINTCHAR     	;
918)   0EBA E1          		     POP HL	;
919)   0EBB 23          		     INC HL	;
920)   0EBC 18 F4       		     JR LCD_MSG	;
925)   0EBE CD 94 5E    		     CALL EXPRI	;
926)   0EC1 D9          		     EXX	;
927)   0EC2 FD 7E 00    		     LD A,(IY)	;
928)   0EC5 FE 0D       		     CP 0x0D	;
929)   0EC7 28 2C       		     JR Z,COLSEL	;
930)   0EC9 FE 2C       		     CP ','	;
931)   0ECB 20 53       		     JR NZ,COLERR	;
933)   0ECD E5          		     PUSH HL       ;SAVE 1ST PARAM	;SAVE 1ST PARAM
934)   0ECE FD 23       		     INC IY        ;NEXT PARAM	;NEXT PARAM
935)   0ED0 CD 94 5E    		     CALL EXPRI	;
936)   0ED3 D9          		     EXX	;
937)   0ED4 D1          		     POP DE        ;RESTORE 1ST PARAM ON DE HL HAS THE 2ND	;RESTORE 1ST PARAM ON DE HL HAS THE 2ND
938)   0ED5 7B          		     LD A,E	;
939)   0ED6 D6 80       		     SUB 128	;
940)   0ED8 38 07       		     JR C,COLFC	;
941)   0EDA 5F          		     LD E,A	;
942)   0EDB DD 21 2E 83 		     LD IX,BCOLPAL	;
943)   0EDF 18 04       		     JR DOPALCOL	;
944)   0EE1 DD 21 0E 83 		COLFC: LD IX,FCOLPAL	;
946)   0EE5 7B          		     LD A,E	;
947)   0EE6 FE 0F       		     CP 15			  ;MAX 16 COLORS	;MAX 16 COLORS
948)   0EE8 30 36       		     JR NC,COLERR	;
949)   0EEA DD 19       		     ADD IX,DE     	;
950)   0EEC DD 19       		     ADD IX,DE     ;2*DE CAUSE ITS A 2 BYTE ARRAY	;2*DE CAUSE ITS A 2 BYTE ARRAY
951)   0EEE DD 75 00    		     LD (IX),L    ;SAVE THE NEW COLOR 	;SAVE THE NEW COLOR
952)   0EF1 DD 74 01    		     LD (IX+1),H  	;
953)   0EF4 C9          		     RET  	;
956)   0EF5 E5          		     PUSH HL	;
957)   0EF6 D1          		     POP DE     	;
958)   0EF7 7B          		     LD A,E	;
959)   0EF8 D6 80       		     SUB 128        ;CHECK MSB	;CHECK MSB
960)   0EFA 38 0A       		     JR C,CFC	;
961)   0EFC 5F          		     LD E,A	;
962)   0EFD DD 21 2E 83 		     LD IX,BCOLPAL  ;BACKCOLOR	;BACKCOLOR
963)   0F01 21 03 83    		     LD HL,BCOLOR	;
964)   0F04 18 07       		     JR SFC	;
965)   0F06 DD 21 0E 83 		CFC: LD IX,FCOLPAL  ;FRONTCOLOR	;FRONTCOLOR
966)   0F0A 21 01 83    		     LD HL,FCOLOR	;
967)   0F0D 7B          		SFC: LD A,E	;
968)   0F0E FE 0F       		     CP 15			  ;MAX 16 COLORS	;MAX 16 COLORS
969)   0F10 30 0E       		     JR NC,COLERR	;
970)   0F12 DD 19       		     ADD IX,DE	;
971)   0F14 DD 19       		     ADD IX,DE	;
972)   0F16 DD 56 00    		     LD D,(IX)	;
973)   0F19 DD 5E 01    		     LD E,(IX+1)     	;
974)   0F1C 72          		     LD (HL),D  ;SAVE AGAIN 	;SAVE AGAIN
975)   0F1D 23          		     INC HL     	;
976)   0F1E 73          		     LD (HL),E       	;
977)   0F1F C9          		     RET	;
980)   0F20 AF          				 XOR     A	;
981)   0F21 CD F0 46    				 CALL    EXTERR	;
982)   0F24 70 61 72 61 				 DEFM    'param error'	;
982)   0F28 6D 20 65 72 				 DEFM    'param error'	;
982)   0F2C 72 6F 72    				 DEFM    'param error'	;
983)   0F2F 00          				 DEFB    0     	;
990)   0F30 21 3F 00    		     LD HL,COL_BLUE	;
991)   0F33 22 03 83    		     LD (BCOLOR),HL	;
992)   0F36 21 C0 FF    		     LD HL,COL_YELLOW	;
993)   0F39 22 01 83    		     LD (FCOLOR),HL	;
995)   0F3C CD 8E 0E    		     CALL LCD_CLRSCR	;
1004)   0F3F 3E 00       		    LD A,0	;
1005)   0F41 32 05 83    		    LD (CURSORX),A	;
1006)   0F44 3E 14       		    LD A,20	;
1007)   0F46 32 06 83    		    LD (CURSORY),A	;
1008)   0F49 06 1A       		    LD B,26	;
1009)   0F4B 0E 41       		    LD C,65	;
1010)   0F4D 79          		RP1: LD A,C	;
1011)   0F4E C5          		     PUSH BC	;
1012)   0F4F CD 7F 0D    		    CALL LCD_PRINTCHAR	;
1013)   0F52 C1          		    POP BC    	;
1014)   0F53 0C          		    INC C 	;
1015)   0F54 10 F7       		    DJNZ RP1	;
1018)   0F56 21 0A 00    		    LD HL,10	;
1019)   0F59 01 D2 00    		    LD BC,210	;
1020)   0F5C C5          		    PUSH BC	;
1021)   0F5D E5          		    PUSH HL	;
1022)   0F5E E5          		    PUSH HL	;
1023)   0F5F C5          		    PUSH BC	;
1024)   0F60 CD 93 0B    		    CALL LCD_DRAWLINE 	;
1025)   0F63 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1026)   0F66 39          		    ADD HL,SP	;
1027)   0F67 F9          		    LD SP,HL    	;
1033)   0F68 21 0A 00    		    LD HL,10	;
1034)   0F6B 01 D2 00    		    LD BC,210	;
1035)   0F6E E5          		    PUSH HL	;
1036)   0F6F E5          		    PUSH HL	;
1037)   0F70 C5          		    PUSH BC	;
1038)   0F71 C5          		    PUSH BC	;
1039)   0F72 CD 93 0B    		    CALL LCD_DRAWLINE 	;
1040)   0F75 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1041)   0F78 39          		    ADD HL,SP	;
1042)   0F79 F9          		    LD SP,HL    	;
1046)   0F7A 21 0A 00    		    LD HL,10	;
1047)   0F7D 01 D2 00    		    LD BC,210	;
1048)   0F80 E5          		    PUSH HL	;
1049)   0F81 E5          		    PUSH HL	;
1050)   0F82 C5          		    PUSH BC	;
1051)   0F83 E5          		    PUSH HL	;
1052)   0F84 CD 93 0B    		    CALL LCD_DRAWLINE 	;
1053)   0F87 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1054)   0F8A 39          		    ADD HL,SP	;
1055)   0F8B F9          		    LD SP,HL	;
1056)   0F8C 21 0A 00    		    LD HL,10	;
1057)   0F8F 01 D2 00    		    LD BC,210	;
1058)   0F92 E5          		    PUSH HL	;
1059)   0F93 E5          		    PUSH HL	;
1060)   0F94 E5          		    PUSH HL	;
1061)   0F95 C5          		    PUSH BC	;
1062)   0F96 CD 93 0B    		    CALL LCD_DRAWLINE 	;
1063)   0F99 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1064)   0F9C 39          		    ADD HL,SP	;
1065)   0F9D F9          		    LD SP,HL    	;
1066)   0F9E C9          		    RET	;
 34)   0F9F 	            			PDAT EQU DEVLCD 	;LCD DATA PORT SEND DATA TO LCD	;LCD DATA PORT SEND DATA TO LCD
 35)   0F9F 	            			PINS EQU DEVLCD+01	;LCD RS SET PORT BIT 1 	;LCD RS SET PORT BIT 1
 50)   0F9F 21 52 83    		LCDINI:	LD HL,DISPCT	;
 51)   0FA2 3E 0C       			LD A,8+4	;
 52)   0FA4 77          			LD (HL),A	;
 53)   0FA5 AF          			XOR A	;
 54)   0FA6 D3 29       			OUT (PINS),A		;SET RS 0  CMD 		;SET RS 0  CMD
 55)   0FA8 3E 30       			LD A,16+32	;INITIALIZATION BYTE	;INITIALIZATION BYTE
 56)   0FAA D3 28       			OUT (PDAT),A		;SEND COMMAND	;SEND COMMAND
 57)   0FAC CD E8 12    			CALL DEL2	;
 58)   0FAF CD E8 12    			CALL DEL2	;
 59)   0FB2 CD E8 12    			CALL DEL2	;
 60)   0FB5 CD E8 12    			CALL DEL2		;
 61)   0FB8 06 02       			LD B,2            ;WRITE FUNCTION 3X			;WRITE FUNCTION 3X
 62)   0FBA 3E 30       		INIT1:	LD A,16+32	;INITIALIZATION BYTE	;INITIALIZATION BYTE
 63)   0FBC D3 28       			OUT (PDAT),A		;SEND COMMAND	;SEND COMMAND
 64)   0FBE CD E8 12    			CALL DEL2	;
 65)   0FC1 10 F7       			DJNZ INIT1        ;DELAY LOOP	;DELAY LOOP
 68)   0FC3 3E 38       			LD A,32+16+8+0	  ;SET 8BIT AND LINES AND FONT	(16 + 8 + 0)	;SET 8BIT AND LINES AND FONT	(16 + 8 + 0)
 69)   0FC5 CD E0 0F    			CALL LCDCMD	;
 72)   0FC8 3E 0F       			LD A,8+4+2+1	  ;DISPLAY ON CURSOR ON BLINK ON	;DISPLAY ON CURSOR ON BLINK ON
 73)   0FCA CD E0 0F    			CALL LCDCMD	;
 74)   0FCD 3E 01       			LD A,1		  ;CLS DISPLAY (1)	;CLS DISPLAY (1)
 75)   0FCF CD E0 0F    			CALL LCDCMD	;
 77)   0FD2 C9          			RET	;
 81)   0FD3 F5          			PUSH AF		;
 82)   0FD4 AF          			XOR A	;
 83)   0FD5 D3 29       			OUT (PINS),A			;SET RS 0  CMD FOR READING		;SET RS 0  CMD FOR READING
 84)   0FD7 DB 28       		BUS1:	IN A,(PDAT)  	;E=1 R/W=1 RS=0 INSTRUCT	;E=1 R/W=1 RS=0 INSTRUCT
 85)   0FD9 17          			RLA	  	;d3 IS 1? FOR 4 BIT d7 FOR 8BIT	;d3 IS 1? FOR 4 BIT d7 FOR 8BIT
 86)   0FDA 38 FB       			JR C,BUS1	;
 87)   0FDC F1          			POP AF	;
 88)   0FDD D3 29       			OUT (PINS),A	;SET RS EITHER 0 OR 3 (BIT 1)	;SET RS EITHER 0 OR 3 (BIT 1)
 89)   0FDF C9          			RET	;
 93)   0FE0 F5          		LCDCMD: PUSH AF		;
 94)   0FE1 AF          						XOR A	 				;RS=0	;RS=0
 95)   0FE2 CD D3 0F    						CALL LCDBUS	;
 96)   0FE5 F1          						POP AF	;
 98)   0FE6 D3 28       		LCDCM1:	OUT (PDAT),A   	;E=1 R/W=0 RS=1 INSTRUCT	;E=1 R/W=0 RS=1 INSTRUCT
 99)   0FE8 C9          			RET	;
103)   0FE9 F5          		LCDCHR:	PUSH AF	;
104)   0FEA 3E 03       						LD A,3				;RS=1 DATA 	;RS=1 DATA
105)   0FEC CD D3 0F    						CALL LCDBUS	;
106)   0FEF F1          						POP AF	;
108)   0FF0 D3 28       			      OUT (PDAT),A   	;E=1 R/W=0 RS=1 DATA	;E=1 R/W=0 RS=1 DATA
109)   0FF2 C9          			RET	;
112)   0FF3 E5          		LCDTXT: PUSH HL	;
113)   0FF4 CD F9 0F    						CALL LCDTX1	;
114)   0FF7 E1          						POP HL					;
115)   0FF8 C9          						RET	;
116)   0FF9 7E          		LCDTX1:	LD A,(HL)	;
117)   0FFA 23          						INC HL	;
118)   0FFB FE 00       						CP 0	;
119)   0FFD C8          						RET Z	;
120)   0FFE CD E9 0F    						CALL LCDCHR	;
121)   1001 18 F0       						JR LCDTXT	;
124)   1003 E5          		LCDCLS:	PUSH HL	;
125)   1004 F5          			PUSH AF	;
126)   1005 3E 01       			LD A,1	;
127)   1007 CD E0 0F    			CALL LCDCMD	;
128)   100A AF          			XOR A	;
129)   100B 21 53 83    			LD HL,LCDCX	;
130)   100E 77          			LD (HL),A	;
131)   100F 23          			INC HL 		;LCDCY	;LCDCY
132)   1010 77          			LD (HL),A	;
133)   1011 F1          			POP AF	;
134)   1012 E1          			POP HL	;
135)   1013 C9          			RET	;
137)   1014 E5          		LCDHOM: PUSH HL	;
138)   1015 F5          			PUSH AF	;
139)   1016 3E 02       			LD A,2	;
140)   1018 CD E0 0F    			CALL LCDCMD	;
141)   101B AF          			XOR A	;
142)   101C 21 53 83    			LD HL,LCDCX	;
143)   101F 77          			LD (HL),A	;
144)   1020 23          			INC HL 		;LCDCY	;LCDCY
145)   1021 77          			LD (HL),A	;
146)   1022 F1          			POP AF	;
147)   1023 E1          			POP HL	;
148)   1024 C9          			RET	;
150)   1025 E5          		LCDLIN: PUSH HL	;
151)   1026 F5          			PUSH AF	;
152)   1027 D5          			PUSH DE	;
153)   1028 21 53 83    			LD HL,LCDCX	;LCDCX	;LCDCX
154)   102B 7E          			LD A,(HL)	;
155)   102C 57          			LD D,A	;
156)   102D 23          			INC HL 		;LCDCY	;LCDCY
157)   102E 7E          			LD A,(HL) 	;
158)   102F 5F          			LD E,A	;
159)   1030 3E 80       			LD A,128	;SET DDRAM ADDR	;SET DDRAM ADDR
160)   1032 82          			ADD D			;
161)   1033 CB 23       			SLA E	;$40 IF E IS 1 (LINE 2)	;$40 IF E IS 1 (LINE 2)
162)   1035 CB 23       			SLA E	;
163)   1037 CB 23       			SLA E	;
164)   1039 CB 23       			SLA E	;
165)   103B CB 23       			SLA E	;
166)   103D 83          			ADD E	;
167)   103E CD E0 0F    			CALL LCDCMD	;
168)   1041 D1          			POP DE	;
169)   1042 F1          			POP AF	;
170)   1043 E1          			POP HL	;
171)   1044 C9          			RET		;
172)   1045 F5          		LCDLN1: PUSH AF	;
173)   1046 3E 80       			LD A,128	;SET LINE 1 DRAM ADDR 0	;SET LINE 1 DRAM ADDR 0
174)   1048 CD E0 0F    			CALL LCDCMD	;
175)   104B F1          			POP AF	;
176)   104C C9          			RET	;
177)   104D F5          		LCDLN2: PUSH AF	;
178)   104E 3E C0       			LD A,128+64	;SET LINE 2 DRAM ADDR $40	;SET LINE 2 DRAM ADDR $40
179)   1050 CD E0 0F    			CALL LCDCMD	;
180)   1053 F1          			POP AF	;
181)   1054 C9          			RET	;
183)   1055 F5          		SETDIS:	PUSH AF	;
184)   1056 7E          			LD A,(HL)	;
185)   1057 CB DF       			SET 3,A	;
186)   1059 E6 0F       			AND 15		;ONLY LOWER 4 BITS	;ONLY LOWER 4 BITS
187)   105B CD E0 0F    			CALL LCDCMD	;
188)   105E F1          			POP AF	;
189)   105F C9          			RET	;
191)   1060 E5          		LCDCON:	PUSH HL	;
192)   1061 21 52 83    			LD HL,DISPCT	;
193)   1064 CB CE       			SET 1,(HL)	;
194)   1066 CD 55 10    			CALL SETDIS	;
195)   1069 E1          			POP HL	;
196)   106A C9          			RET	;
198)   106B E5          		LCDCOF:	PUSH HL	;
199)   106C 21 52 83    			LD HL,DISPCT	;
200)   106F CB 8E       			RES 1,(HL)	;
201)   1071 CD 55 10    			CALL SETDIS	;
202)   1074 E1          			POP HL	;
203)   1075 C9          			RET	;
205)   1076 E5          		LCDDON:	PUSH HL	;
206)   1077 21 52 83    			LD HL,DISPCT	;
207)   107A CB D6       			SET 2,(HL)	;
208)   107C CD 55 10    			CALL SETDIS	;
209)   107F E1          			POP HL	;
210)   1080 C9          			RET	;
212)   1081 E5          		LCDDOF: PUSH HL	;
213)   1082 21 52 83    			LD HL,DISPCT	;
214)   1085 CB 96       			RES 2,(HL)	;
215)   1087 CD 55 10    			CALL SETDIS	;
216)   108A E1          			POP HL	;
217)   108B C9          			RET	;
219)   108C E5          		LCDBON:	PUSH HL	;
220)   108D 21 52 83    			LD HL,DISPCT	;
221)   1090 CB C6       			SET 0,(HL)	;
222)   1092 CD 55 10    			CALL SETDIS	;
223)   1095 E1          			POP HL	;
224)   1096 C9          			RET	;
226)   1097 E5          		LCDBOF: PUSH HL	;
227)   1098 21 52 83    			LD HL,DISPCT	;
228)   109B CB 86       			RES 0,(HL)	;
229)   109D CD 55 10    			CALL SETDIS	;
230)   10A0 E1          			POP HL	;
231)   10A1 C9          			RET	;
233)   10A2 F5          		LCDCRL: PUSH AF	;
234)   10A3 3E 10       			LD A,$10	;	;
235)   10A5 CD E0 0F    			CALL LCDCMD	;
236)   10A8 F1          			POP AF	;
237)   10A9 C9          			RET	;
239)   10AA F5          		LCDCRR: PUSH AF	;
240)   10AB 3E 14       			LD A,$14 	;	;
241)   10AD CD E0 0F    			CALL LCDCMD	;
242)   10B0 F1          			POP AF	;
243)   10B1 C9          			RET	;
245)   10B2 F5          		LCDSSL: PUSH AF	;
246)   10B3 3E 18       			LD A,$18	;	;
247)   10B5 CD E0 0F    			CALL LCDCMD	;
248)   10B8 F1          			POP AF	;
249)   10B9 C9          			RET	;
251)   10BA F5          		LCDSSR: PUSH AF	;
252)   10BB 3E 1C       			LD A,$1C 	;	;
253)   10BD CD E0 0F    			CALL LCDCMD	;
254)   10C0 F1          			POP AF	;
255)   10C1 C9          			RET	;
 10)   10C2 21 4E 83    		S2OFF: LD HL,FFSTAT	;
 11)   10C5 CB 8E       		RES 1,(HL)  	;
 12)   10C7 7E          		LD A,(HL)  	;
 13)   10C8 D3 08       		OUT (DEVKBD),A	;
 14)   10CA C9          		RET	;
 16)   10CB 21 4E 83    		S2ON: LD HL,FFSTAT	;
 17)   10CE CB CE       		SET 1,(HL)  	;
 18)   10D0 7E          		LD A,(HL)  	;
 19)   10D1 D3 08       		OUT (DEVKBD),A	;
 20)   10D3 C9          		RET	;
 24)   10D4 DB 18       		WH1:IN A,(DEVKBI)	;
 25)   10D6 57          		    LD D,A	;
 26)   10D7 CB 77       		    BIT 6,A ;CHECK BIT 6=CLOCK	;CHECK BIT 6=CLOCK
 27)   10D9 C0          		    RET NZ	;
 28)   10DA 18 F8       		    JR WH1	;
 31)   10DC DB 18       		WL1:IN A,(DEVKBI)	;
 32)   10DE 57          		    LD D,A	;
 33)   10DF CB 77       		    BIT 6,A ;CHECK BIT 6=CLOCK	;CHECK BIT 6=CLOCK
 34)   10E1 C8          		    RET Z	;
 35)   10E2 18 F8       		    JR WL1	;
 41)   10E4 7A          		    LD A,D ;BIT 7 HAS THE DATA	;BIT 7 HAS THE DATA
 42)   10E5 CB 7F       		    BIT 7,A	;
 43)   10E7 20 24       		    JR NZ,ERROR0 ;ALWAYS START WITH 0	;ALWAYS START WITH 0
 44)   10E9 06 08       		    LD B,8	;
 45)   10EB CD D4 10    		NXTBIT: CALL WAITFORHIGH 	;
 46)   10EE CD DC 10    		    CALL WAITFORLOW	;
 47)   10F1 CB 27       		    SLA A ;BIT 7=DATA IS ON C FLAG	;BIT 7=DATA IS ON C FLAG
 48)   10F3 CB 1B       		    RR E ;CARRY GOES TO BIT 0 OF E    	;CARRY GOES TO BIT 0 OF E
 49)   10F5 10 F4       		    DJNZ NXTBIT	;
 50)   10F7 CD D4 10    		    CALL WAITFORHIGH 	;
 51)   10FA CD DC 10    		    CALL WAITFORLOW     	;
 53)   10FD CD D4 10    		    CALL WAITFORHIGH 	;
 54)   1100 CD DC 10    		    CALL WAITFORLOW 	;
 55)   1103 CB 7F       		    BIT 7,A	;
 56)   1105 28 0E       		    JR Z,ERROR1 ;ALWAYS ENDS WITH 1  	;ALWAYS ENDS WITH 1
 57)   1107 CD D4 10    		    CALL WAITFORHIGH    ;WAIT FOR END OF TRANSMITION	;WAIT FOR END OF TRANSMITION
 58)   110A AF          		    XOR A  ;NO ERROR RESET CARRY FLAG	;NO ERROR RESET CARRY FLAG
 59)   110B 7B          		    LD A,E	;
 60)   110C C9          		    RET	;
 62)   110D 21 1D 11    		    LD HL,MSER4	;
 63)   1110 CD 96 08    		    CALL RS_TXT	;
 64)   1113 37          		    SCF ;FLAGS AN ERROR OCCURED	;FLAGS AN ERROR OCCURED
 65)   1114 C9          		    RET	;
 67)   1115 21 40 11    		    LD HL,MSER5	;
 68)   1118 CD 96 08    		    CALL RS_TXT	;
 69)   111B 37          		    SCF ;FLAGS AN ERROR OCCURED	;FLAGS AN ERROR OCCURED
 70)   111C C9          		    RET	;
 71)   111D 45 52 52 4F 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1121 52 20 53 54 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1125 41 52 54 20 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1129 42 49 54 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   112D 4E 4F 54 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1131 41 53 20 45 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1135 58 50 45 43 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 71)   1139 54 45 44 2E 		MSER4 DEFM "ERROR START BIT NOT AS EXPECTED."	;
 72)   113D 0A 0D 00    		    DB 10,13,0	;
 73)   1140 45 52 52 4F 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   1144 52 20 53 54 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   1148 4F 50 20 42 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   114C 49 54 2E 4E 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   1150 4F 54 2E 41 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   1154 53 20 45 58 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   1158 50 45 43 54 		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 73)   115C 45 44 2E    		MSER5 DEFM "ERROR STOP BIT NOT AS EXPECTED."	;
 74)   115F 0A 0D 00    		    DB 10,13,0	;
 76)   1162 CD 79 11    		PS2KEY: CALL PS2ISK	;
 77)   1165 B7          		        OR A	;
 78)   1166 20 FA       		        JR NZ, PS2KEY ;NO KEY YET	;NO KEY YET
 79)   1168 57          		READKEY:LD D,A	;
 80)   1169 CD E4 10    		        CALL NEWBYTE 	;
 81)   116C F5          		        PUSH AF       	;
 82)   116D CD CB 10    		        CALL S2ON	;
 83)   1170 F1          		        POP AF	;
 84)   1171 C9          		        RET	;
 86)   1172 CD 62 11    		READCHAR:CALL PS2KEY	;
 87)   1175 CD 3A 12    		       CALL PS2LOK	;
 88)   1178 C9          		       RET	;
 91)   1179 CD C2 10    		PS2ISK:CALL S2OFF ;KEYBOARD ENABLED	;KEYBOARD ENABLED
 92)   117C 06 0A       		    LD B,10 ;CHECK 10 TIMES	;CHECK 10 TIMES
 93)   117E DB 18       		CHAG: IN A,(DEVKBI)	;
 94)   1180 57          		    LD D,A	;
 95)   1181 CB 77       		    BIT 6,A ;CHECK BIT 6=CLOCK	;CHECK BIT 6=CLOCK
 96)   1183 28 08       		    JR Z,KEYOK	;
 97)   1185 10 F7       		    DJNZ CHAG	;
 99)   1187 3E 01       		PS2NTP: LD A,1 ;SET A TO 1 MEANS NO KEY AVAILABLE	;SET A TO 1 MEANS NO KEY AVAILABLE
101)   1189 CD CB 10    		    CALL S2ON	;
102)   118C C9          		    RET	;
103)   118D AF          		KEYOK: XOR A	;SET A TO 0 MEANS WE HAVE A KEY	;SET A TO 0 MEANS WE HAVE A KEY
104)   118E C9          		    RET	;
106)   118F CD 62 11    		GTKEY:	CALL PS2KEY	;GET A KEY FROM PS2	;GET A KEY FROM PS2
107)   1192 FE E1       			CP $E1		;BREAK KEY	;BREAK KEY
108)   1194 CC B6 11    			CALL Z,GTBRK	;
109)   1197 FE F0       			CP $F0		;240 KEY RELEASED	;240 KEY RELEASED
110)   1199 CC F4 11    			CALL Z,GTREL	;
111)   119C FE E0       			CP $E0		;224 EXTENDED KEYS	;224 EXTENDED KEYS
112)   119E CC C0 11    			CALL Z,GTEXT	;
115)   11A1 FE 12       			CP 18		;LEFT SHIFT	;LEFT SHIFT
116)   11A3 CC 1F 12    			CALL Z,SHFTOG	;
117)   11A6 FE 59       			CP 89		;RIGHT SHIFT	;RIGHT SHIFT
118)   11A8 CC 1F 12    			CALL Z,SHFTOG	;
119)   11AB FE 14       			CP 20		;RIGHT CONTROL	;RIGHT CONTROL
120)   11AD CC 28 12    			CALL Z,CTRTOG		;
121)   11B0 FE 11       			CP 17		;LEFT ALT	;LEFT ALT
122)   11B2 CC 31 12    			CALL Z,ALTTOG	;
123)   11B5 C9          			RET	;
125)   11B6 CD 62 11    		GTBRK:	CALL PS2KEY	;$14 OR $F0	;$14 OR $F0
126)   11B9 FE F0       			CP $F0	;
127)   11BB C8          			RET Z	;
128)   11BC CD 62 11    			CALL PS2KEY	;$77	;$77
129)   11BF C9          			RET	;
131)   11C0 CD 62 11    		GTEXT:	CALL PS2KEY	; THIS IS THE EXTENDED KEY	; THIS IS THE EXTENDED KEY
132)   11C3 FE 6B       			CP $6B  ;LEFT	;LEFT
133)   11C5 C8          			RET Z	;
134)   11C6 FE 72       			CP $72	;DOWN	;DOWN
135)   11C8 C8          			RET Z	;
136)   11C9 FE 74       			CP $74	;RIGHT	;RIGHT
137)   11CB C8          			RET Z	;
138)   11CC FE 75       			CP $75	;UP	;UP
139)   11CE C8          			RET Z	;
140)   11CF FE 70       			CP $70	;INSERT	;INSERT
141)   11D1 C8          			RET Z	;
142)   11D2 FE 6C       			CP $6C	;HOME	;HOME
143)   11D4 C8          			RET Z	;
144)   11D5 FE 7D       			CP $7D	;PG UP	;PG UP
145)   11D7 C8          			RET Z	;
146)   11D8 FE 7A       			CP $7A	;PG DN	;PG DN
147)   11DA C8          			RET Z	;
148)   11DB FE 69       			CP $69	;END	;END
149)   11DD C8          			RET Z	;
150)   11DE FE 71       			CP $71	;DEL	;DEL
151)   11E0 C8          			RET Z	;
152)   11E1 FE 5A       			CP $5A	;ENTER NUM	;ENTER NUM
153)   11E3 C8          			RET Z	;
154)   11E4 FE 11       			CP $11	;RIGHT ALT	;RIGHT ALT
155)   11E6 C8          			RET Z	;
156)   11E7 FE 14       			CP $14	;LEFT ALT	;LEFT ALT
157)   11E9 C8          			RET Z	;
158)   11EA FE F0       			CP $F0	;
159)   11EC C2 F2 11    			JP NZ, 	EXGTEX	;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY	;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY
160)   11EF CD 62 11    			CALL PS2KEY	; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT	; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT
162)   11F2 AF          		EXGTEX	XOR A	;NOT VALID EXTENDED KEY	;NOT VALID EXTENDED KEY
163)   11F3 C9          			RET	;
166)   11F4 CD 62 11    		GTREL:	CALL PS2KEY	; THIS IS THE RELEASED KEY	; THIS IS THE RELEASED KEY
167)   11F7 FE 12       			CP 18		; LSHIFT RELEASED	; LSHIFT RELEASED
168)   11F9 CC 0D 12    			CALL Z,SHFRES	; RESET SHIFT	; RESET SHIFT
169)   11FC FE 14       			CP 20		; LCTRL RELEASED	; LCTRL RELEASED
170)   11FE CC 13 12    			CALL Z,CTRRES	; RESET CONTROL	; RESET CONTROL
171)   1201 FE 11       			CP 17		; LALT RELEASED	; LALT RELEASED
172)   1203 CC 19 12    			CALL Z,ALTRES	; RESET ALT	; RESET ALT
173)   1206 FE 59       			CP 89		; RSHIFT RELEASED	; RSHIFT RELEASED
174)   1208 CC 0D 12    			CALL Z,SHFRES	; RESET SHIFT	; RESET SHIFT
175)   120B AF          			XOR A		; NO KEY	; NO KEY
176)   120C C9          			RET	;
178)   120D 21 4F 83    		SHFRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
179)   1210 CB B6       			RES 6,(HL)  	; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
180)   1212 C9          			RET	;
182)   1213 21 4F 83    		CTRRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
183)   1216 CB BE       			RES 7,(HL)	; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
184)   1218 C9          			RET	;
186)   1219 21 4F 83    		ALTRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
187)   121C CB AE       			RES 5,(HL)	; BIT 5 IS SHIFT $20=32 	; BIT 5 IS SHIFT $20=32
188)   121E C9          			RET	;
190)   121F 21 4F 83    		SHFTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
191)   1222 3E 40       			LD A,$40	; MASK	; MASK
192)   1224 AE          			XOR (HL)  	; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
193)   1225 77          			LD (HL),A	; SAVE	; SAVE
194)   1226 AF          			XOR A		; NO KEY	; NO KEY
195)   1227 C9          			RET	;
197)   1228 21 4F 83    		CTRTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
198)   122B 3E 80       			LD A,$80	; MASK	; MASK
199)   122D AE          			XOR (HL)	; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
200)   122E 77          			LD (HL),A	; SAVE	; SAVE
201)   122F AF          			XOR A		; NO KEY	; NO KEY
202)   1230 C9          			RET	;
204)   1231 21 4F 83    		ALTTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
205)   1234 3E 20       			LD A,$20	;
206)   1236 AE          			XOR (HL)	; BIT 5 IS ALT $20=32 	; BIT 5 IS ALT $20=32
207)   1237 77          			LD (HL),A	; SAVE	; SAVE
208)   1238 AF          			XOR A		; NO KEY	; NO KEY
209)   1239 C9          			RET	;
211)   123A 21 4C 12    		PS2LOK	LD HL,PS2TAB	;
212)   123D 06 00       			LD B,0	;
213)   123F 4F          			LD C,A	;
214)   1240 09          			ADD HL,BC	;
215)   1241 7E          			LD A,(HL)	;
216)   1242 21 4F 83    			LD HL,KEYCTR	;
217)   1245 46          			LD B,(HL)	;
218)   1246 CB 70       			BIT 6,B			;BIT 6 IS SHIFT	;BIT 6 IS SHIFT
219)   1248 C8          			RET Z	;
220)   1249 C6 20       			ADD A,32	;
221)   124B C9          			RET	;
223)   124C 00 00 00 00 		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
223)   1250 00 00 00 00 		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
223)   1254 00 00       		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
224)   1256 00 00 00 00 			DB 0,0,0,0,'`',0,0,0,0,0	;
224)   125A 60 00 00 00 			DB 0,0,0,0,'`',0,0,0,0,0	;
224)   125E 00 00       			DB 0,0,0,0,'`',0,0,0,0,0	;
225)   1260 00 51 31 00 			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
225)   1264 00 00 5A 53 			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
225)   1268 41 57       			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
226)   126A 32 00 00 43 			DB '2',0,0,'C','X','D','E','4','3',0	;
226)   126E 58 44 45 34 			DB '2',0,0,'C','X','D','E','4','3',0	;
226)   1272 33 00       			DB '2',0,0,'C','X','D','E','4','3',0	;
227)   1274 00 20 56 46 			DB 0,' ','V','F','T','R','5',0,0,'N'	;
227)   1278 54 52 35 00 			DB 0,' ','V','F','T','R','5',0,0,'N'	;
227)   127C 00 4E       			DB 0,' ','V','F','T','R','5',0,0,'N'	;
228)   127E 42 48 47 59 			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
228)   1282 36 00 00 00 			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
228)   1286 4D 4A       			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
229)   1288 55 37 38 00 			DB 'U','7','8',0,0,',','K','I','O','0'	;
229)   128C 00 2C 4B 49 			DB 'U','7','8',0,0,',','K','I','O','0'	;
229)   1290 4F 30       			DB 'U','7','8',0,0,',','K','I','O','0'	;
230)   1292 39 00 00 2E 			DB '9',0,0,'.','/','L',59,'P','-',0	;
230)   1296 2F 4C 3B 50 			DB '9',0,0,'.','/','L',59,'P','-',0	;
230)   129A 2D 00       			DB '9',0,0,'.','/','L',59,'P','-',0	;
231)   129C 00 00 27 00 			DB 0,0,39,0,'[','=',0,0,0,0	;
231)   12A0 5B 3D 00 00 			DB 0,0,39,0,'[','=',0,0,0,0	;
231)   12A4 00 00       			DB 0,0,39,0,'[','=',0,0,0,0	;
232)   12A6 0D 5D 00 00 			DB 13,']',0,0,0,0,0,0,0,0	;
232)   12AA 00 00 00 00 			DB 13,']',0,0,0,0,0,0,0,0	;
232)   12AE 00 00       			DB 13,']',0,0,0,0,0,0,0,0	;
233)   12B0 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
233)   12B4 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
233)   12B8 00 00       			DB 0,0,0,0,0,0,0,0,0,0	;
234)   12BA 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
234)   12BE 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
234)   12C2 00 00       			DB 0,0,0,0,0,0,0,0,0,0	;
235)   12C4 00 00 33 00 			DB 0,0,'3',0,'*','9',0,0,0,0	;
235)   12C8 2A 39 00 00 			DB 0,0,'3',0,'*','9',0,0,0,0	;
235)   12CC 00 00       			DB 0,0,'3',0,'*','9',0,0,0,0	;
 14)   12CE C9          		      RET	;
 17)   12CF F5          		DELAYMICROSEC:	PUSH AF	;
 18)   12D0 D5          			PUSH DE	;
 19)   12D1 1B          		  DEC DE	;
 20)   12D2 D1          			POP DE	;
 21)   12D3 F1          			POP AF	;
 22)   12D4 C9          			RET	;
 25)   12D5 CD CF 12    		S21:	CALL DELAYMICROSEC	;
 26)   12D8 10 FB       			DJNZ S21		;
 27)   12DA C9          			RET	;
 31)   12DB F5          		DELAYMILISEC:	PUSH AF	;
 32)   12DC D5          			PUSH DE	;
 33)   12DD 11 2C 01    			LD DE,300	;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS	;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS
 34)   12E0 1B          		DEL1:	DEC DE	;
 35)   12E1 7A          			LD A,D            ;TEST FOR DE=00	;TEST FOR DE=00
 36)   12E2 B3          			OR E	;
 37)   12E3 20 FB       			JR NZ,DEL1 		;
 38)   12E5 D1          			POP DE	;
 39)   12E6 F1          			POP AF	;
 40)   12E7 C9          			RET	;
 42)   12E8 06 50       		DEL2:LD B,80	;
 44)   12EA CD DB 12    		S1:	CALL DELAYMILISEC	;
 45)   12ED 10 FB       			DJNZ S1		;
 46)   12EF C9          			RET	;
 52)   12F0 F5          		OUTASC	PUSH AF	;
 53)   12F1 D5          			PUSH DE	;
 54)   12F2 CD FB 12    			CALL B2Bcd	;
 55)   12F5 D1          			POP DE	;
 56)   12F6 CD 12 13    			CALL BCD2HA	;
 57)   12F9 F1          			POP AF	;
 58)   12FA C9          			RET		;
 71)   12FB 01 00 10    		LD BC, 16*256+0 ; handle 16 bits, one bit per iteration	; handle 16 bits, one bit per iteration
 72)   12FE 11 00 00    		LD DE, 0	;
 74)   1301 29          		ADD HL, HL	;
 75)   1302 7B          		LD A, E	;
 76)   1303 8F          		ADC A, A	;
 77)   1304 27          		DAA	;
 78)   1305 5F          		LD E, A	;
 79)   1306 7A          		LD A, D	;
 80)   1307 8F          		ADC A, A	;
 81)   1308 27          		DAA	;
 82)   1309 57          		LD D, A	;
 83)   130A 79          		LD A, C	;
 84)   130B 8F          		ADC A, A	;
 85)   130C 27          		DAA	;
 86)   130D 4F          		LD C, A	;
 87)   130E 10 F1       		DJNZ cvtLp	;
 88)   1310 EB          		EX DE,HL	;
 89)   1311 C9          		RET	;
100)   1312 79          		LD A, C	;
101)   1313 CD 29 13    		CALL cvtUN	;
102)   1316 79          		LD A, C	;
103)   1317 CD 2D 13    		CALL cvtLN	;
104)   131A 7C          		LD A, H	;
105)   131B CD 29 13    		CALL cvtUN	;
106)   131E 7C          		LD A, H	;
107)   131F CD 2D 13    		CALL cvtLN	;
108)   1322 7D          		LD A, L	;
109)   1323 CD 29 13    		CALL cvtUN	;
110)   1326 7D          		LD A, L	;
111)   1327 18 04       		JR cvtLN	;
113)   1329 1F          		RRA ; move upper nibble into lower nibble	; move upper nibble into lower nibble
114)   132A 1F          		RRA	;
115)   132B 1F          		RRA	;
116)   132C 1F          		RRA	;
118)   132D E6 0F       		AND  0Fh ; isolate lower nibble	; isolate lower nibble
119)   132F C6 90       		ADD A, 90h ; old trick	; old trick
120)   1331 27          		DAA ; for converting	; for converting
121)   1332 CE 40       		ADC A, 40h ; one nibble	; one nibble
122)   1334 27          		DAA ; to hex ASCII	; to hex ASCII
123)   1335 12          		LD (DE), A	;
124)   1336 13          		INC DE	;
125)   1337 C9          		RET	;
  9)   8300 00          		    @FLAGS		 DEFS	1		; Flags: B7=ESC PRESSED, B6=ESC DISABLED	; Flags: B7=ESC PRESSED, B6=ESC DISABLED
 10)   8301 00 00       		    @FCOLOR   DEFW 0 ;FOREGROUND COLOR	;FOREGROUND COLOR
 11)   8303 00 00       		    @BCOLOR   DEFW 0 ;BACKGROUND COLOR	;BACKGROUND COLOR
 12)   8305 00          		    @CURSORX  DEFB 0    ;0-79	;0-79
 13)   8306 00          		    @CURSORY  DEFB 0    ;0-47	;0-47
 16)   8307 00          		    @LASTCHAR DEFB 0; 	;
 17)   8308 00 00       		    @EDPTR    DEFW 0	;
 18)   830A 00          		    @OPTVAL   DEFB 0	;
 19)   830B 00          		    @INKEY    DEFB 0	;
 20)   830C 00          		    @FCOLSEL  DEFB 0    ; FORECOLOR SELECTED	; FORECOLOR SELECTED
 21)   830D 00          		    @BCOLSEL  DEFB 0    ; BACKCOLOR SELECTED	; BACKCOLOR SELECTED
 22)   830E 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   8312 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   8316 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   831A 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   831E 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   8322 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   8326 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   832A 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 23)   832E 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   8332 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   8336 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   833A 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   833E 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   8342 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   8346 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 23)   834A 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 25)   834E 00          		    @FFSTAT    DEFB 0  ;FOR OUTPUT FLIP FLOPS DEVEPR, DEVKBD	;FOR OUTPUT FLIP FLOPS DEVEPR, DEVKBD
 26)   834F 00          			  @KEYCTR   DEFB 0		;FOR USB KEYBOARD 	;FOR USB KEYBOARD
 27)   8350 00          			  @SERERR 	DEFB 0;	;
 28)   8351 00          			  @SERER2 	DEFB 0		;AT RAM ADDRESS	;AT RAM ADDRESS
 29)   8352 00          			  @DISPCT   DEFB 0 	;	;
 30)   8353 00          			  @LCDCX 	  DEFB 0		;DB 0		;DISPLAY X POS (0..F  FOR 1..16)	;DB 0		;DISPLAY X POS (0..F  FOR 1..16)
 31)   8354 00          			  @LCDCY 	  DEFB 0 	;DB 0		;DISPLAY Y POS (0 OR 1 FOR LINE 1 AND 2)	;DB 0		;DISPLAY Y POS (0 OR 1 FOR LINE 1 AND 2)
 32)   8355 00 00       			  @PRGEX	  DEFW 0 	;2 BYTES	;2 BYTES
 33)   8357 00          			  @TVSTAT	  DEFB 0 	;1 BYTE	;1 BYTE
 34)   8358 00 00 00 00 		    @MYNUM	  DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 34)   835C 00 00 00 00 		    @MYNUM	  DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 34)   8360 00 00 00 00 		    @MYNUM	  DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
 34)   8364 00          		    @MYNUM	  DEFS 13 ;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED    	;10CHARS MESSAGE FOR NUMBER AND 3 TERMINATED
