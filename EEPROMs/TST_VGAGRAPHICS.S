ORG $C000



INCLUDE MYOS_2_0000.SYM

		

		CALL VGA_SETLOWGR	;SET HIGH RES GRAPHICS
		CALL TST1
		JR NX1
		CALL TESTGRAPH

NX1:		LD HL,MES
		CALL RS_TXT
		CALL RS_RX		;WAIT FOR A KEY FROM SERIAL
		CALL VGA_SETHITX	;SET HIGH RES TEXT
		JP 4

MES DEFM "PRESS A KEY!"
	DB 0


TST1:		LD BC,15
		LD HL,8
TNX2:		PUSH BC				
		LD A,C
		LD BC,180
		LD DE,10
		EX AF,AF'
TNX1:		EX AF,AF'
		PUSH BC
		PUSH HL
		PUSH DE
		PUSH AF
		CALL VGA_PLTPXL32
		POP AF
		POP DE
		POP HL
		POP BC		
		INC DE		;INC Y
		DEC BC
		EX AF,AF'
		LD A,B
		OR C
		JR NZ,TNX1
		POP BC
		DEC BC				
		INC HL		;INC X
		LD A,B
		OR C
		JR NZ,TNX2
		
		RET


TESTGRAPH:	LD BC,50
THG_NXT:	PUSH BC
		CALL RND8		;GET A NUMBER 0-255 TO A
		LD H,0
		LD L,A			;X=RAND
THG_NXT2:	CALL RND8		;GET A NUMBER 0-255 TO A
		LD D,0
		LD E,A			;Y=RAND
		CP 200
		JR NC,THG_NXT2
		CALL RND8
		AND $0F
		;LD A,5			;SET COLOR
		CALL VGA_PLTPXL	;
		POP BC
		DEC BC
		LD A,B
		OR C
		JR NZ,THG_NXT
		RET





