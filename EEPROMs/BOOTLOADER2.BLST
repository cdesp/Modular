 55)   0000 C3 74 00    			JP START	;
 56)   0003 C3 12 00    			JP GETKEY		;CALL HERE FROM NB ROM TO FIND THE GTNBKEY  $8004	;CALL HERE FROM NB ROM TO FIND THE GTNBKEY  $8004
 57)   0006 C3 24 00    			JP RSTX 		; CALL HERE FROM NB TO FIND SERIAL TRASMIT  $8007	; CALL HERE FROM NB TO FIND SERIAL TRASMIT  $8007
 58)   0009 C3 28 00    			JP RSRX			; CALL HERE FROM NB TO FIND SERIAL RECEIVE  $800A	; CALL HERE FROM NB TO FIND SERIAL RECEIVE  $800A
 59)   000C C3 2C 00    			JP NBSTLCD 		;CALL HERE FROM NB TO FIND THE NBSETLCD $800D	;CALL HERE FROM NB TO FIND THE NBSETLCD $800D
 60)   000F C3 CB 00    			JP MENU	;
 62)   0012 E5          		GETKEY: 	PUSH HL	;
 63)   0013 D5          			PUSH DE	;
 64)   0014 C5          			PUSH BC	;
 65)   0015 CD 15 0C    		RGT:	CALL GTNBKEY	;KEY PRESSED	;KEY PRESSED
 74)   0018 C1          			POP BC	;
 75)   0019 D1          		 	POP DE 	;
 76)   001A E1          		 	POP HL	;
 77)   001B FE 00       		 	CP 0				;CHECK IF INVALID KEY	;CHECK IF INVALID KEY
 78)   001D C0          		 	RET NZ 								;
 79)   001E CB B6       		 	RES KDATA (HL)							 ; KEY INVALID RESET KDATA TEST BIT	; KEY INVALID RESET KDATA TEST BIT
 80)   0020 23          		  	INC HL 			;GET TO THE LAST VALID KEY	;GET TO THE LAST VALID KEY
 81)   0021 7E          			LD A,(HL)	;
 82)   0022 2B          			DEC HL  		;
 83)   0023 C9          		 	RET		;
 85)   0024 CD E6 03    		RSTX: 	CALL RS_TX	;
 86)   0027 C9          			RET	;
 88)   0028 CD FF 03    		RSRX:	CALL RS_RX	;
 89)   002B C9          			RET		;
 95)   002C D5          		NBSTLCD: PUSH DE	;
 96)   002D 42          			LD B,D		;TOTAL CHARS	;TOTAL CHARS
 97)   002E 05          			DEC B	;
 98)   002F 05          			DEC B		;SKIP 2	;SKIP 2
 99)   0030 11 11 00    			LD DE,17	;START FROM THE END	;START FROM THE END
100)   0033 19          			ADD HL,DE				;
101)   0034 AF          			XOR A	;
102)   0035 11 05 90    			LD DE,LCDCX	;LCD POSITION	;LCD POSITION
103)   0038 12          			LD (DE),A							;
104)   0039 13          			INC DE	;
105)   003A 12          			LD (DE),A	;
106)   003B CD 62 0B    			CALL LCDLIN	;SET LCD TO LCDCX,LCDCY															;SET LCD TO LCDCX,LCDCY
107)   003E 1B          			DEC DE		;POSITION ON LCDCX	;POSITION ON LCDCX
108)   003F 0E 00       			LD C,0		;LCD POSITION COUNT		;LCD POSITION COUNT
109)   0041 7E          		NBSETLP:	LD A,(HL)		;
110)   0042 CB 7F       			BIT 7,A		;CHECK IF CURSOR HERE	;CHECK IF CURSOR HERE
111)   0044 28 06       			JR Z,NBNXT	;
112)   0046 F5          			PUSH AF	;
113)   0047 79          			LD A,C	;
114)   0048 12          			LD (DE),A	;POSITION CURSOR	;POSITION CURSOR
115)   0049 F1          			POP AF	;
116)   004A CB BF       			RES 7,A		;CLEAR CHAR FROM CURSOR INFO	;CLEAR CHAR FROM CURSOR INFO
117)   004C CD 26 0B    		NBNXT:	CALL LCDCHR	;OUTPUT CHAR TO LCD	;OUTPUT CHAR TO LCD
118)   004F 2B          			DEC HL	;
119)   0050 0C          			INC C	;
120)   0051 10 EE       			DJNZ NBSETLP	;LOOP NEXT CHAR	;LOOP NEXT CHAR
121)   0053 CD 62 0B    			CALL LCDLIN	;POSITION CURSOR	;POSITION CURSOR
122)   0056 D1          			POP DE	;
123)   0057 C9          			RET	;
127)   0058 F5          		SOUTAS:	PUSH AF  	;SERIAL PRINT ASCII IN DECIMAL	;SERIAL PRINT ASCII IN DECIMAL
128)   0059 26 00       			LD H,0	;
129)   005B 6F          			LD L,A	;
130)   005C 11 00 95    			LD DE,MYNUM	;
131)   005F CD 27 0E    			CALL OUTASC	;
133)   0062 3E 0A       			LD A,10	;
134)   0064 12          			LD (DE),A	;
135)   0065 13          			INC DE	;
136)   0066 3E 0D       			LD A,13	;
137)   0068 12          			LD (DE),A	;
138)   0069 13          			INC DE	;
139)   006A AF          			XOR A	;
140)   006B 12          			LD (DE),A	;
142)   006C 21 00 95    			LD HL,MYNUM	;
143)   006F CD F5 03    			CALL RS_TXT	;
144)   0072 F1          			POP AF	;
145)   0073 C9          			RET	;
148)   0074 F3          		START:	DI	;
156)   0075 06 05       		CN1:	LD B,5	;
157)   0077 0E 00       		AGN1:	LD C,0	;
158)   0079 3E 00       			LD A,0	;
159)   007B ED 79       			OUT (C),A	;
160)   007D 0E 00       			LD C,0	;
161)   007F 3E FF       			LD A,255	;
162)   0081 ED 79       			OUT (C),A	;
163)   0083 10 F2       			DJNZ AGN1	;
168)   0085 11 01 00    			LD DE,1	;
169)   0088 3E 00       			LD A,0		;WRITE 0	;WRITE 0
170)   008A 4F          			LD C,A	;
171)   008B 21 00 90    			LD HL,RAMAD		;
172)   008E 06 08       			LD B,8	;
173)   0090 77          		AGN2:	LD (HL),A	;
174)   0091 4E          			LD C,(HL)	;
175)   0092 B9          			CP C	;
176)   0093 C2 AD 00    			JP NZ, ERR	;
177)   0096 19          			ADD HL,DE	;
178)   0097 C6 20       			ADD A,32	;WRITE +32	;WRITE +32
179)   0099 4F          			LD C,A	;
180)   009A 10 F4       			DJNZ AGN2	;
182)   009C 06 05       			LD B,5	;
183)   009E 0E 08       		AGN3:	LD C,00001000B  ;LLH ON 138 Y1 OUT	;LLH ON 138 Y1 OUT
184)   00A0 3E 40       			LD A,64	;
185)   00A2 ED 79       			OUT (C),A	;
186)   00A4 C6 80       			ADD A,128	;
187)   00A6 ED 79       			OUT (C),A		;
188)   00A8 10 F4       			DJNZ AGN3  	; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8	; SIGNAL ALL OK CONTINUOUS 10 TIMES ON PORT 8
189)   00AA C3 B6 00    			JP BOOT	;
192)   00AD 0E 38       		ERR:	LD C,00111000B  ;HHH ON 138 Y7 OUT	;HHH ON 138 Y7 OUT
193)   00AF 3E 40       			LD A,64	;
194)   00B1 ED 79       			OUT (C),A	;
196)   00B3 C3 AD 00    			JP ERR 	;DO AGAIN PORT 1	;DO AGAIN PORT 1
198)   00B6 ED 56       		BOOT:	IM 1 	;
199)   00B8 F3          			DI	;
202)   00B9 31 F0 FF    			LD SP,STACKP	;
215)   00BC CD CD 03    			CALL RS_INI	;RS232 INITIALIZE	;RS232 INITIALIZE
216)   00BF 21 8F 03    			LD HL,STR00	;
217)   00C2 CD F5 03    			CALL RS_TXT	;
220)   00C5 21 7C 03    			LD HL,STRSCR		;
221)   00C8 CD F5 03    			CALL RS_TXT	;
245)   00CB 21 37 03    			LD HL,STRMN	;
246)   00CE CD F5 03    			CALL RS_TXT	;OUTPUT MENU COMMANDS AT RS232		;OUTPUT MENU COMMANDS AT RS232
247)   00D1 21 A5 03    			LD HL,STR01	;
248)   00D4 CD F5 03    			CALL RS_TXT	;OUTPUT WAITING AT RS232	;OUTPUT WAITING AT RS232
261)   00D7 CD 0F 01    			CALL GET_CHAR	;TAKE A CHAR FROM RS232 OR PS2 KEYB	;TAKE A CHAR FROM RS232 OR PS2 KEYB
264)   00DA FE 55       			CP 'U'		;UPLOAD PROGRAM	;UPLOAD PROGRAM
265)   00DC CC 9E 01    			CALL Z, UPLOD	;
266)   00DF FE 58       			CP 'X'	;
267)   00E1 CA 81 01    			JP Z,EXEC	;
268)   00E4 FE 54       			CP 'T'	;
269)   00E6 CC 57 02    			CALL Z,RSTST	;
270)   00E9 FE 53       			CP 'S'	;
271)   00EB CC 89 02    			CALL Z,TXTSCR	;
272)   00EE FE 49       			CP 'I'	;
273)   00F0 CC ED 01    			CALL Z,UPLOD2	;
274)   00F3 FE 59       			CP 'Y'	;
275)   00F5 CC 6D 02    			CALL Z,RSTST2	;
276)   00F8 FE 48       			CP 'H'	;
277)   00FA CC 7C 02    			CALL Z,XMTST	;
278)   00FD FE 4A       			CP 'J'	;
279)   00FF CC 1F 02    			CALL Z,DNLOD	;
280)   0102 FE 4B       			CP 'K'	;
281)   0104 CC 6C 04    			CALL Z,LCD_INIT	;
282)   0107 FE 4C       			CP 'L'	;
283)   0109 CC 7F 0A    			CALL Z,LCD_TEST	;
285)   010C C3 CB 00    			JP MENU	;
289)   010F AF          		GET_CHAR:	XOR A	;
292)   0110 CD 15 04    			CALL RS_KEYRD	;CHAR IN RS232?	;CHAR IN RS232?
293)   0113 28 04       			JR Z,GT_TST2	;
294)   0115 CD FF 03    			CALL RS_RX	; GET THAT CHAR	; GET THAT CHAR
295)   0118 C9          			RET	;
297)   0119 CD 0A 0C    		GT_TST2	CALL PS2ISK  	;A=1 IF WE HAVE A KEY ELSE 0	;A=1 IF WE HAVE A KEY ELSE 0
298)   011C FE 00       			CP 0	;
299)   011E 28 EF       			JR Z,GET_CHAR	;RECHECK	;RECHECK
300)   0120 CD 1F 0C    			CALL GTKEY	;GET THE KEY	;GET THE KEY
301)   0123 FE 00       			CP 0	;
302)   0125 CA 0F 01    			JP Z GET_CHAR	;
303)   0128 CD CA 0C    			CALL PS2LOK	;TRANSLATE IT	;TRANSLATE IT
307)   012B F5          			PUSH AF	;
308)   012C CD E6 03    			CALL RS_TX	;
309)   012F 3E 0A       			LD A,10	;
310)   0131 CD E6 03    			CALL RS_TX	;
311)   0134 3E 0D       			LD A,13	;
312)   0136 CD E6 03    			CALL RS_TX	;
313)   0139 F1          			POP AF	;
314)   013A C9          			RET	;
316)   013B CD 8A 0B    		GONB	CALL LCDLN2	;
317)   013E 21 4D 01    			LD HL,DSPMES	;
318)   0141 CD 30 0B    			CALL LCDTXT	;
319)   0144 CD A8 0B    			CALL LCDCOF	;CURSOR OFF	;CURSOR OFF
320)   0147 CD C9 0B    			CALL LCDBON	;BLINK ON	;BLINK ON
321)   014A C3 15 A0    			JP $A015	;
323)   014D 3C 3C 20 43 		DSPMES	DEFM "<< CDESP 2016 >>"	;
323)   0151 44 45 53 50 		DSPMES	DEFM "<< CDESP 2016 >>"	;
323)   0155 20 32 30 31 		DSPMES	DEFM "<< CDESP 2016 >>"	;
323)   0159 36 20 3E 3E 		DSPMES	DEFM "<< CDESP 2016 >>"	;
324)   015D 00          			DB 0	;
326)   015E E5          		TVON:	PUSH HL	;
327)   015F 21 09 90    			LD HL,TVSTAT	;
328)   0162 CB D6       			SET 2,(HL)	;
329)   0164 E1          			POP HL	;
330)   0165 18 0D       			JR RESTV  		;
333)   0167 E5          		TVOFF:  PUSH HL	;
334)   0168 21 09 90    			LD HL,TVSTAT	;
335)   016B CB 96       			RES 2,(HL)	;
336)   016D E1          			POP HL	;
337)   016E 18 04       			JR RESTV		;
340)   0170 AF          		TVOFTM	XOR A	;TV OFF	;TV OFF
341)   0171 D3 07       			OUT (7),A	;
342)   0173 C9          			RET	;
344)   0174 E5          		RESTV:	PUSH HL	;
345)   0175 21 09 90    			LD HL,TVSTAT	;
346)   0178 7E          			LD A,(HL)	;
347)   0179 D3 07       			OUT (7),A	;
348)   017B 3E 05       		   	LD A,5	;
349)   017D D3 09       			OUT (9),A ; SET DISPLAY ADDRESS	; SET DISPLAY ADDRESS
350)   017F E1          			POP HL	;
351)   0180 C9          			RET	;
353)   0181 CD 40 0B    		EXEC:	CALL LCDCLS	;
354)   0184 CD 8A 0B    			CALL LCDLN2	;
355)   0187 21 0A 03    			LD HL,SPRGX	;
356)   018A CD 30 0B    			CALL LCDTXT		;
357)   018D CD 82 0B    			CALL LCDLN1	;
359)   0190 3E 05       			LD A,5	;
360)   0192 CD FE 0D    			CALL SCPRN				;
362)   0195 11 07 90    			LD DE,PRGEX	;
363)   0198 1A          			LD A,(DE)	;
364)   0199 6F          			LD L,A	;
365)   019A 13          			INC DE	;
366)   019B 1A          			LD A,(DE)	;
367)   019C 67          			LD H,A	;
368)   019D E9          			JP (HL)	;
370)   019E CD 70 01    		UPLOD: 	CALL TVOFTM	;
371)   01A1 21 FD 02    			LD HL,DATST	;
372)   01A4 CD 8A 0B    			CALL LCDLN2	;
373)   01A7 CD 30 0B    			CALL LCDTXT	;
375)   01AA CD FF 03    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
376)   01AD 6F          			LD L,A	;
377)   01AE CD FF 03    			CALL RS_RX	;
378)   01B1 67          			LD H,A	;
379)   01B2 CD FF 03    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
380)   01B5 4F          			LD C,A	;
381)   01B6 CD FF 03    			CALL RS_RX	;
382)   01B9 47          			LD B,A	;
384)   01BA 11 07 90    			LD DE,PRGEX 	;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
385)   01BD 7D          			LD A,L	;
386)   01BE 12          			LD (DE),A	;
387)   01BF 13          			INC DE	;
388)   01C0 7C          			LD A,H	;
389)   01C1 12          			LD (DE),A	;
391)   01C2 FE 80       			CP $80	;
392)   01C4 28 02       			JR Z,ROMWR	;
393)   01C6 38 02       			JR C,NORWR	;
395)   01C8 D3 7C       		ROMWR	OUT (124),A 	;SET ROM WRITABLE = '0'	;SET ROM WRITABLE = '0'
400)   01CA E5          		NORWR:	PUSH HL	;
401)   01CB CD FF 03    		NXB:	CALL RS_RX	;
402)   01CE 77          			LD (HL),A	;
403)   01CF 23          			INC HL	;
404)   01D0 0B          			DEC BC	;
405)   01D1 78          			LD A,B	;
406)   01D2 B1          			OR C	;
407)   01D3 20 F6       			JR NZ,NXB	;LOOP ALL BYTES		;LOOP ALL BYTES
409)   01D5 D3 7D       		  	OUT (125),A 	;SET ROM NON WRITABLE ='1'	;SET ROM NON WRITABLE ='1'
411)   01D7 21 EE 02    			LD HL,DATTR	;
412)   01DA CD 40 0B    			CALL LCDCLS	;
413)   01DD CD 30 0B    			CALL LCDTXT	;
414)   01E0 3E 05       			LD A,5		;
415)   01E2 CD FE 0D    			CALL SCPRN				;
416)   01E5 CD 12 0E    			CALL DELAY	;
418)   01E8 E1          			POP HL	;
421)   01E9 CD 74 01    			CALL RESTV	;
423)   01EC C9          			RET	;
427)   01ED CD 70 01    		UPLOD2:	CALL TVOFTM	;
428)   01F0 21 FD 02    			LD HL,DATST	;
429)   01F3 CD 8A 0B    			CALL LCDLN2	;
430)   01F6 CD 30 0B    			CALL LCDTXT	;
432)   01F9 CD FF 03    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
433)   01FC 6F          			LD L,A	;
434)   01FD CD FF 03    			CALL RS_RX	;
435)   0200 67          			LD H,A	;
436)   0201 CD FF 03    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
437)   0204 4F          			LD C,A	;
438)   0205 CD FF 03    			CALL RS_RX	;
439)   0208 47          			LD B,A	;
441)   0209 11 07 90    			LD DE,PRGEX 	;SAVE TO PRGEX THE PROG EXEC ADDR=HL	;SAVE TO PRGEX THE PROG EXEC ADDR=HL
442)   020C 7D          			LD A,L	;
443)   020D 12          			LD (DE),A	;
444)   020E 13          			INC DE	;
445)   020F 7C          			LD A,H	;
446)   0210 12          			LD (DE),A	;
448)   0211 CD FF 03    		NXB2:	CALL RS_RX	;
449)   0214 77          			LD (HL),A	;
450)   0215 23          			INC HL	;
451)   0216 0B          			DEC BC	;
452)   0217 78          			LD A,B	;
453)   0218 B1          			OR C	;
454)   0219 20 F6       			JR NZ,NXB2	;LOOP ALL BYTES	  		;LOOP ALL BYTES
456)   021B CD 74 01    			CALL RESTV	;
458)   021E C9          			RET	;
460)   021F CD 70 01    		DNLOD:	CALL TVOFTM	;
465)   0222 CD FF 03    			CALL RS_RX 	;HL HAS RAM ADDRESS	;HL HAS RAM ADDRESS
466)   0225 6F          			LD L,A	;
467)   0226 CD FF 03    			CALL RS_RX	;
468)   0229 67          			LD H,A	;
469)   022A CD FF 03    			CALL RS_RX	;BC HAS TOTAL DATA TO BE SEND	;BC HAS TOTAL DATA TO BE SEND
470)   022D 4F          			LD C,A	;
471)   022E CD FF 03    			CALL RS_RX	;
472)   0231 47          			LD B,A	;
474)   0232 7E          		NXB3:	LD A,(HL)	;
475)   0233 CD E6 03    			CALL RS_TX	;SEND BYTE	;SEND BYTE
476)   0236 23          			INC HL	;
477)   0237 0B          			DEC BC	;
478)   0238 78          			LD A,B	;
479)   0239 B1          			OR C	;
480)   023A 20 F6       			JR NZ,NXB3	;LOOP ALL BYTES	  		;LOOP ALL BYTES
482)   023C CD 74 01    			CALL RESTV	;
484)   023F C9          			RET	;
487)   0240 DB 47       			IN A,(PS2IN)	;
488)   0242 FE 00       			CP 0	;
489)   0244 28 FA       			JR Z,PS2AGN	;
490)   0246 FE FF       			CP 255	;
491)   0248 28 F6       			JR Z,PS2AGN	;
492)   024A FE 01       			CP 1	;
493)   024C CA 40 02    			JP Z, PS2AGN	;
495)   024F CD E6 03    			CALL RS_TX	;
496)   0252 CD 1F 0E    			CALL DEL2	;
498)   0255 18 E9       			JR PS2AGN	;
501)   0257 00          		RSTST:	NOP	;GET A KEY FROM RS232	;GET A KEY FROM RS232
502)   0258 06 0A       			LD B,10	;
503)   025A C5          		TEN:	PUSH BC	;
504)   025B CD FF 03    			CALL RS_RX	;
506)   025E CD E6 03    			CALL RS_TX	;SEND BACK THE CHAR	;SEND BACK THE CHAR
508)   0261 3E 20       			LD A,' '	;
510)   0263 3E 52       			LD A,'R'	;
513)   0265 CD 1F 0E    			CALL DEL2	;
515)   0268 C1          			POP BC	;
516)   0269 10 EF       			DJNZ TEN	;
518)   026B AF          			XOR A	;
519)   026C C9          			RET	;
521)   026D 00          		RSTST2:	NOP	;TEST RECEIVING AND SENDING 255 BYTES	;TEST RECEIVING AND SENDING 255 BYTES
522)   026E 06 FF       			LD B,255	;
523)   0270 C5          		TEN2:	PUSH BC	;
524)   0271 CD FF 03    			CALL RS_RX	;
526)   0274 CD E6 03    			CALL RS_TX	;SEND BACK THE CHAR			;SEND BACK THE CHAR
528)   0277 C1          			POP BC	;
529)   0278 10 F6       			DJNZ TEN2	;
530)   027A AF          			XOR A	;
531)   027B C9          			RET	;
534)   027C 00          		XMTST:	NOP	;TEST XMIT ALL 8 BITS	;TEST XMIT ALL 8 BITS
535)   027D 06 FF       			LD B,255	;
536)   027F C5          		TEN3:	PUSH BC	;
537)   0280 78          			LD A,B	;
538)   0281 CD E6 03    			CALL RS_TX	;SEND  THE BYTE	;SEND  THE BYTE
539)   0284 C1          			POP BC	;
540)   0285 10 F8       			DJNZ TEN3	;
541)   0287 AF          			XOR A	;
542)   0288 C9          			RET	;
546)   0289 C9          		TXTSCR: RET	;
552)   028A 55 49 3A 55 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   028E 50 2C 58 3A 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   0292 52 55 4E 2C 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   0296 54 59 48 3A 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   029A 52 53 2C 53 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   029E 3A 44 49 53 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02A2 50 2C 4E 4D 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02A6 3A 4E 42 52 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02AA 4F 4D 2C 43 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02AE 56 3A 54 56 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02B2 2C 20 4A 3A 		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
552)   02B6 44 4E       		SMENU	DEFM "UI:UP,X:RUN,TYH:RS,S:DISP,NM:NBROM,CV:TV, J:DN"	;
553)   02B8 00          			DB 0	;
556)   02B9 4C 43 44 20 		STR0	DEFM "LCD INITIALIZED"	;
556)   02BD 49 4E 49 54 		STR0	DEFM "LCD INITIALIZED"	;
556)   02C1 49 41 4C 49 		STR0	DEFM "LCD INITIALIZED"	;
556)   02C5 5A 45 44    		STR0	DEFM "LCD INITIALIZED"	;
557)   02C8 00          			DB 0	;
559)   02C9 52 53 32 33 		STR1	DEFM "RS232 INIT"	;
559)   02CD 32 20 49 4E 		STR1	DEFM "RS232 INIT"	;
559)   02D1 49 54       		STR1	DEFM "RS232 INIT"	;
560)   02D3 00          			DB 0	;
562)   02D4 50 52 4F 47 		STR2	DEFM "PROGRAM HALTED"	;
562)   02D8 52 41 4D 20 		STR2	DEFM "PROGRAM HALTED"	;
562)   02DC 48 41 4C 54 		STR2	DEFM "PROGRAM HALTED"	;
562)   02E0 45 44       		STR2	DEFM "PROGRAM HALTED"	;
563)   02E2 00          			DB 0	;
565)   02E3 57 41 49 54 		STR02	DEFM "WAITING..."	;
565)   02E7 49 4E 47 2E 		STR02	DEFM "WAITING..."	;
565)   02EB 2E 2E       		STR02	DEFM "WAITING..."	;
566)   02ED 00          			DB 0	;
568)   02EE 50 52 47 20 		DATTR	DEFM "PRG TRANSFERED"	;
568)   02F2 54 52 41 4E 		DATTR	DEFM "PRG TRANSFERED"	;
568)   02F6 53 46 45 52 		DATTR	DEFM "PRG TRANSFERED"	;
568)   02FA 45 44       		DATTR	DEFM "PRG TRANSFERED"	;
569)   02FC 00          			DB 0	;
571)   02FD 52 45 43 45 		DATST	DEFM "RECEIVING..."	;
571)   0301 49 56 49 4E 		DATST	DEFM "RECEIVING..."	;
571)   0305 47 2E 2E 2E 		DATST	DEFM "RECEIVING..."	;
572)   0309 00          			DB 0		;
574)   030A 50 52 47 20 		SPRGX	DEFM "PRG EXECUTE"	;
574)   030E 45 58 45 43 		SPRGX	DEFM "PRG EXECUTE"	;
574)   0312 55 54 45    		SPRGX	DEFM "PRG EXECUTE"	;
575)   0315 00          			DB 0	;
577)   0316 49 4D 41 47 		STIMG	DEFM "IMAGE COPY"	;
577)   031A 45 20 43 4F 		STIMG	DEFM "IMAGE COPY"	;
577)   031E 50 59       		STIMG	DEFM "IMAGE COPY"	;
578)   0320 00          			DB 0	;
580)   0321 4E 45 57 42 		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
580)   0325 52 41 49 4E 		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
580)   0329 20 53 43 52 		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
580)   032D 45 45 4E 20 		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
580)   0331 52 45 41 44 		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
580)   0335 59          		TXTMES	DEFM "NEWBRAIN SCREEN READY"	;
581)   0336 00          			DB 0	;
585)   0337 55 3A 55 50 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   033B 2C 58 3A 52 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   033F 55 4E 2C 54 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   0343 3A 52 53 2C 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   0347 53 3A 44 49 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   034B 53 50 2C 4E 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   034F 3A 4E 42 52 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   0353 4F 4D 2C 43 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   0357 3A 54 56 4F 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   035B 4E 2C 56 3A 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   035F 54 56 4F 46 		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
585)   0363 46          		STRMN	DEFM "U:UP,X:RUN,T:RS,S:DISP,N:NBROM,C:TVON,V:TVOFF"	;
586)   0364 0A 0D 00    			DB 10,13,0	;
589)   0367 4E 45 57 42 		STRBT	DEFM "NEWBRAIN BOOTED OK"	;
589)   036B 52 41 49 4E 		STRBT	DEFM "NEWBRAIN BOOTED OK"	;
589)   036F 20 42 4F 4F 		STRBT	DEFM "NEWBRAIN BOOTED OK"	;
589)   0373 54 45 44 20 		STRBT	DEFM "NEWBRAIN BOOTED OK"	;
589)   0377 4F 4B       		STRBT	DEFM "NEWBRAIN BOOTED OK"	;
590)   0379 0A 0D 00    			DB 10,13,0	;
592)   037C 43 4C 45 41 		STRSCR	DEFM "CLEARING SCREEN."	;
592)   0380 52 49 4E 47 		STRSCR	DEFM "CLEARING SCREEN."	;
592)   0384 20 53 43 52 		STRSCR	DEFM "CLEARING SCREEN."	;
592)   0388 45 45 4E 2E 		STRSCR	DEFM "CLEARING SCREEN."	;
593)   038C 0A 0D 00    			DB 10,13,0	;
595)   038F 0A 0D       		STR00	DB 10,13	;
596)   0391 52 53 32 33 			DEFM "RS232 INITIALIZED"	;
596)   0395 32 20 49 4E 			DEFM "RS232 INITIALIZED"	;
596)   0399 49 54 49 41 			DEFM "RS232 INITIALIZED"	;
596)   039D 4C 49 5A 45 			DEFM "RS232 INITIALIZED"	;
596)   03A1 44          			DEFM "RS232 INITIALIZED"	;
597)   03A2 0A 0D 00    			DB 10,13,0	;
599)   03A5 0A 0D       		STR01	DB 10,13	;
600)   03A7 57 41 49 54 			DEFM "WAITING..."	;
600)   03AB 49 4E 47 2E 			DEFM "WAITING..."	;
600)   03AF 2E 2E       			DEFM "WAITING..."	;
601)   03B1 0A 0D 00    			DB 10,13,0	;
602)   03B4 00          			DB 0	;
604)   03B5 0A 0D       		STR06	DB 10,13	;
605)   03B7 4B 45 59 20 			DEFM "KEY PRESSED"	;
605)   03BB 50 52 45 53 			DEFM "KEY PRESSED"	;
605)   03BF 53 45 44    			DEFM "KEY PRESSED"	;
606)   03C2 0A 0D 00    			DB 10,13,0	;
607)   03C5 00          			DB 0	;
613)   03C6 80 00 80 00 			DB 128,0,128,0,255,255	;
613)   03CA FF FF       			DB 128,0,128,0,255,255	;
614)   03CC 00          		IMAGE	DB 0	;
 14)   03CD 	            			RBR EQU DEVSER+0	;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)	;RECEIVER BUFFER REGISTER (READ ONLY) (DLAB = 0)
 15)   03CD 	            			THR EQU DEVSER+0	;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)	;TRANSMITER HOLDING REGISTER (WRITE ONLY) (DLAB = 0)
 16)   03CD 	            			IER EQU DEVSER+1	;INTERRUPT ENABLE REGISTER (DLAB = 0)	;INTERRUPT ENABLE REGISTER (DLAB = 0)
 21)   03CD 	            			IIR EQU DEVSER+2	;INTERRUPT IDENT. REGISTER (READ ONLY)	;INTERRUPT IDENT. REGISTER (READ ONLY)
 26)   03CD 	            			FCR EQU DEVSER+2	;FIFO CONTROL REGISTER (WRITE ONLY)	;FIFO CONTROL REGISTER (WRITE ONLY)
 34)   03CD 	            			LCR EQU DEVSER+3	;LINE CONTROL REGISTER	;LINE CONTROL REGISTER
 42)   03CD 	            			MCR EQU DEVSER+4	;MODEM CONTROL REGISTER 	;MODEM CONTROL REGISTER
 43)   03CD 	            			LSR EQU DEVSER+5	;LINE STATUS REGISTER	;LINE STATUS REGISTER
 52)   03CD 	            			MSR EQU DEVSER+6	;MODEM STATUS REGISTER	;MODEM STATUS REGISTER
 53)   03CD 	            			SCR EQU DEVSER+7	;SCRATCH REGISTER	;SCRATCH REGISTER
 54)   03CD 	            			DLL EQU DEVSER+0	;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (LEAST SIGNIFICANT BYTE) (DLAB = 1)
 55)   03CD 	            			DLM EQU DEVSER+1	;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)	;DIVISOR LATCH (MOST SIGNIFICANT BYTE) (DLAB = 1)
 61)   03CD 3E 80       			LD      A,$80          	; Mask to set DLAB on	; Mask to set DLAB on
 62)   03CF D3 23       			OUT     (LCR),A         ; Send to LINe Control Register	; Send to LINe Control Register
 63)   03D1 3E 0C       			LD      A,12           ; Divisor of 12 = 9600 bps with 1.8432 MHz clock	; Divisor of 12 = 9600 bps with 1.8432 MHz clock
 68)   03D3 D3 20       			OUT     (DLL),A        	; Set LSB of divisor	; Set LSB of divisor
 69)   03D5 3E 00       			LD      A,00            ; This will be the MSB of the divisior	; This will be the MSB of the divisior
 70)   03D7 D3 21       			OUT     (DLM),A        	; Send to the MSB register	; Send to the MSB register
 71)   03D9 3E 03       			LD      A,$03          	; 8 bits, 1 stop, no parity (and clear DLAB)	; 8 bits, 1 stop, no parity (and clear DLAB)
 72)   03DB D3 23       			OUT     (LCR),A        	; Write new value to LCR	; Write new value to LCR
 74)   03DD 3E 00       		  LD A, 0								;
 75)   03DF D3 22       		  OUT 	(FCR),A						;//was commented	;//was commented
 76)   03E1 3E 00       			LD      A,$00          	; 5 A=0 Disable all INterrupts	; 5 A=0 Disable all INterrupts
 77)   03E3 D3 21       			OUT     (IER),A        	; Send to INterrupt Enable Register		; Send to INterrupt Enable Register
 78)   03E5 C9          			RET	;
 81)   03E6 CD EC 03    		RS_TX:	CALL    RSTXRD	;
 82)   03E9 D3 20       		        OUT     (THR),A	;
 84)   03EB C9          		        RET	;
 88)   03EC F5          		RSTXRD: PUSH    AF	;
 89)   03ED DB 25       		RSTXLP: IN      A,(LSR)        	; fetch the control register	; fetch the control register
 90)   03EF CB 6F       		        BIT     5,A             ; bit will be set if UART is ready	; bit will be set if UART is ready
 91)   03F1 28 FA       		        JR      Z,RSTXLP	;
 92)   03F3 F1          		        POP     AF	;
 93)   03F4 C9          		        RET			;
 96)   03F5 7E          		RS_TXT: LD A,(HL)	;
 97)   03F6 23          			INC HL		;
 98)   03F7 FE 00       			CP 0	;
 99)   03F9 C8          			RET Z	;
100)   03FA CD E6 03    		        CALL RS_TX	;
101)   03FD 18 F6       			JR RS_TXT	;
108)   03FF 3E 01       		RS_RX:  LD A,1					;ready to receive SIGNAL DSR 1	;ready to receive SIGNAL DSR 1
109)   0401 D3 24       		        OUT (MCR),A	;
110)   0403 CD 0C 04    						CALL    RSRXRD              	;
111)   0406 AF          		        XOR A						;NOT ready to receive SIGNAL DSR 0	;NOT ready to receive SIGNAL DSR 0
112)   0407 D3 24       		        OUT (MCR),A        	;
114)   0409 DB 20       						IN      A,(RBR)	;
115)   040B C9          		        RET	;
122)   040C F5          		RSRXRD: PUSH    AF	;
124)   040D DB 25       		RSRXLP: IN      A,(LSR)        	; fetch the conrtol register	; fetch the conrtol register
125)   040F CB 47       		        BIT     0,A             ; bit will be set if UART has data	; bit will be set if UART has data
126)   0411 28 FA       		        JR      Z,RSRXLP	;
127)   0413 F1          		        POP     AF	;
128)   0414 C9          		        RET			;
132)   0415 DB 25       		RS_KEYRD:IN      A,(LSR)        	; fetch the conrtol register	; fetch the conrtol register
133)   0417 CB 47       		         BIT     0,A             ; bit will be set if UART has data        	; bit will be set if UART has data
134)   0419 C9          		         RET		;
136)   041A F5          		SHLCD:	PUSH AF	;
138)   041B F1          			POP AF	;
140)   041C C9          			RET	;
144)   041D F5          		CHKERR: PUSH AF	;
145)   041E E5          			PUSH HL	;
146)   041F C5          			PUSH BC	;
147)   0420 DB 25       			IN A,(LSR) 		;FETCH LINE STATUS REGISTER	;FETCH LINE STATUS REGISTER
148)   0422 CB 67       			BIT 4,A	;
149)   0424 28 04       			JR Z,LBLPE	;
150)   0426 3E 42       			LD A,'B' ;$20		;BREAK	;$20		;BREAK
151)   0428 18 1A       			JR EXIT	;
152)   042A CB 57       		LBLPE:	BIT 2,A		;
153)   042C 28 04       			JR Z,LBLFE	;
154)   042E 3E 50       			LD A,'P' ;$40		;PARITY	;$40		;PARITY
155)   0430 18 12       			JR EXIT	;
156)   0432 CB 5F       		LBLFE:	BIT 3,A	;
157)   0434 28 04       			JR Z,LBLOE	;
158)   0436 3E 46       			LD A,'F' ;$60		;FRAME		;$60		;FRAME
159)   0438 18 0A       			JR EXIT	;
160)   043A CB 4F       		LBLOE:	BIT 1,A	;
161)   043C 28 04       			JR Z,LBLNE	;
162)   043E 3E 4F       			LD A,'O'  ;$80		;OVERRUN	;$80		;OVERRUN
163)   0440 18 02       			JR EXIT	;
164)   0442 3E 4E       		LBLNE:	LD A,'N'		;NO ERROR	;NO ERROR
165)   0444 21 02 90    		EXIT:	LD HL,SERERR	;
166)   0447 77          			LD (HL),A	;
168)   0448 C1          			POP BC	;
169)   0449 E1          			POP HL	;
170)   044A F1          			POP AF	;
171)   044B C9          			RET	;
 19)   044C 	            		       LCD_RS EQU DEVTFT;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS	;  ;PORT TO CONTROL RS PIN 17=cs+rs+low = COMMAND  A0 CONNECT TO RS
 20)   044C 	            		       LCD_CS EQU DEVTFT+1;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA	;  ;PORT TO CONTROL CS PIN 16=cs+rs_high  = DATA
 34)   044C CB 21       		      SLA C	;
 35)   044E CB 21       		      SLA C	;
 36)   0450 CB 21       		      SLA C	;
 37)   0452 41          		      LD B,C	;
 38)   0453 10 FE       		DEL0: DJNZ DEL0	;
 39)   0455 C9          		      RET   	;
 44)   0456 7B          		    LD A,E	;
 45)   0457 D3 11       		    OUT (LCD_CS),A	;
 51)   0459 7A          		    LD A,D  	;
 52)   045A D3 11       		    OUT (LCD_CS),A	;
 53)   045C C9          		    RET	;
 59)   045D 7A          		    LD A,D  	;
 60)   045E D3 10       		    OUT (LCD_RS),A	;
 61)   0460 C9          		    RET	;
 68)   0461 AF          		    XOR A	;
 69)   0462 D3 10       		    OUT (LCD_RS),A  ;RS LOW = COMMAND BYTE      	;RS LOW = COMMAND BYTE
 70)   0464 CD 59 04    		    CALL LCD_WR_BUS	;
 71)   0467 3E 01       		    LD A,1	;
 72)   0469 D3 10       		    OUT (LCD_RS),A  ;RS HIGH  = DATA BYTE	;RS HIGH  = DATA BYTE
 73)   046B C9          		    RET	;
 77)   046C 16 E2       		    LD D,0xE2         ;PLL multiplier, set PLL clock to 120M	;PLL multiplier, set PLL clock to 120M
 78)   046E CD 5D 04    		    CALL LCD_WR_COM   ;N=0x36 for 6.5M, 0x23 for 10M crystal	;N=0x36 for 6.5M, 0x23 for 10M crystal
 79)   0471 16 23       		    LD D,0x23 ;1E	;1E
 80)   0473 CD 59 04    		    CALL LCD_WR_DAT	;
 81)   0476 16 02       		    LD D,0x02	;
 82)   0478 CD 59 04    		    CALL LCD_WR_DAT	;
 83)   047B 16 54       		    LD D,0x54	;
 84)   047D CD 59 04    		    CALL LCD_WR_DAT	;
 85)   0480 16 E0       		    LD D,0xE0         ; PLL enable    	; PLL enable
 86)   0482 CD 5D 04    		    CALL LCD_WR_COM	;
 87)   0485 16 01       		    LD D,0x01	;
 88)   0487 CD 59 04    		    CALL LCD_WR_DAT	;
 89)   048A 06 0A       		    LD B,10        ;delay(10);	;delay(10);
 90)   048C CD 0C 0E    		    CALL DELAYMICRO	;
 91)   048F 16 E0       		    LD D,0xE0         ; PLL enable    	; PLL enable
 92)   0491 CD 5D 04    		    CALL LCD_WR_COM   	;
 93)   0494 16 03       		    LD D,0x03	;
 94)   0496 CD 59 04    		    CALL LCD_WR_DAT	;
 95)   0499 06 0A       		    LD B,10        ;delay(10);	;delay(10);
 96)   049B CD 0C 0E    		    CALL DELAYMICRO    	;
 98)   049E 16 01       		    LD D,0x01         ; software reset  	; software reset
 99)   04A0 CD 5D 04    		    CALL LCD_WR_COM   	;
100)   04A3 06 14       		    LD B,20       ;delay(20); MICROSECS	;delay(20); MICROSECS
101)   04A5 CD 0C 0E    		    CALL DELAYMICRO        	;
102)   04A8 16 E6       		    LD D,0xE6         ;PLL setting for PCLK, depends on resolution  	;PLL setting for PCLK, depends on resolution
103)   04AA CD 5D 04    		    CALL LCD_WR_COM           	;
104)   04AD 16 03       		    LD D,0x03	;
105)   04AF CD 59 04    		    CALL LCD_WR_DAT   	;
106)   04B2 16 33       		    LD D,0x33 ;FF	;FF
107)   04B4 CD 59 04    		    CALL LCD_WR_DAT       	;
108)   04B7 16 33       		    LD D,0x33 ;FF	;FF
109)   04B9 CD 59 04    		    CALL LCD_WR_DAT   	;
111)   04BC 16 B0       		    LD D,0xB0         ;LCD SPECIFICATION	;LCD SPECIFICATION
112)   04BE CD 5D 04    		    CALL LCD_WR_COM       	;
113)   04C1 16 20       		    LD D,0x20	;
114)   04C3 CD 59 04    		    CALL LCD_WR_DAT   	;
115)   04C6 16 00       		    LD D,0x00	;
116)   04C8 CD 59 04    		    CALL LCD_WR_DAT       	;
117)   04CB 16 03       		    LD D,0x03         ;Set HDP  799	;Set HDP  799
118)   04CD CD 59 04    		    CALL LCD_WR_DAT   	;
119)   04D0 16 1F       		    LD D,0x1F	;
120)   04D2 CD 59 04    		    CALL LCD_WR_DAT   	;
121)   04D5 16 01       		    LD D,0x01         ;Set VDP  479	;Set VDP  479
122)   04D7 CD 59 04    		    CALL LCD_WR_DAT   	;
123)   04DA 16 DF       		    LD D,0xDF	;
124)   04DC CD 59 04    		    CALL LCD_WR_DAT 	;
125)   04DF 16 00       		    LD D,0x00	;
126)   04E1 CD 59 04    		    CALL LCD_WR_DAT     	;
129)   04E4 16 B4       		    LD D,0xB4         ;HSYNC	;HSYNC
130)   04E6 CD 5D 04    		    CALL LCD_WR_COM       	;
131)   04E9 16 04       		    LD D,0x04 ;03         ;Set HT 928	;03         ;Set HT 928
132)   04EB CD 59 04    		    CALL LCD_WR_DAT   	;
133)   04EE 16 1F       		    LD D,0x1F ;A0	;A0
134)   04F0 CD 59 04    		    CALL LCD_WR_DAT       	;
135)   04F3 16 00       		    LD D,0x00         ;Set HPS  46	;Set HPS  46
136)   04F5 CD 59 04    		    CALL LCD_WR_DAT   	;
137)   04F8 16 D2       		    LD D,0xD2 ;2E	;2E
138)   04FA CD 59 04    		    CALL LCD_WR_DAT   	;
139)   04FD 16 00       		    LD D,0x00 ;30         ;Set HPW  48	;30         ;Set HPW  48
140)   04FF CD 59 04    		    CALL LCD_WR_DAT   	;
141)   0502 16 00       		    LD D,0x00         ;Set LPS  15	;Set LPS  15
142)   0504 CD 59 04    		    CALL LCD_WR_DAT 	;
143)   0507 16 00       		    LD D,0x00 ;0F	;0F
144)   0509 CD 59 04    		    CALL LCD_WR_DAT   	;
145)   050C 16 00       		    LD D,0x00	;
146)   050E CD 59 04    		    CALL LCD_WR_DAT     	;
148)   0511 16 B6       		    LD D,0xB6         ;VSYNC	;VSYNC
149)   0513 CD 5D 04    		    CALL LCD_WR_COM       	;
150)   0516 16 02       		    LD D,0x02         ;Set VT 525	;Set VT 525
151)   0518 CD 59 04    		    CALL LCD_WR_DAT   	;
152)   051B 16 0C       		    LD D,0x0C ;0D	;0D
153)   051D CD 59 04    		    CALL LCD_WR_DAT       	;
154)   0520 16 00       		    LD D,0x00         ;Set VPS  16	;Set VPS  16
155)   0522 CD 59 04    		    CALL LCD_WR_DAT   	;
156)   0525 16 22       		    LD D,0x22 ;10	;10
157)   0527 CD 59 04    		    CALL LCD_WR_DAT   	;
158)   052A 16 00       		    LD D,0x00 ;10         ;Set VPW  16	;10         ;Set VPW  16
159)   052C CD 59 04    		    CALL LCD_WR_DAT   	;
160)   052F 16 00       		    LD D,0x00         ;Set FPS  8	;Set FPS  8
161)   0531 CD 59 04    		    CALL LCD_WR_DAT 	;
162)   0534 16 00       		    LD D,0x00 ; 08	; 08
163)   0536 CD 59 04    		    CALL LCD_WR_DAT   	;
165)   0539 16 B8       		    LD D,0xB8         	;
166)   053B CD 5D 04    		    CALL LCD_WR_COM           	;
167)   053E 16 0F       		    LD D,0x0F ;07         ;GPIO3=input, GPIO[2:0]=output	;07         ;GPIO3=input, GPIO[2:0]=output
168)   0540 CD 59 04    		    CALL LCD_WR_DAT         	;
169)   0543 16 01       		    LD D,0x01         ;GPIO0 normal	;GPIO0 normal
170)   0545 CD 59 04    		    CALL LCD_WR_DAT 	;
172)   0548 16 BA       		    LD D,0xBA         	;
173)   054A CD 5D 04    		    CALL LCD_WR_COM           	;
174)   054D 16 01       		    LD D,0x01 ;0F	;0F
175)   054F CD 59 04    		    CALL LCD_WR_DAT   ;GPIO[3:0] out 1	;GPIO[3:0] out 1
177)   0552 16 36       		    LD D,0x36         ;rotation	;rotation
178)   0554 CD 5D 04    		    CALL LCD_WR_COM           	;
179)   0557 16 08       		    LD D,0x08 ;2A         	;2A
180)   0559 CD 59 04    		    CALL LCD_WR_DAT         	;
182)   055C 16 F0       		    LD D,0xF0         ;pixel data interface	;pixel data interface
183)   055E CD 5D 04    		    CALL LCD_WR_COM           	;
184)   0561 16 06       		    LD D,0x06         ;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES 	;CHANGE THIS FOR 8 BIT INTERFACE  6=9BIT SEND 2 BYTES
185)   0563 CD 59 04    		    CALL LCD_WR_DAT     	;
187)   0566 06 05       		    LD B,5       ;delay(5);	;delay(5);
188)   0568 CD 12 0E    		    CALL DELAY        	;
190)   056B 16 BC       		    LD D,0xBC         	;
191)   056D CD 5D 04    		    CALL LCD_WR_COM           	;
192)   0570 16 40       		    LD D,0x40	;
193)   0572 CD 59 04    		    CALL LCD_WR_DAT   	;
194)   0575 16 80       		    LD D,0x80	;
195)   0577 CD 59 04    		    CALL LCD_WR_DAT   	;
196)   057A 16 40       		    LD D,0x40	;
197)   057C CD 59 04    		    CALL LCD_WR_DAT   	;
198)   057F 16 01       		    LD D,0x01	;
199)   0581 CD 59 04    		    CALL LCD_WR_DAT       	;
200)   0584 06 05       		    LD B,5       ;delay(5);	;delay(5);
201)   0586 CD 12 0E    		    CALL DELAY  	;
218)   0589 16 29       		    LD D,0x29         ;display on 	;display on
219)   058B CD 5D 04    		    CALL LCD_WR_COM       	;
220)   058E 16 BE       		    LD D,0xBE         ;set PWM for B/L	;set PWM for B/L
221)   0590 CD 5D 04    		    CALL LCD_WR_COM                 	;
222)   0593 16 06       		    LD D,0x06	;
223)   0595 CD 59 04    		    CALL LCD_WR_DAT                 	;
224)   0598 16 F0       		    LD D,0xF0         	;
225)   059A CD 59 04    		    CALL LCD_WR_DAT   	;
226)   059D 16 01       		    LD D,0x01         	;
227)   059F CD 59 04    		    CALL LCD_WR_DAT   	;
228)   05A2 16 F0       		    LD D,0xF0         	;
229)   05A4 CD 59 04    		    CALL LCD_WR_DAT   	;
230)   05A7 16 00       		    LD D,0x00         	;
231)   05A9 CD 59 04    		    CALL LCD_WR_DAT   	;
232)   05AC 16 00       		    LD D,0x00         	;
233)   05AE CD 59 04    		    CALL LCD_WR_DAT                   	;
235)   05B1 16 D0       		    LD D,0xD0         	;
236)   05B3 CD 5D 04    		    CALL LCD_WR_COM                 	;
237)   05B6 16 0D       		    LD D,0x0D         	;
238)   05B8 CD 59 04    		    CALL LCD_WR_DAT         	;
241)   05BB 21 00 00    		    LD HL,0	;
242)   05BE E5          		    PUSH HL	;
243)   05BF E5          		    PUSH HL	;
244)   05C0 21 1F 03    		    LD HL,799	;
245)   05C3 E5          		    PUSH HL	;
246)   05C4 21 DF 01    		    LD HL,479	;
247)   05C7 E5          		    PUSH HL	;
248)   05C8 CD D1 05    		    CALL LCD_SETXY	;
249)   05CB 21 08 00    		    LD HL,8       ;REMOVE 4 PARAMS FROM STACK	;REMOVE 4 PARAMS FROM STACK
250)   05CE 39          		    ADD HL,SP	;
251)   05CF F9          		    LD SP,HL	;
252)   05D0 C9          		    RET	;
269)   05D1 DD 21 02 00 		    LD IX,2	;
270)   05D5 DD 39       		    ADD IX,SP         	;
271)   05D7 16 2A       		    LD D,0x2A         ;SEND IX PARAMS	;SEND IX PARAMS
272)   05D9 CD 5D 04    		    CALL LCD_WR_COM    	;
273)   05DC DD 56 07    		    LD D,(IX+7)	;
274)   05DF CD 59 04    		    CALL LCD_WR_DAT	;
275)   05E2 DD 56 06    		    LD D,(IX+6)	;
276)   05E5 CD 59 04    		    CALL LCD_WR_DAT	;
277)   05E8 DD 56 03    		    LD D,(IX+3)	;
278)   05EB CD 59 04    		    CALL LCD_WR_DAT	;
279)   05EE DD 56 02    		    LD D,(IX+2)	;
280)   05F1 CD 59 04    		    CALL LCD_WR_DAT       	;
281)   05F4 16 2B       		    LD D,0x2B         ;SEND Y PARAMS	;SEND Y PARAMS
282)   05F6 CD 5D 04    		    CALL LCD_WR_COM   	;
283)   05F9 DD 56 05    		    LD D,(IX+5)	;
284)   05FC CD 59 04    		    CALL LCD_WR_DAT	;
285)   05FF DD 56 04    		    LD D,(IX+4)	;
286)   0602 CD 59 04    		    CALL LCD_WR_DAT	;
287)   0605 DD 56 01    		    LD D,(IX+1)	;
288)   0608 CD 59 04    		    CALL LCD_WR_DAT	;
289)   060B DD 56 00    		    LD D,(IX)	;
290)   060E CD 59 04    		    CALL LCD_WR_DAT       	;
291)   0611 16 2C       		    LD D,0x2C         ;SEND DATA	;SEND DATA
292)   0613 CD 5D 04    		    CALL LCD_WR_COM           	;
293)   0616 C9          		    RET	;
299)   0617 54          		    LD D,H        	;
300)   0618 CD 59 04    		    CALL LCD_WR_DAT 	;
301)   061B 55          		    LD D,L	;
302)   061C CD 59 04    		    CALL LCD_WR_DAT 	;
303)   061F C9          		    RET	;
306)   0620 DD 21 02 00 		    LD IX,2     ;setXY(x, y, x, y);	;setXY(x, y, x, y);
307)   0624 DD 39       		    ADD IX,SP	;
308)   0626 DD 66 03    		    LD H,(IX+3)   ;X	;X
309)   0629 DD 6E 02    		    LD L,(IX+2)   ;X	;X
310)   062C DD 56 01    		    LD D,(IX+1) ;Y	;Y
311)   062F DD 5E 00    		    LD E,(IX) ;Y	;Y
312)   0632 E5          		    PUSH HL	;
313)   0633 D5          		    PUSH DE	;
314)   0634 E5          		    PUSH HL	;
315)   0635 D5          		    PUSH DE	;
316)   0636 CD D1 05    		    CALL LCD_SETXY	;
317)   0639 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
318)   063C 39          		    ADD HL,SP	;
319)   063D F9          		    LD SP,HL	;
320)   063E 2A 01 93    		    LD HL,(FCOLOR)	;
321)   0641 CD 17 06    		    CALL LCD_SETPIXEL	;
322)   0644 CD 48 06    		    CALL LCD_CLRXY	;
323)   0647 C9          		    RET	;
326)   0648 21 00 00    		     LD HL,0	;
327)   064B E5          		     PUSH HL	;
328)   064C E5          		     PUSH HL	;
329)   064D 21 1F 03    		     LD HL,LCD_WIDTH	;
330)   0650 E5          		     PUSH HL	;
331)   0651 21 DF 01    		     LD HL,LCD_HEIGHT	;
332)   0654 E5          		     PUSH HL	;
333)   0655 CD D1 05    		     CALL LCD_SETXY	;
334)   0658 21 08 00    		     LD HL,8        ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
335)   065B 39          		     ADD HL,SP	;
336)   065C F9          		     LD SP,HL	;
337)   065D C9          		     RET	;
341)   065E DD 21 02 00 		      LD IX,2	;
342)   0662 DD 39       		      ADD IX,SP	;
343)   0664 DD 66 05    		      LD H,(IX+5)   ;X  	;X
344)   0667 DD 6E 04    		      LD L,(IX+4)   ;X	;X
345)   066A DD 56 03    		      LD D,(IX+3)   ;Y	;Y
346)   066D DD 5E 02    		      LD E,(IX+2)   ;Y	;Y
347)   0670 DD 46 01    		      LD B,(IX+1)   ;LENGTH	;LENGTH
348)   0673 DD 4E 00    		      LD C,(IX)     ;LENGTH	;LENGTH
351)   0676 E5          		      PUSH HL	;
352)   0677 21 00 00    		      LD HL,0	;
353)   067A B7          		      OR A           ;CLEAR CARRY	;CLEAR CARRY
354)   067B ED 42       		      SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
355)   067D 38 0A       		      JR C,POSH1	;
356)   067F AF          		      XOR A          ;l=-l	;l=-l
357)   0680 91          					SUB C	;
358)   0681 4F          					LD C,A	;
359)   0682 9F          					SBC A,A	;
360)   0683 90          					SUB B	;
361)   0684 47          					LD B,A	;
362)   0685 E1          					POP HL	;
363)   0686 ED 42       		      SBC HL,BC       ;x -= l;	;x -= l;
364)   0688 E5          		      PUSH HL                    	;
365)   0689 E1          		POSH1: POP HL	;
366)   068A E5          					PUSH HL	;
367)   068B D5          		      PUSH DE	;
368)   068C 09          		      ADD HL,BC	;
369)   068D E5          		      PUSH HL	;
370)   068E D5          		      PUSH DE	;
371)   068F CD D1 05    		      CALL LCD_SETXY   ;setXY(x, y, x+l, y);	;setXY(x, y, x+l, y);
372)   0692 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
373)   0695 39          		      ADD HL,SP	;
374)   0696 F9          		      LD SP,HL	;
375)   0697 2A 01 93    		      LD HL,(FCOLOR)    	;
376)   069A CD 17 06    		NXTH1: CALL LCD_SETPIXEL	;
377)   069D 0B          		      DEC BC	;
378)   069E 79          		      LD A,C	;
379)   069F B0          		      OR B	;
380)   06A0 20 F8       		      JR NZ, NXTH1     	;
381)   06A2 CD 48 06    		      CALL LCD_CLRXY	;
382)   06A5 C9          		      RET	;
387)   06A6 DD 21 02 00 		      LD IX,2	;
388)   06AA DD 39       		      ADD IX,SP	;
389)   06AC DD 56 05    		      LD D,(IX+5)   ;X  	;X
390)   06AF DD 5E 04    		      LD E,(IX+4)   ;X	;X
391)   06B2 DD 66 03    		      LD H,(IX+3)   ;Y	;Y
392)   06B5 DD 6E 02    		      LD L,(IX+2)   ;Y	;Y
393)   06B8 DD 46 01    		      LD B,(IX+1)   ;LENGTH	;LENGTH
394)   06BB DD 4E 00    		      LD C,(IX)     ;LENGTH     	;LENGTH
395)   06BE E5          		      PUSH HL	;
396)   06BF 21 00 00    		      LD HL,0	;
397)   06C2 B7          		      OR A           ;CLEAR CARRY	;CLEAR CARRY
398)   06C3 ED 42       		      SBC HL,BC      ;CHECK IF LENGTH<0	;CHECK IF LENGTH<0
399)   06C5 38 0A       		      JR C,POSV1	;
400)   06C7 AF          		      XOR A          ;l=-l	;l=-l
401)   06C8 91          					SUB C	;
402)   06C9 4F          					LD C,A	;
403)   06CA 9F          					SBC A,A	;
404)   06CB 90          					SUB B	;
405)   06CC 47          					LD B,A	;
406)   06CD E1          					POP HL	;
407)   06CE ED 42       		      SBC HL,BC       ;Y -= l;	;Y -= l;
408)   06D0 E5          		      PUSH HL                   	;
409)   06D1 E1          		POSV1: POP HL	;
410)   06D2 D5          					PUSH DE	;
411)   06D3 E5          		      PUSH HL	;
412)   06D4 D5          		      PUSH DE	;
413)   06D5 09          		      ADD HL,BC	;
414)   06D6 E5          		      PUSH HL	;
415)   06D7 CD D1 05    		      CALL LCD_SETXY   ;setXY(x, y, x, y+l);	;setXY(x, y, x, y+l);
416)   06DA 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
417)   06DD 39          		      ADD HL,SP	;
418)   06DE F9          		      LD SP,HL	;
419)   06DF 2A 01 93    		      LD HL,(FCOLOR)    	;
420)   06E2 CD 17 06    		NXTV1: CALL LCD_SETPIXEL	;
421)   06E5 0B          		      DEC BC	;
422)   06E6 79          		      LD A,C	;
423)   06E7 B0          		      OR B	;
424)   06E8 20 F8       		      JR NZ, NXTV1     	;
425)   06EA CD 48 06    		      CALL LCD_CLRXY	;
426)   06ED C9          		      RET	;
430)   06EE DD 21 02 00 		      LD IX,2	;
431)   06F2 DD 39       		      ADD IX,SP	;
441)   06F4 DD 66 05    		      LD H,(IX+5)   ;Y1	;Y1
442)   06F7 DD 6E 04    		      LD L,(IX+4)   ;Y1	;Y1
443)   06FA DD 56 01    		      LD D,(IX+1)   ;Y2	;Y2
444)   06FD DD 5E 00    		      LD E,(IX)     ;Y2	;Y2
445)   0700 B7          		      OR A	;
446)   0701 ED 52       		      SBC HL,DE	;
447)   0703 20 1A       		      JR NZ,YNOTEQ	;
449)   0705 DD 46 07    		      LD B,(IX+7)   ;X1	;X1
450)   0708 DD 4E 06    		      LD C,(IX+6)   ;X1	;X1
451)   070B C5          		      PUSH BC       ;X1 1ST PARAM ON STACK	;X1 1ST PARAM ON STACK
452)   070C D5          		      PUSH DE				;Y 2ND PARAM ON STACK	;Y 2ND PARAM ON STACK
453)   070D DD 66 03    		      LD H,(IX+3)   ;X2	;X2
454)   0710 DD 6E 02    		      LD L,(IX+2)   ;X2       	;X2
455)   0713 ED 42       		      SBC HL,BC  	  ;X2-X1 = LENGTH OF HORIZ LINE	;X2-X1 = LENGTH OF HORIZ LINE
456)   0715 E5          		      PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
457)   0716 CD 5E 06    		      CALL LCD_DRAWHLINE	;
458)   0719 21 06 00    		      LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
459)   071C 39          		      ADD HL,SP	;
460)   071D F9          		      LD SP,HL      	;
461)   071E C9          		      RET	;
463)   071F DD 66 07    		      LD H,(IX+7)   ;X1	;X1
464)   0722 DD 6E 06    		      LD L,(IX+6)   ;X1	;X1
465)   0725 DD 56 03    		      LD D,(IX+3)   ;X2	;X2
466)   0728 DD 5E 02    		      LD E,(IX+2)   ;X2 	;X2
467)   072B B7          		      OR A	;
468)   072C ED 52       		      SBC HL,DE	;
469)   072E 20 1A       		      JR NZ,XNOTEQ	;
471)   0730 D5          		      PUSH DE       ;X2=X1 1ST PARAM ON STACK	;X2=X1 1ST PARAM ON STACK
472)   0731 DD 46 05    		      LD B,(IX+5)   ;Y1	;Y1
473)   0734 DD 4E 04    		      LD C,(IX+4)   ;Y1	;Y1
474)   0737 C5          		      PUSH BC       ;Y1 2ND PARAM ON STACK	;Y1 2ND PARAM ON STACK
475)   0738 DD 66 01    		      LD H,(IX+1)   ;Y2	;Y2
476)   073B DD 6E 00    		      LD L,(IX)   ;Y2       	;Y2
477)   073E ED 42       		      SBC HL,BC  	  ;Y2-Y1 = LENGTH OF VERT LINE	;Y2-Y1 = LENGTH OF VERT LINE
478)   0740 E5          		      PUSH HL       ;LENGTH 3RD PARAM ON STACK 	;LENGTH 3RD PARAM ON STACK
479)   0741 CD A6 06    		      CALL LCD_DRAWVLINE	;
480)   0744 21 06 00    		      LD HL,6       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
481)   0747 39          		      ADD HL,SP	;
482)   0748 F9          		      LD SP,HL	;
483)   0749 C9          		      RET	;
486)   074A 38 04       		      JR C,X2GTX1	;
488)   074C AF          		      XOR A			;
489)   074D 3D          		      DEC A  ;XSTEP=-1	;XSTEP=-1
490)   074E 18 0D       		      JR DLNXT1	;
493)   0750 D5          		      PUSH DE	;
494)   0751 E1          		      POP HL	;
495)   0752 DD 56 07    		      LD D,(IX+7)   ;X1	;X1
496)   0755 DD 5E 06    		      LD E,(IX+6)   ;X1 	;X1
497)   0758 B7          		      OR A     	;
498)   0759 ED 52       		      SBC HL,DE     ;X2-X1 ON HL	;X2-X1 ON HL
500)   075B 3E 01       		      LD A,1        ;XSTEP=1	;XSTEP=1
502)   075D 06 00       		      LD B,0	;
503)   075F 0E 00       		      LD C,0	;
504)   0761 C5          		      PUSH BC       ;T	;T
505)   0762 E5          		      PUSH HL       ;DX	;DX
506)   0763 FE 01       		      CP 1	;
507)   0765 28 02       		      JR Z,DLXMINUS1	;
508)   0767 06 FF       		      LD B,0XFF	;
509)   0769 4F          		DLXMINUS1:LD C,A      	;
510)   076A C5          		      PUSH BC       ;XSTEP	;XSTEP
511)   076B DD 66 05    		      LD H,(IX+5)   ;Y1	;Y1
512)   076E DD 6E 04    		      LD L,(IX+4)   ;Y1	;Y1
513)   0771 DD 56 01    		      LD D,(IX+1)   ;Y2	;Y2
514)   0774 DD 5E 00    		      LD E,(IX)     ;Y2      	;Y2
515)   0777 B7          		      OR A	;
516)   0778 ED 52       		      SBC HL,DE	;
517)   077A 38 04       		      JR C,Y2GTY1	;
519)   077C AF          		      XOR A	;
520)   077D 3D          		      DEC A         ;YSTEP=-1	;YSTEP=-1
521)   077E 18 0F       		      JR DLNXT2	;
524)   0780 D5          		      PUSH DE	;
525)   0781 E1          		      POP HL	;
526)   0782 DD 56 05    		      LD D,(IX+5)   ;Y1	;Y1
527)   0785 DD 5E 04    		      LD E,(IX+4)   ;Y1  	;Y1
528)   0788 B7          		      OR A	;
529)   0789 ED 52       		      SBC HL,DE  	;
531)   078B 06 00       		      LD B,0	;
532)   078D 3E 01       		      LD A,1        ;YSTEP=1	;YSTEP=1
534)   078F FE 01       		      CP 1	;
535)   0791 28 02       		      JR Z,DLYMINUS1	;
536)   0793 06 FF       		      LD B,0XFF	;
538)   0795 4F          		      LD C,A      	;
539)   0796 E5          		      PUSH HL       ;DY	;DY
540)   0797 C5          		      PUSH BC       ;YSTEP   	;YSTEP
541)   0798 FD 21 00 00 		      LD IY,0	;
542)   079C FD 39       		      ADD IY,SP	;
557)   079E FD 56 07    		      LD D,(IY+7)    ;DX	;DX
558)   07A1 FD 5E 06    		      LD E,(IY+6)    ;DX	;DX
559)   07A4 B7          		      OR A	;
560)   07A5 ED 52       		      SBC HL,DE      ;DY-DX	;DY-DX
561)   07A7 DA 41 08    		      JP C,DXGTDY	;
562)   07AA CA 41 08    		      JP Z,DXGTDY	;
564)   07AD 19          		      ADD HL,DE      ;HL=DY	;HL=DY
565)   07AE 44          		      LD B,H	;
566)   07AF 4D          		      LD C,L	;
567)   07B0 CB 38       		      SRL B	;
568)   07B2 CB 19       		      RR C           ;(dy >> 1)	;(dy >> 1)
569)   07B4 21 00 00    		      LD HL,0	;
570)   07B7 ED 42       		      SBC HL,BC      ;t = - (dy >> 1);	;t = - (dy >> 1);
571)   07B9 FD 74 09    		      LD (IY+9),H    ;SAVE T	;SAVE T
572)   07BC FD 75 08    		      LD (IY+8),L    ;SAVE T	;SAVE T
574)   07BF DD 56 05    		      LD D,(IX+5)   ;ROW	;ROW
575)   07C2 DD 5E 04    		      LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
576)   07C5 DD 66 07    		      LD H,(IX+7)   ;COL	;COL
577)   07C8 DD 6E 06    		      LD L,(IX+6)   ;COL=X1	;COL=X1
578)   07CB D5          		      PUSH DE	;
579)   07CC DD E5       		      PUSH IX	;
580)   07CE E5          		      PUSH HL	;
581)   07CF D5          		      PUSH DE	;
582)   07D0 E5          		      PUSH HL	;
583)   07D1 D5          		      PUSH DE	;
584)   07D2 CD D1 05    		      CALL LCD_SETXY	;
585)   07D5 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
586)   07D8 39          		      ADD HL,SP     ;	;
587)   07D9 F9          		      LD SP,HL      	;
588)   07DA 2A 01 93    		      LD HL,(FCOLOR)    	;
589)   07DD CD 17 06    		      CALL LCD_SETPIXEL	;
590)   07E0 DD E1       		      POP IX	;
591)   07E2 D1          		      POP DE	;
592)   07E3 DD 66 01    		      LD H,(IX+1)   ;Y2	;Y2
593)   07E6 DD 6E 00    		      LD L,(IX)     ;Y2 	;Y2
594)   07E9 ED 52       		      SBC HL,DE     ; ROW=Y2	; ROW=Y2
595)   07EB CA D4 08    		      JP Z,DLEXIT	;
596)   07EE FD 46 01    		      LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
597)   07F1 FD 4E 00    		      LD C,(IY)     ;YSTEP LO	;YSTEP LO
598)   07F4 EB          		      EX DE,HL	;
599)   07F5 09          		      ADD HL,BC     ;row += ystep;	;row += ystep;
600)   07F6 DD 74 05    		      LD (IX+5),H   ;SAVE ROW	;SAVE ROW
601)   07F9 DD 75 04    		      LD (IX+4),L   ;   	;
603)   07FC FD 56 09    		      LD D,(IY+9)   ; T	; T
604)   07FF FD 5E 08    		      LD E,(IY+8)   ; T      	; T
605)   0802 FD 66 07    		      LD H,(IY+7)   ;DX	;DX
606)   0805 FD 6E 06    		      LD L,(IY+6)   ;DX	;DX
607)   0808 19          		      ADD HL,DE	;
608)   0809 FD 74 09    		      LD (IY+9),H   ;t += dx;	;t += dx;
609)   080C FD 75 08    		      LD (IY+8),L	;
610)   080F EB          		      EX DE,HL	;
611)   0810 21 00 00    		      LD HL,0	;
612)   0813 ED 52       		      SBC HL,DE	;
613)   0815 30 A8       		      JR NC,DLAGN1      	;
614)   0817 FD 46 05    		      LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
615)   081A FD 4E 04    		      LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
616)   081D DD 66 07    		      LD H,(IX+7)   ;COL HI	;COL HI
617)   0820 DD 6E 06    		      LD L,(IX+6)   ;COL LO	;COL LO
618)   0823 09          		      ADD HL,BC     ;col += xstep;	;col += xstep;
619)   0824 DD 74 07    		      LD (IX+7),H   ;SAVE COL	;SAVE COL
620)   0827 DD 75 06    		      LD (IX+6),L   ;         	;
622)   082A FD 66 09    		      LD H,(IY+9)   ; T	; T
623)   082D FD 6E 08    		      LD L,(IY+8)   ; T      	; T
624)   0830 FD 46 03    		      LD B,(IY+3)   ;DY	;DY
625)   0833 FD 4E 02    		      LD C,(IY+2)   ;DY	;DY
626)   0836 ED 42       		      SBC HL,BC	;
627)   0838 FD 74 09    		      LD (IY+9),H   ;t -= dY;	;t -= dY;
628)   083B FD 75 08    		      LD (IY+8),L								;
629)   083E C3 BF 07    		      JP DLAGN1	;
631)   0841 19          		      ADD HL,DE      ;HL=DY DE=DX	;HL=DY DE=DX
632)   0842 42          		      LD B,D	;
633)   0843 4B          		      LD C,E	;
634)   0844 CB 38       		      SRL B	;
635)   0846 CB 19       		      RR C           ;(dX >> 1)	;(dX >> 1)
636)   0848 21 00 00    		      LD HL,0	;
637)   084B ED 42       		      SBC HL,BC      ;t = - (dy >> 1);	;t = - (dy >> 1);
638)   084D FD 74 09    		      LD (IY+9),H    ;SAVE T	;SAVE T
639)   0850 FD 75 08    		      LD (IY+8),L    ;SAVE T	;SAVE T
641)   0853 DD 56 05    		      LD D,(IX+5)   ;ROW	;ROW
642)   0856 DD 5E 04    		      LD E,(IX+4)   ;ROW=Y1	;ROW=Y1
643)   0859 DD 66 07    		      LD H,(IX+7)   ;COL	;COL
644)   085C DD 6E 06    		      LD L,(IX+6)   ;COL=X1	;COL=X1
645)   085F E5          		      PUSH HL       ;SAVE COL	;SAVE COL
646)   0860 DD E5       		      PUSH IX	;
647)   0862 E5          		      PUSH HL	;
648)   0863 D5          		      PUSH DE	;
649)   0864 E5          		      PUSH HL	;
650)   0865 D5          		      PUSH DE	;
651)   0866 CD D1 05    		      CALL LCD_SETXY	;
652)   0869 21 08 00    		      LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
653)   086C 39          		      ADD HL,SP     ;	;
654)   086D F9          		      LD SP,HL      	;
655)   086E 2A 01 93    		      LD HL,(FCOLOR)    	;
656)   0871 CD 17 06    		      CALL LCD_SETPIXEL	;
657)   0874 DD E1       		      POP IX	;
658)   0876 D1          		      POP DE        ;RETRIEVE COL	;RETRIEVE COL
659)   0877 DD 66 03    		      LD H,(IX+3)   ;X2	;X2
660)   087A DD 6E 02    		      LD L,(IX+2)   ;X2 	;X2
661)   087D ED 52       		      SBC HL,DE     ; COL=X2?	; COL=X2?
662)   087F 28 53       		      JR Z,DLEXIT	;
663)   0881 EB          		      EX DE,HL      ;HL=COL	;HL=COL
664)   0882 FD 46 05    		      LD B,(IY+5)   ;XSTEP HI	;XSTEP HI
665)   0885 FD 4E 04    		      LD C,(IY+4)   ;XSTEP LO	;XSTEP LO
666)   0888 09          		      ADD HL,BC     ;col += xstep;	;col += xstep;
667)   0889 DD 74 07    		      LD (IX+7),H   ;SAVE COL	;SAVE COL
668)   088C DD 75 06    		      LD (IX+6),L   ;   	;
669)   088F FD 56 09    		      LD D,(IY+9)   ; T	; T
670)   0892 FD 5E 08    		      LD E,(IY+8)   ; T      	; T
671)   0895 FD 66 03    		      LD H,(IY+3)   ;DY	;DY
672)   0898 FD 6E 02    		      LD L,(IY+2)   ;DY	;DY
673)   089B 19          		      ADD HL,DE	;
674)   089C FD 74 09    		      LD (IY+9),H   ;t += dY;	;t += dY;
675)   089F FD 75 08    		      LD (IY+8),L	;
676)   08A2 EB          		      EX DE,HL      ;T=DE	;T=DE
677)   08A3 21 00 00    		      LD HL,0	;
678)   08A6 ED 52       		      SBC HL,DE	;
679)   08A8 30 A9       		      JR NC,DLAGN2      	;
680)   08AA FD 46 01    		      LD B,(IY+1)   ;YSTEP HI	;YSTEP HI
681)   08AD FD 4E 00    		      LD C,(IY)     ;YSTEP LO	;YSTEP LO
682)   08B0 DD 66 05    		      LD H,(IX+5)   ;ROW HI	;ROW HI
683)   08B3 DD 6E 04    		      LD L,(IX+4)   ;ROW LO	;ROW LO
684)   08B6 09          		      ADD HL,BC     ;ROW += Ystep;	;ROW += Ystep;
685)   08B7 DD 74 05    		      LD (IX+5),H   ;SAVE COL	;SAVE COL
686)   08BA DD 75 04    		      LD (IX+4),L   ;         	;
688)   08BD FD 66 09    		      LD H,(IY+9)   ; T	; T
689)   08C0 FD 6E 08    		      LD L,(IY+8)   ; T      	; T
690)   08C3 FD 46 07    		      LD B,(IY+7)   ;DX	;DX
691)   08C6 FD 4E 06    		      LD C,(IY+6)   ;DX	;DX
692)   08C9 ED 42       		      SBC HL,BC	;
693)   08CB FD 74 09    		      LD (IY+9),H   ;t -= dX;	;t -= dX;
694)   08CE FD 75 08    		      LD (IY+8),L								;
695)   08D1 C3 53 08    		      JP DLAGN2	;
698)   08D4 21 0A 00    		      LD HL,10      ;REMOVE 10 IY PARAMS FROM STACK	;REMOVE 10 IY PARAMS FROM STACK
699)   08D7 39          		      ADD HL,SP     ;	;
700)   08D8 F9          		      LD SP,HL           	;
701)   08D9 C9          		      RET          	;
707)   08DA FE 08       		      CP 0X08   ;BACKSPACE	;BACKSPACE
708)   08DC CA EC 08    		      JP Z,PRCH_DOBCKSPC	;
709)   08DF FE 0A       		      CP 0X0A   ;LINE FEED JUST IGNORE IT	;LINE FEED JUST IGNORE IT
710)   08E1 C8          		      RET Z	;
711)   08E2 FE 0D       		      CP 0X0D   ;CHECK FOR ENTER	;CHECK FOR ENTER
712)   08E4 20 3A       		      JR NZ,PRCH_DOPRN	;
713)   08E6 21 05 93    		      LD HL,CURSORX	;
714)   08E9 C3 91 09    		      JP PRCH_NEWLN 	;
716)   08EC 21 05 93    		      LD HL,CURSORX      	;
717)   08EF 7E          		      LD A,(HL)	;
718)   08F0 38 05       		      JR C,DOREALBCKSPC	;
720)   08F2 FE 01       		      CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
721)   08F4 C8          		      RET Z	;
722)   08F5 35          		      DEC (HL)	;
723)   08F6 C9          		      RET      	;
725)   08F7 FE 01       		      CP 1      ;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0	;COMPARE WITH COLUMN 1 CAUSE OF THE PROMPT ON COLUMN 0
726)   08F9 28 0A       		      JR Z,PRCH_DOBCKSPC2     ;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER	;IF 0 WE ARE ON THE 1ST COLUMN SO NOTHING TO DO JUST DELETE THE 8=BS FROM BUFFER
727)   08FB 35          		      DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
728)   08FC E5          		      PUSH HL	;
729)   08FD 3E 20       		      LD A,32   ;PRINT SPACE	;PRINT SPACE
730)   08FF CD 20 09    		      CALL PRCH_DOPRN ;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN	;THIS FORWARDS THE CURSOR SO WE SHOULD GO BACK AGAIN
731)   0902 E1          		      POP HL	;
732)   0903 35          		      DEC (HL)  ;GO 1 POSITION BACK	;GO 1 POSITION BACK
733)   0904 B7          		      OR A      	;
737)   0905 DD 21 02 00 		      LD IX,2	;
738)   0909 DD 39       		      ADD IX,SP	;
739)   090B DD 66 01    		      LD H,(IX+1);POSITION IN ACCS FOR THE NEW CHARACTER      	;POSITION IN ACCS FOR THE NEW CHARACTER
740)   090E DD 6E 00    		      LD L,(IX) ;POSITION IN ACCS FOR THE NEW CHARACTER  	;POSITION IN ACCS FOR THE NEW CHARACTER
741)   0911 3E 00       		      LD A,0    ;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG	;NOT XOR WE DONT WANT TO MESS WITH ZERO FLAG
742)   0913 28 02       		      JR Z,PRCH_SKIP1  ;WE ARE ON COLUMN 1	;WE ARE ON COLUMN 1
743)   0915 2B          		      DEC HL     ;PREVIOUS POSITION DELETE BACKSPACE	;PREVIOUS POSITION DELETE BACKSPACE
744)   0916 77          		      LD (HL),A  ;PUT 0 ON LAST POSITION	;PUT 0 ON LAST POSITION
746)   0917 2B          		      DEC HL     ;PREVIOUS POSITION DELETE PREVIOUS CHAR	;PREVIOUS POSITION DELETE PREVIOUS CHAR
747)   0918 77          		      LD (HL),A  ;PUT 0 ON LAST POSITION      	;PUT 0 ON LAST POSITION
748)   0919 DD 74 01    		      LD (IX+1),H ;PUT POSITION BACK ON STACK IT WILL POPED	;PUT POSITION BACK ON STACK IT WILL POPED
749)   091C DD 75 00    		      LD (IX),L	;
750)   091F C9          		      RET	;
753)   0920 F5          		      PUSH AF  ;SAVE CHAR TO STACK	;SAVE CHAR TO STACK
754)   0921 32 07 93    		      LD (LASTCHAR),A ;SAVE LAST PRINTED CHAR	;SAVE LAST PRINTED CHAR
755)   0924 3A 05 93    		      LD A,(CURSORX)	;
756)   0927 06 08       		      LD B,FONT_WIDTH	;
757)   0929 16 00       		      LD D,0	;
758)   092B 5F          		      LD E,A	;
759)   092C 21 00 00    		      LD HL,0	;
760)   092F B7          		      OR A          ; CLEAR CARRY	; CLEAR CARRY
762)   0930 ED 5A       		      ADC HL,DE	;
763)   0932 10 FC       		      DJNZ PRCH_AGN1 ;HL=DE*B	;HL=DE*B
764)   0934 E5          		      PUSH HL       ;1ST PARAM X1	;1ST PARAM X1
765)   0935 11 08 00    		      LD DE,FONT_WIDTH 	;
766)   0938 ED 5A       		      ADC HL,DE      	;
767)   093A 2B          		      DEC HL	;
768)   093B E5          		      PUSH HL       ;SAVE 3RD PARAM X2	;SAVE 3RD PARAM X2
769)   093C 3A 06 93    		      LD A,(CURSORY)	;
770)   093F 06 0A       		      LD B,FONT_HEIGHT 	;
771)   0941 16 00       		      LD D,0	;
772)   0943 5F          		      LD E,A	;
773)   0944 21 00 00    		      LD HL,0	;
775)   0947 ED 5A       		      ADC HL,DE	;
776)   0949 10 FC       		      DJNZ PRCH_AGN2      	;
777)   094B D1          		      POP DE        ;RETREIVE 3RD PARAM X2	;RETREIVE 3RD PARAM X2
778)   094C E5          		      PUSH HL       ;2ND PARAM Y1	;2ND PARAM Y1
779)   094D D5          		      PUSH DE       ;3RD PARAM X2	;3RD PARAM X2
780)   094E 11 0A 00    		      LD DE,FONT_HEIGHT	;
781)   0951 ED 5A       		      ADC HL,DE     ;CALC 4TH PARAM      	;CALC 4TH PARAM
782)   0953 2B          		      DEC HL        ;4TH PARAM -1  	;4TH PARAM -1
783)   0954 E5          		      PUSH HL				;4TH PARAM Y2	;4TH PARAM Y2
784)   0955 CD D1 05    		      CALL LCD_SETXY	;
785)   0958 21 08 00    		      LD HL,8	;
786)   095B 39          		      ADD HL,SP	;
787)   095C F9          		      LD SP,HL      ;SKIP 4 PARAMS 8 BYTES	;SKIP 4 PARAMS 8 BYTES
788)   095D F1          		      POP AF        ;CHAR TO PRINT FROM STACK	;CHAR TO PRINT FROM STACK
789)   095E 21 00 0F    		      LD HL,FONT_ADDR	;
790)   0961 16 00       		      LD D,0	;
791)   0963 5F          		      LD E,A	;
792)   0964 ED 5A       		      ADC HL,DE     ;THIS IS THE CHAR ADDRESS	;THIS IS THE CHAR ADDRESS
793)   0966 E5          		      PUSH HL	;
794)   0967 D1          		      POP DE        ; CHAR ADDRESS ON DE	; CHAR ADDRESS ON DE
795)   0968 0E 0A       		      LD C,FONT_HEIGHT   ; TOTAL FONT LINES	; TOTAL FONT LINES
797)   096A 1A          		      LD A,(DE)           ;FONT 8BIT PATTERN FOR A LINE	;FONT 8BIT PATTERN FOR A LINE
798)   096B 06 08       		      LD B,FONT_WIDTH      	;
800)   096D CB 27       		      SLA A               ;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR	;CHECK BIT FOR 1=FCOLOR OR 0=BCOLOR
801)   096F 38 05       		      JR C,FORECOLOR	;
802)   0971 2A 03 93    		      LD HL,(BCOLOR)	;
803)   0974 18 03       		      JR PRCH_CONT	;
805)   0976 2A 01 93    		      LD HL,(FCOLOR)      	;
807)   0979 F5          		      PUSH AF	;
808)   097A D5          		      PUSH DE             ;TODO:PROBABLY NOT NEEDED HERE 	;TODO:PROBABLY NOT NEEDED HERE
809)   097B CD 17 06    		      CALL LCD_SETPIXEL	;
810)   097E D1          		      POP DE	;
811)   097F F1          		      POP AF      	;
812)   0980 10 EB       		      DJNZ PRCH_AGN4	;
813)   0982 14          		      INC D             ;ADD 256 FOR NEXT CHAR PATTERN	;ADD 256 FOR NEXT CHAR PATTERN
814)   0983 0D          		      DEC C	;
815)   0984 20 E4       		      JR NZ,PRCH_AGN3	;
817)   0986 21 05 93    		      LD HL,CURSORX	;
818)   0989 7E          		      LD A,(HL)	;
819)   098A 3C          		      INC A	;
820)   098B FE 50       		      CP 80	;
821)   098D 28 02       		      JR Z,PRCH_NEWLN  ;NEW LINE	;NEW LINE
822)   098F 77          		      LD (HL),A	;
823)   0990 C9          		      RET	;
826)   0991 AF          		      XOR A  	;
827)   0992 77          		      LD (HL),A   	;
828)   0993 23          		      INC HL	;
829)   0994 7E          		      LD A,(HL)	;
830)   0995 3C          		      INC A       	;
832)   0996 FE 2F       		      CP 47         ;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!	;47 LINES MAX THEN WRAP OR BETTER SCROLL THE SCREEN!!!
833)   0998 20 01       		      JR NZ,PRCH_NOTYET	;
834)   099A AF          		      XOR A	;
836)   099B 77          		      LD (HL),A                             	;
837)   099C C9          		      RET	;
850)   099D 2A 03 93    		      LD HL,(BCOLOR);      	;
851)   09A0 18 03       		      JR LCD_SETCURS	;
862)   09A2 2A 01 93    		      LD HL,(FCOLOR)      ;COLOR PARAM      	;COLOR PARAM
865)   09A5 E5          		      PUSH HL             ;COLOR PARAM	;COLOR PARAM
866)   09A6 3A 05 93    		      LD A,(CURSORX)	;
867)   09A9 06 08       		      LD B,FONT_WIDTH	;
868)   09AB 16 00       		      LD D,0	;
869)   09AD 5F          		      LD E,A	;
870)   09AE 21 00 00    		      LD HL,0	;
871)   09B1 B7          		      OR A                ;CLEAR CARRY	;CLEAR CARRY
873)   09B2 ED 5A       		      ADC HL,DE	;
874)   09B4 10 FC       		      DJNZ SCUR_AGN1      ;HL = DE * B 	;HL = DE * B
875)   09B6 E5          		      PUSH HL             ;1ST PARAM X1	;1ST PARAM X1
876)   09B7 01 08 00    		      LD BC,FONT_WIDTH	;
877)   09BA ED 4A       		      ADC HL,BC           ;NEXT CHAR	;NEXT CHAR
878)   09BC 2B          		      DEC HL              ;MINUS 1	;MINUS 1
879)   09BD E5          		      PUSH HL             ;SAVE 3RD PARAM X2      	;SAVE 3RD PARAM X2
880)   09BE 3A 06 93    		      LD A,(CURSORY)      	;
881)   09C1 06 0A       		      LD B,FONT_HEIGHT 	;
882)   09C3 16 00       		      LD D,0	;
883)   09C5 5F          		      LD E,A	;
884)   09C6 21 00 00    		      LD HL,0	;
886)   09C9 ED 5A       		      ADC HL,DE	;
887)   09CB 10 FC       		      DJNZ SCUR_AGN2      ;HL=B*DE	;HL=B*DE
888)   09CD 0E 08       		      LD C,FONT_HEIGHT-2  ;2 PIXEL HEIGTH CURSOR       	;2 PIXEL HEIGTH CURSOR
889)   09CF 06 00       		      LD B,0	;
890)   09D1 ED 4A       		      ADC HL,BC           ;ADD FONT_HEIGHT-2 PIXELS	;ADD FONT_HEIGHT-2 PIXELS
891)   09D3 D1          		      POP DE              ;RETREIVE 3RD PARAM ON DE	;RETREIVE 3RD PARAM ON DE
892)   09D4 E5          		      PUSH HL             ;2ND PARAM Y1	;2ND PARAM Y1
893)   09D5 D5          		      PUSH DE             ;3RD PARAM X2	;3RD PARAM X2
895)   09D6 23          		      INC HL              ; Y2 ADD THE LAST +2 PIXELS  	; Y2 ADD THE LAST +2 PIXELS
896)   09D7 E5          		      PUSH HL             ;4TH PARAM Y2	;4TH PARAM Y2
897)   09D8 CD D1 05    		      CALL LCD_SETXY	;
898)   09DB 21 08 00    		      LD HL,8	;
899)   09DE 39          		      ADD HL,SP	;
900)   09DF F9          		      LD SP,HL            ;SKIP 4 PARAMS 8 BYTES            	;SKIP 4 PARAMS 8 BYTES
902)   09E0 E1          		      POP HL              ;GET THE COLOR	;GET THE COLOR
903)   09E1 06 10       		      LD B,2*FONT_WIDTH   ;2*8=16	;2*8=16
905)   09E3 CD 17 06    		      CALL LCD_SETPIXEL   ;DESTROYS D,A	;DESTROYS D,A
906)   09E6 10 FB       		      DJNZ SCUR_AGN3                            	;
911)   09E8 C9          		      RET	;
914)   09E9 CD 48 06    		     CALL LCD_CLRXY;	;
915)   09EC 2A 03 93    		     LD HL,(BCOLOR)     	;
917)   09EF 06 DF       		     LD B,LCD_HEIGHT.AND.0xFF   ;lsb	;lsb
918)   09F1 0E 02       		     LD C,LCD_HEIGHT.SHR.8+1      ;MSB+1	;MSB+1
920)   09F3 C5          		     PUSH BC          	;
922)   09F4 06 1F       		     LD B,LCD_WIDTH.AND.0xFF   ;lsb	;lsb
923)   09F6 0E 04       		     LD C,LCD_WIDTH.SHR.8+1      ;MSV+1          	;MSV+1
925)   09F8 CD 17 06    		     CALL LCD_SETPIXEL         ;DESTROYS D,A, HL HAS COLOR INFO	;DESTROYS D,A, HL HAS COLOR INFO
926)   09FB 10 FB       		     DJNZ CS_AGN1	;
927)   09FD 0D          		     DEC C	;
928)   09FE 20 F8       		     JR NZ,CS_AGN1     	;
929)   0A00 C1          		     POP BC	;
930)   0A01 10 F0       		     DJNZ CS_AGN2	;
931)   0A03 0D          		     DEC C	;
932)   0A04 20 ED       		     JR NZ,CS_AGN2 	;
933)   0A06 21 00 00    		     LD HL,0                   ;RESET CURSOR AT 0,0	;RESET CURSOR AT 0,0
934)   0A09 22 05 93    		     LD (CURSORX),HL       	;
935)   0A0C C9          		     RET	;
939)   0A0D CD 00 00    		     CALL EXPRI	;
940)   0A10 D9          		     EXX	;
941)   0A11 FD 7E 00    		     LD A,(IY)	;
942)   0A14 FE 0D       		     CP 0x0D	;
943)   0A16 28 2C       		     JR Z,COLSEL	;
944)   0A18 FE 2C       		     CP ','	;
945)   0A1A 20 53       		     JR NZ,COLERR	;
947)   0A1C E5          		     PUSH HL       ;SAVE 1ST PARAM	;SAVE 1ST PARAM
948)   0A1D FD 23       		     INC IY        ;NEXT PARAM	;NEXT PARAM
949)   0A1F CD 00 00    		     CALL EXPRI	;
950)   0A22 D9          		     EXX	;
951)   0A23 D1          		     POP DE        ;RESTORE 1ST PARAM ON DE HL HAS THE 2ND	;RESTORE 1ST PARAM ON DE HL HAS THE 2ND
952)   0A24 7B          		     LD A,E	;
953)   0A25 D6 80       		     SUB 128	;
954)   0A27 38 07       		     JR C,COLFC	;
955)   0A29 5F          		     LD E,A	;
956)   0A2A DD 21 2E 93 		     LD IX,BCOLPAL	;
957)   0A2E 18 04       		     JR DOPALCOL	;
958)   0A30 DD 21 0E 93 		COLFC: LD IX,FCOLPAL	;
960)   0A34 7B          		     LD A,E	;
961)   0A35 FE 0F       		     CP 15			  ;MAX 16 COLORS	;MAX 16 COLORS
962)   0A37 30 36       		     JR NC,COLERR	;
963)   0A39 DD 19       		     ADD IX,DE     	;
964)   0A3B DD 19       		     ADD IX,DE     ;2*DE CAUSE ITS A 2 BYTE ARRAY	;2*DE CAUSE ITS A 2 BYTE ARRAY
965)   0A3D DD 75 00    		     LD (IX),L    ;SAVE THE NEW COLOR 	;SAVE THE NEW COLOR
966)   0A40 DD 74 01    		     LD (IX+1),H  	;
967)   0A43 C9          		     RET  	;
970)   0A44 E5          		     PUSH HL	;
971)   0A45 D1          		     POP DE     	;
972)   0A46 7B          		     LD A,E	;
973)   0A47 D6 80       		     SUB 128        ;CHECK MSB	;CHECK MSB
974)   0A49 38 0A       		     JR C,CFC	;
975)   0A4B 5F          		     LD E,A	;
976)   0A4C DD 21 2E 93 		     LD IX,BCOLPAL  ;BACKCOLOR	;BACKCOLOR
977)   0A50 21 03 93    		     LD HL,BCOLOR	;
978)   0A53 18 07       		     JR SFC	;
979)   0A55 DD 21 0E 93 		CFC: LD IX,FCOLPAL  ;FRONTCOLOR	;FRONTCOLOR
980)   0A59 21 01 93    		     LD HL,FCOLOR	;
981)   0A5C 7B          		SFC: LD A,E	;
982)   0A5D FE 0F       		     CP 15			  ;MAX 16 COLORS	;MAX 16 COLORS
983)   0A5F 30 0E       		     JR NC,COLERR	;
984)   0A61 DD 19       		     ADD IX,DE	;
985)   0A63 DD 19       		     ADD IX,DE	;
986)   0A65 DD 56 00    		     LD D,(IX)	;
987)   0A68 DD 5E 01    		     LD E,(IX+1)     	;
988)   0A6B 72          		     LD (HL),D  ;SAVE AGAIN 	;SAVE AGAIN
989)   0A6C 23          		     INC HL     	;
990)   0A6D 73          		     LD (HL),E       	;
991)   0A6E C9          		     RET	;
994)   0A6F AF          				 XOR     A	;
995)   0A70 CD 00 00    				 CALL    EXTERR	;
996)   0A73 70 61 72 61 				 DEFM    'param error'	;
996)   0A77 6D 20 65 72 				 DEFM    'param error'	;
996)   0A7B 72 6F 72    				 DEFM    'param error'	;
997)   0A7E 00          				 DEFB    0     	;
1007)   0A7F CD E9 09    		     CALL LCD_CLRSCR	;
1009)   0A82 C3 93 0A    		     JP LCD_TEST_LINES 	;
1016)   0A85 3E 41       		    LD A,65	;
1017)   0A87 CD DA 08    		    CALL LCD_PRINTCHAR	;
1018)   0A8A 21 05 93    		    LD HL,CURSORX	;
1019)   0A8D 34          		    INC (HL)	;
1020)   0A8E 3E 42       		    LD A,66	;
1021)   0A90 CD DA 08    		    CALL LCD_PRINTCHAR	;
1025)   0A93 21 0A 00    		    LD HL,10	;
1026)   0A96 01 D2 00    		    LD BC,210	;
1027)   0A99 C5          		    PUSH BC	;
1028)   0A9A E5          		    PUSH HL	;
1029)   0A9B E5          		    PUSH HL	;
1030)   0A9C C5          		    PUSH BC	;
1031)   0A9D CD EE 06    		    CALL LCD_DRAWLINE 	;
1032)   0AA0 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1033)   0AA3 39          		    ADD HL,SP	;
1034)   0AA4 F9          		    LD SP,HL    	;
1040)   0AA5 21 0A 00    		    LD HL,10	;
1041)   0AA8 01 D2 00    		    LD BC,210	;
1042)   0AAB E5          		    PUSH HL	;
1043)   0AAC E5          		    PUSH HL	;
1044)   0AAD C5          		    PUSH BC	;
1045)   0AAE C5          		    PUSH BC	;
1046)   0AAF CD EE 06    		    CALL LCD_DRAWLINE 	;
1047)   0AB2 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1048)   0AB5 39          		    ADD HL,SP	;
1049)   0AB6 F9          		    LD SP,HL    	;
1053)   0AB7 21 0A 00    		    LD HL,10	;
1054)   0ABA 01 D2 00    		    LD BC,210	;
1055)   0ABD E5          		    PUSH HL	;
1056)   0ABE E5          		    PUSH HL	;
1057)   0ABF C5          		    PUSH BC	;
1058)   0AC0 E5          		    PUSH HL	;
1059)   0AC1 CD EE 06    		    CALL LCD_DRAWLINE 	;
1060)   0AC4 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1061)   0AC7 39          		    ADD HL,SP	;
1062)   0AC8 F9          		    LD SP,HL	;
1063)   0AC9 21 0A 00    		    LD HL,10	;
1064)   0ACC 01 D2 00    		    LD BC,210	;
1065)   0ACF E5          		    PUSH HL	;
1066)   0AD0 E5          		    PUSH HL	;
1067)   0AD1 E5          		    PUSH HL	;
1068)   0AD2 C5          		    PUSH BC	;
1069)   0AD3 CD EE 06    		    CALL LCD_DRAWLINE 	;
1070)   0AD6 21 08 00    		    LD HL,8       ;REMOVE PARAMS FROM STACK	;REMOVE PARAMS FROM STACK
1071)   0AD9 39          		    ADD HL,SP	;
1072)   0ADA F9          		    LD SP,HL    	;
1073)   0ADB C9          		    RET	;
 34)   0ADC 	            			PDAT EQU DEVLCD 	;LCD DATA PORT SEND DATA TO LCD	;LCD DATA PORT SEND DATA TO LCD
 35)   0ADC 	            			PINS EQU DEVLCD+01	;LCD RS SET PORT BIT 1 	;LCD RS SET PORT BIT 1
 50)   0ADC 21 04 90    		LCDINI:	LD HL,DISPCT	;
 51)   0ADF 3E 0C       			LD A,8+4	;
 52)   0AE1 77          			LD (HL),A	;
 53)   0AE2 AF          			XOR A	;
 54)   0AE3 D3 41       			OUT (PINS),A		;SET RS 0  CMD 		;SET RS 0  CMD
 55)   0AE5 3E 30       			LD A,16+32	;INITIALIZATION BYTE	;INITIALIZATION BYTE
 56)   0AE7 D3 40       			OUT (PDAT),A		;SEND COMMAND	;SEND COMMAND
 57)   0AE9 CD 1F 0E    			CALL DEL2	;
 58)   0AEC CD 1F 0E    			CALL DEL2	;
 59)   0AEF CD 1F 0E    			CALL DEL2	;
 60)   0AF2 CD 1F 0E    			CALL DEL2		;
 61)   0AF5 06 02       			LD B,2            ;WRITE FUNCTION 3X			;WRITE FUNCTION 3X
 62)   0AF7 3E 30       		INIT1:	LD A,16+32	;INITIALIZATION BYTE	;INITIALIZATION BYTE
 63)   0AF9 D3 40       			OUT (PDAT),A		;SEND COMMAND	;SEND COMMAND
 64)   0AFB CD 1F 0E    			CALL DEL2	;
 65)   0AFE 10 F7       			DJNZ INIT1        ;DELAY LOOP	;DELAY LOOP
 68)   0B00 3E 38       			LD A,32+16+8+0	  ;SET 8BIT AND LINES AND FONT	(16 + 8 + 0)	;SET 8BIT AND LINES AND FONT	(16 + 8 + 0)
 69)   0B02 CD 1D 0B    			CALL LCDCMD	;
 72)   0B05 3E 0F       			LD A,8+4+2+1	  ;DISPLAY ON CURSOR ON BLINK ON	;DISPLAY ON CURSOR ON BLINK ON
 73)   0B07 CD 1D 0B    			CALL LCDCMD	;
 74)   0B0A 3E 01       			LD A,1		  ;CLS DISPLAY (1)	;CLS DISPLAY (1)
 75)   0B0C CD 1D 0B    			CALL LCDCMD	;
 77)   0B0F C9          			RET	;
 81)   0B10 F5          			PUSH AF		;
 82)   0B11 AF          			XOR A	;
 83)   0B12 D3 41       			OUT (PINS),A			;SET RS 0  CMD FOR READING		;SET RS 0  CMD FOR READING
 84)   0B14 DB 40       		BUS1:	IN A,(PDAT)  	;E=1 R/W=1 RS=0 INSTRUCT	;E=1 R/W=1 RS=0 INSTRUCT
 85)   0B16 17          			RLA	  	;d3 IS 1? FOR 4 BIT d7 FOR 8BIT	;d3 IS 1? FOR 4 BIT d7 FOR 8BIT
 86)   0B17 38 FB       			JR C,BUS1	;
 87)   0B19 F1          			POP AF	;
 88)   0B1A D3 41       			OUT (PINS),A	;SET RS EITHER 0 OR 3 (BIT 1)	;SET RS EITHER 0 OR 3 (BIT 1)
 89)   0B1C C9          			RET	;
 93)   0B1D F5          		LCDCMD: PUSH AF		;
 94)   0B1E AF          						XOR A	 				;RS=0	;RS=0
 95)   0B1F CD 10 0B    						CALL LCDBUS	;
 96)   0B22 F1          						POP AF	;
 98)   0B23 D3 40       		LCDCM1:	OUT (PDAT),A   	;E=1 R/W=0 RS=1 INSTRUCT	;E=1 R/W=0 RS=1 INSTRUCT
 99)   0B25 C9          			RET	;
103)   0B26 F5          		LCDCHR:	PUSH AF	;
104)   0B27 3E 03       						LD A,3				;RS=1 DATA 	;RS=1 DATA
105)   0B29 CD 10 0B    						CALL LCDBUS	;
106)   0B2C F1          						POP AF	;
108)   0B2D D3 40       			      OUT (PDAT),A   	;E=1 R/W=0 RS=1 DATA	;E=1 R/W=0 RS=1 DATA
109)   0B2F C9          			RET	;
112)   0B30 E5          		LCDTXT: PUSH HL	;
113)   0B31 CD 36 0B    						CALL LCDTX1	;
114)   0B34 E1          						POP HL					;
115)   0B35 C9          						RET	;
116)   0B36 7E          		LCDTX1:	LD A,(HL)	;
117)   0B37 23          						INC HL	;
118)   0B38 FE 00       						CP 0	;
119)   0B3A C8          						RET Z	;
120)   0B3B CD 26 0B    						CALL LCDCHR	;
121)   0B3E 18 F0       						JR LCDTXT	;
124)   0B40 E5          		LCDCLS:	PUSH HL	;
125)   0B41 F5          			PUSH AF	;
126)   0B42 3E 01       			LD A,1	;
127)   0B44 CD 1D 0B    			CALL LCDCMD	;
128)   0B47 AF          			XOR A	;
129)   0B48 21 05 90    			LD HL,LCDCX	;
130)   0B4B 77          			LD (HL),A	;
131)   0B4C 23          			INC HL 		;LCDCY	;LCDCY
132)   0B4D 77          			LD (HL),A	;
133)   0B4E F1          			POP AF	;
134)   0B4F E1          			POP HL	;
135)   0B50 C9          			RET	;
137)   0B51 E5          		LCDHOM: PUSH HL	;
138)   0B52 F5          			PUSH AF	;
139)   0B53 3E 02       			LD A,2	;
140)   0B55 CD 1D 0B    			CALL LCDCMD	;
141)   0B58 AF          			XOR A	;
142)   0B59 21 05 90    			LD HL,LCDCX	;
143)   0B5C 77          			LD (HL),A	;
144)   0B5D 23          			INC HL 		;LCDCY	;LCDCY
145)   0B5E 77          			LD (HL),A	;
146)   0B5F F1          			POP AF	;
147)   0B60 E1          			POP HL	;
148)   0B61 C9          			RET	;
150)   0B62 E5          		LCDLIN: PUSH HL	;
151)   0B63 F5          			PUSH AF	;
152)   0B64 D5          			PUSH DE	;
153)   0B65 21 05 90    			LD HL,LCDCX	;LCDCX	;LCDCX
154)   0B68 7E          			LD A,(HL)	;
155)   0B69 57          			LD D,A	;
156)   0B6A 23          			INC HL 		;LCDCY	;LCDCY
157)   0B6B 7E          			LD A,(HL) 	;
158)   0B6C 5F          			LD E,A	;
159)   0B6D 3E 80       			LD A,128	;SET DDRAM ADDR	;SET DDRAM ADDR
160)   0B6F 82          			ADD D			;
161)   0B70 CB 23       			SLA E	;$40 IF E IS 1 (LINE 2)	;$40 IF E IS 1 (LINE 2)
162)   0B72 CB 23       			SLA E	;
163)   0B74 CB 23       			SLA E	;
164)   0B76 CB 23       			SLA E	;
165)   0B78 CB 23       			SLA E	;
166)   0B7A 83          			ADD E	;
167)   0B7B CD 1D 0B    			CALL LCDCMD	;
168)   0B7E D1          			POP DE	;
169)   0B7F F1          			POP AF	;
170)   0B80 E1          			POP HL	;
171)   0B81 C9          			RET		;
172)   0B82 F5          		LCDLN1: PUSH AF	;
173)   0B83 3E 80       			LD A,128	;SET LINE 1 DRAM ADDR 0	;SET LINE 1 DRAM ADDR 0
174)   0B85 CD 1D 0B    			CALL LCDCMD	;
175)   0B88 F1          			POP AF	;
176)   0B89 C9          			RET	;
177)   0B8A F5          		LCDLN2: PUSH AF	;
178)   0B8B 3E C0       			LD A,128+64	;SET LINE 2 DRAM ADDR $40	;SET LINE 2 DRAM ADDR $40
179)   0B8D CD 1D 0B    			CALL LCDCMD	;
180)   0B90 F1          			POP AF	;
181)   0B91 C9          			RET	;
183)   0B92 F5          		SETDIS:	PUSH AF	;
184)   0B93 7E          			LD A,(HL)	;
185)   0B94 CB DF       			SET 3,A	;
186)   0B96 E6 0F       			AND 15		;ONLY LOWER 4 BITS	;ONLY LOWER 4 BITS
187)   0B98 CD 1D 0B    			CALL LCDCMD	;
188)   0B9B F1          			POP AF	;
189)   0B9C C9          			RET	;
191)   0B9D E5          		LCDCON:	PUSH HL	;
192)   0B9E 21 04 90    			LD HL,DISPCT	;
193)   0BA1 CB CE       			SET 1,(HL)	;
194)   0BA3 CD 92 0B    			CALL SETDIS	;
195)   0BA6 E1          			POP HL	;
196)   0BA7 C9          			RET	;
198)   0BA8 E5          		LCDCOF:	PUSH HL	;
199)   0BA9 21 04 90    			LD HL,DISPCT	;
200)   0BAC CB 8E       			RES 1,(HL)	;
201)   0BAE CD 92 0B    			CALL SETDIS	;
202)   0BB1 E1          			POP HL	;
203)   0BB2 C9          			RET	;
205)   0BB3 E5          		LCDDON:	PUSH HL	;
206)   0BB4 21 04 90    			LD HL,DISPCT	;
207)   0BB7 CB D6       			SET 2,(HL)	;
208)   0BB9 CD 92 0B    			CALL SETDIS	;
209)   0BBC E1          			POP HL	;
210)   0BBD C9          			RET	;
212)   0BBE E5          		LCDDOF: PUSH HL	;
213)   0BBF 21 04 90    			LD HL,DISPCT	;
214)   0BC2 CB 96       			RES 2,(HL)	;
215)   0BC4 CD 92 0B    			CALL SETDIS	;
216)   0BC7 E1          			POP HL	;
217)   0BC8 C9          			RET	;
219)   0BC9 E5          		LCDBON:	PUSH HL	;
220)   0BCA 21 04 90    			LD HL,DISPCT	;
221)   0BCD CB C6       			SET 0,(HL)	;
222)   0BCF CD 92 0B    			CALL SETDIS	;
223)   0BD2 E1          			POP HL	;
224)   0BD3 C9          			RET	;
226)   0BD4 E5          		LCDBOF: PUSH HL	;
227)   0BD5 21 04 90    			LD HL,DISPCT	;
228)   0BD8 CB 86       			RES 0,(HL)	;
229)   0BDA CD 92 0B    			CALL SETDIS	;
230)   0BDD E1          			POP HL	;
231)   0BDE C9          			RET	;
233)   0BDF F5          		LCDCRL: PUSH AF	;
234)   0BE0 3E 10       			LD A,$10	;	;
235)   0BE2 CD 1D 0B    			CALL LCDCMD	;
236)   0BE5 F1          			POP AF	;
237)   0BE6 C9          			RET	;
239)   0BE7 F5          		LCDCRR: PUSH AF	;
240)   0BE8 3E 14       			LD A,$14 	;	;
241)   0BEA CD 1D 0B    			CALL LCDCMD	;
242)   0BED F1          			POP AF	;
243)   0BEE C9          			RET	;
245)   0BEF F5          		LCDSSL: PUSH AF	;
246)   0BF0 3E 18       			LD A,$18	;	;
247)   0BF2 CD 1D 0B    			CALL LCDCMD	;
248)   0BF5 F1          			POP AF	;
249)   0BF6 C9          			RET	;
251)   0BF7 F5          		LCDSSR: PUSH AF	;
252)   0BF8 3E 1C       			LD A,$1C 	;	;
253)   0BFA CD 1D 0B    			CALL LCDCMD	;
254)   0BFD F1          			POP AF	;
255)   0BFE C9          			RET	;
 13)   0BFF DB 06       		PS2KEY:		IN A,(COPSTA)		;
 14)   0C01 CB 6F       							BIT 5,A	;
 15)   0C03 28 FA       							JR Z, PS2KEY 			; TEST KEYB INTERRUPT	; TEST KEYB INTERRUPT
 16)   0C05 DB 46       							IN A,(DEVPS2) 		;TAKE THE KEY	;TAKE THE KEY
 17)   0C07 D3 47       							OUT (DEVPS2+1),A  ;SIGNAL WE GOT THE KEY	;SIGNAL WE GOT THE KEY
 18)   0C09 C9          							RET	;
 21)   0C0A DB 06       		PS2ISK:		IN A,(COPSTA)		;
 22)   0C0C CB 6F       							BIT 5,A	;
 23)   0C0E 28 03       							JR Z, PS2NTP	;
 24)   0C10 3E 01       							LD A,1				;SET A TO 1 MEANS WE HAVE A KEY	;SET A TO 1 MEANS WE HAVE A KEY
 25)   0C12 C9          							RET	;
 26)   0C13 AF          		PS2NTP		XOR A					;SET A TO 0 MEANS NO KEY AVAILABLE	;SET A TO 0 MEANS NO KEY AVAILABLE
 27)   0C14 C9          							RET					;
 29)   0C15 CD 1F 0C    		GTNBKEY	CALL GTKEY	;
 30)   0C18 FE 00       						CP 0	;
 31)   0C1A C8          						RET Z	;
 32)   0C1B CD DC 0C    				    CALL NBLOOK	;
 33)   0C1E C9          				    RET	;
 35)   0C1F CD FF 0B    		GTKEY:	CALL PS2KEY	;GET A KEY FROM PS2	;GET A KEY FROM PS2
 36)   0C22 FE E1       			CP $E1		;BREAK KEY	;BREAK KEY
 37)   0C24 CC 46 0C    			CALL Z,GTBRK	;
 38)   0C27 FE F0       			CP $F0		;240 KEY RELEASED	;240 KEY RELEASED
 39)   0C29 CC 84 0C    			CALL Z,GTREL	;
 40)   0C2C FE E0       			CP $E0		;224 EXTENDED KEYS	;224 EXTENDED KEYS
 41)   0C2E CC 50 0C    			CALL Z,GTEXT	;
 44)   0C31 FE 12       			CP 18		;LEFT SHIFT	;LEFT SHIFT
 45)   0C33 CC AF 0C    			CALL Z,SHFTOG	;
 46)   0C36 FE 59       			CP 89		;RIGHT SHIFT	;RIGHT SHIFT
 47)   0C38 CC AF 0C    			CALL Z,SHFTOG	;
 48)   0C3B FE 14       			CP 20		;RIGHT CONTROL	;RIGHT CONTROL
 49)   0C3D CC B8 0C    			CALL Z,CTRTOG		;
 50)   0C40 FE 11       			CP 17		;LEFT ALT	;LEFT ALT
 51)   0C42 CC C1 0C    			CALL Z,ALTTOG	;
 52)   0C45 C9          			RET	;
 54)   0C46 CD FF 0B    		GTBRK:	CALL PS2KEY	;$14 OR $F0	;$14 OR $F0
 55)   0C49 FE F0       			CP $F0	;
 56)   0C4B C8          			RET Z	;
 57)   0C4C CD FF 0B    			CALL PS2KEY	;$77	;$77
 58)   0C4F C9          			RET	;
 60)   0C50 CD FF 0B    		GTEXT:	CALL PS2KEY	; THIS IS THE EXTENDED KEY	; THIS IS THE EXTENDED KEY
 61)   0C53 FE 6B       			CP $6B  ;LEFT	;LEFT
 62)   0C55 C8          			RET Z	;
 63)   0C56 FE 72       			CP $72	;DOWN	;DOWN
 64)   0C58 C8          			RET Z	;
 65)   0C59 FE 74       			CP $74	;RIGHT	;RIGHT
 66)   0C5B C8          			RET Z	;
 67)   0C5C FE 75       			CP $75	;UP	;UP
 68)   0C5E C8          			RET Z	;
 69)   0C5F FE 70       			CP $70	;INSERT	;INSERT
 70)   0C61 C8          			RET Z	;
 71)   0C62 FE 6C       			CP $6C	;HOME	;HOME
 72)   0C64 C8          			RET Z	;
 73)   0C65 FE 7D       			CP $7D	;PG UP	;PG UP
 74)   0C67 C8          			RET Z	;
 75)   0C68 FE 7A       			CP $7A	;PG DN	;PG DN
 76)   0C6A C8          			RET Z	;
 77)   0C6B FE 69       			CP $69	;END	;END
 78)   0C6D C8          			RET Z	;
 79)   0C6E FE 71       			CP $71	;DEL	;DEL
 80)   0C70 C8          			RET Z	;
 81)   0C71 FE 5A       			CP $5A	;ENTER NUM	;ENTER NUM
 82)   0C73 C8          			RET Z	;
 83)   0C74 FE 11       			CP $11	;RIGHT ALT	;RIGHT ALT
 84)   0C76 C8          			RET Z	;
 85)   0C77 FE 14       			CP $14	;LEFT ALT	;LEFT ALT
 86)   0C79 C8          			RET Z	;
 87)   0C7A FE F0       			CP $F0	;
 88)   0C7C C2 82 0C    			JP NZ, 	EXGTEX	;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY	;GTREL ;EXTENDED KEY RELEASED $E0 $F0 $KEY
 89)   0C7F CD FF 0B    			CALL PS2KEY	; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT	; THIS IS THE EXTENDED RELEASED KEY JUST IGNORE IT
 91)   0C82 AF          		EXGTEX	XOR A	;NOT VALID EXTENDED KEY	;NOT VALID EXTENDED KEY
 92)   0C83 C9          			RET	;
 95)   0C84 CD FF 0B    		GTREL:	CALL PS2KEY	; THIS IS THE RELEASED KEY	; THIS IS THE RELEASED KEY
 96)   0C87 FE 12       			CP 18		; LSHIFT RELEASED	; LSHIFT RELEASED
 97)   0C89 CC 9D 0C    			CALL Z,SHFRES	; RESET SHIFT	; RESET SHIFT
 98)   0C8C FE 14       			CP 20		; LCTRL RELEASED	; LCTRL RELEASED
 99)   0C8E CC A3 0C    			CALL Z,CTRRES	; RESET CONTROL	; RESET CONTROL
100)   0C91 FE 11       			CP 17		; LALT RELEASED	; LALT RELEASED
101)   0C93 CC A9 0C    			CALL Z,ALTRES	; RESET ALT	; RESET ALT
102)   0C96 FE 59       			CP 89		; RSHIFT RELEASED	; RSHIFT RELEASED
103)   0C98 CC 9D 0C    			CALL Z,SHFRES	; RESET SHIFT	; RESET SHIFT
104)   0C9B AF          			XOR A		; NO KEY	; NO KEY
105)   0C9C C9          			RET	;
107)   0C9D 21 01 90    		SHFRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
108)   0CA0 CB B6       			RES 6,(HL)  	; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
109)   0CA2 C9          			RET	;
111)   0CA3 21 01 90    		CTRRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
112)   0CA6 CB BE       			RES 7,(HL)	; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
113)   0CA8 C9          			RET	;
115)   0CA9 21 01 90    		ALTRES:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
116)   0CAC CB AE       			RES 5,(HL)	; BIT 5 IS SHIFT $20=32 	; BIT 5 IS SHIFT $20=32
117)   0CAE C9          			RET	;
119)   0CAF 21 01 90    		SHFTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH 	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
120)   0CB2 3E 40       			LD A,$40	; MASK	; MASK
121)   0CB4 AE          			XOR (HL)  	; BIT 6 IS SHIFT $40=64	; BIT 6 IS SHIFT $40=64
122)   0CB5 77          			LD (HL),A	; SAVE	; SAVE
123)   0CB6 AF          			XOR A		; NO KEY	; NO KEY
124)   0CB7 C9          			RET	;
126)   0CB8 21 01 90    		CTRTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
127)   0CBB 3E 80       			LD A,$80	; MASK	; MASK
128)   0CBD AE          			XOR (HL)	; BIT 7 IS CTRL $80=128	; BIT 7 IS CTRL $80=128
129)   0CBE 77          			LD (HL),A	; SAVE	; SAVE
130)   0CBF AF          			XOR A		; NO KEY	; NO KEY
131)   0CC0 C9          			RET	;
133)   0CC1 21 01 90    		ALTTOG:	LD HL,KEYCTR	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH	;KEYBOARD FLAGS SHFT,CONTROL,GRAPH
134)   0CC4 3E 20       			LD A,$20	;
135)   0CC6 AE          			XOR (HL)	; BIT 5 IS ALT $20=32 	; BIT 5 IS ALT $20=32
136)   0CC7 77          			LD (HL),A	; SAVE	; SAVE
137)   0CC8 AF          			XOR A		; NO KEY	; NO KEY
138)   0CC9 C9          			RET	;
143)   0CCA 21 FA 0C    		PS2LOK	LD HL,PS2TAB	;
144)   0CCD 06 00       			LD B,0	;
145)   0CCF 4F          			LD C,A	;
146)   0CD0 09          			ADD HL,BC	;
147)   0CD1 7E          			LD A,(HL)	;
148)   0CD2 21 01 90    			LD HL,KEYCTR	;
149)   0CD5 46          			LD B,(HL)	;
150)   0CD6 CB 70       			BIT 6,B			;BIT 6 IS SHIFT	;BIT 6 IS SHIFT
151)   0CD8 C8          			RET Z	;
152)   0CD9 C6 20       			ADD A,32	;
153)   0CDB C9          			RET	;
155)   0CDC 21 7C 0D    		NBLOOK	LD HL,NBTAB	;
156)   0CDF 06 00       			LD B,0	;
157)   0CE1 4F          			LD C,A	;
158)   0CE2 09          			ADD HL,BC	;
159)   0CE3 7E          			LD A,(HL)	;
160)   0CE4 FE 00       			CP 0	;
161)   0CE6 C8          			RET Z	;
162)   0CE7 21 01 90    			LD HL,KEYCTR	;BIT 6=SHIFT BIT 7=CTRL  BIT 6+7=GRPH		;BIT 6=SHIFT BIT 7=CTRL  BIT 6+7=GRPH
163)   0CEA CB 6E       			BIT 5,(HL)	;
164)   0CEC 28 04       			JR Z,NOGRPH	;
165)   0CEE 06 C0       			LD B,192	;SET BIT 6 AND 7	;SET BIT 6 AND 7
166)   0CF0 18 06       			JR NBLKEX	;
167)   0CF2 4F          		NOGRPH	LD C,A	;
168)   0CF3 7E          				LD A,(HL)	;
169)   0CF4 E6 C0       				AND 11000000	;
170)   0CF6 47          				LD B,A	;
171)   0CF7 79          				LD A,C				;
172)   0CF8 B0          		NBLKEX	OR B	;
173)   0CF9 C9          			RET	;
179)   0CFA 00 00 00 00 		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
179)   0CFE 00 00 00 00 		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
179)   0D02 00 00       		PS2TAB	DB 0,0,0,0,0,0,0,0,0,0	;
180)   0D04 00 00 00 00 			DB 0,0,0,0,'`',0,0,0,0,0	;
180)   0D08 60 00 00 00 			DB 0,0,0,0,'`',0,0,0,0,0	;
180)   0D0C 00 00       			DB 0,0,0,0,'`',0,0,0,0,0	;
181)   0D0E 00 51 31 00 			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
181)   0D12 00 00 5A 53 			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
181)   0D16 41 57       			DB 0,'Q','1',0,0,0,'Z','S','A','W'	;
182)   0D18 32 00 00 43 			DB '2',0,0,'C','X','D','E','4','3',0	;
182)   0D1C 58 44 45 34 			DB '2',0,0,'C','X','D','E','4','3',0	;
182)   0D20 33 00       			DB '2',0,0,'C','X','D','E','4','3',0	;
183)   0D22 00 20 56 46 			DB 0,' ','V','F','T','R','5',0,0,'N'	;
183)   0D26 54 52 35 00 			DB 0,' ','V','F','T','R','5',0,0,'N'	;
183)   0D2A 00 4E       			DB 0,' ','V','F','T','R','5',0,0,'N'	;
184)   0D2C 42 48 47 59 			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
184)   0D30 36 00 00 00 			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
184)   0D34 4D 4A       			DB 'B','H','G','Y','6',0,0,0,'M','J'	;
185)   0D36 55 37 38 00 			DB 'U','7','8',0,0,',','K','I','O','0'	;
185)   0D3A 00 2C 4B 49 			DB 'U','7','8',0,0,',','K','I','O','0'	;
185)   0D3E 4F 30       			DB 'U','7','8',0,0,',','K','I','O','0'	;
186)   0D40 39 00 00 2E 			DB '9',0,0,'.','/','L',59,'P','-',0	;
186)   0D44 2F 4C 3B 50 			DB '9',0,0,'.','/','L',59,'P','-',0	;
186)   0D48 2D 00       			DB '9',0,0,'.','/','L',59,'P','-',0	;
187)   0D4A 00 00 27 00 			DB 0,0,39,0,'[','=',0,0,0,0	;
187)   0D4E 5B 3D 00 00 			DB 0,0,39,0,'[','=',0,0,0,0	;
187)   0D52 00 00       			DB 0,0,39,0,'[','=',0,0,0,0	;
188)   0D54 0D 5D 00 00 			DB 13,']',0,0,0,0,0,0,0,0	;
188)   0D58 00 00 00 00 			DB 13,']',0,0,0,0,0,0,0,0	;
188)   0D5C 00 00       			DB 13,']',0,0,0,0,0,0,0,0	;
189)   0D5E 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
189)   0D62 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
189)   0D66 00 00       			DB 0,0,0,0,0,0,0,0,0,0	;
190)   0D68 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
190)   0D6C 00 00 00 00 			DB 0,0,0,0,0,0,0,0,0,0	;
190)   0D70 00 00       			DB 0,0,0,0,0,0,0,0,0,0	;
191)   0D72 00 00 33 00 			DB 0,0,'3',0,'*','9',0,0,0,0	;
191)   0D76 2A 39 00 00 			DB 0,0,'3',0,'*','9',0,0,0,0	;
191)   0D7A 00 00       			DB 0,0,'3',0,'*','9',0,0,0,0	;
195)   0D7C 00 00 00 00 		NBTAB	DB 0,0,0,0,0,0,0,0,0,0		;  0-  9	;  0-  9
195)   0D80 00 00 00 00 		NBTAB	DB 0,0,0,0,0,0,0,0,0,0		;  0-  9	;  0-  9
195)   0D84 00 00       		NBTAB	DB 0,0,0,0,0,0,0,0,0,0		;  0-  9	;  0-  9
196)   0D86 00 00 00 A4 			DB 0,0,0,36+128,0,0,0,0,0,0		; 10- 19	0,0,0,TAB	; 10- 19	0,0,0,TAB
196)   0D8A 00 00 00 00 			DB 0,0,0,36+128,0,0,0,0,0,0		; 10- 19	0,0,0,TAB	; 10- 19	0,0,0,TAB
196)   0D8E 00 00       			DB 0,0,0,36+128,0,0,0,0,0,0		; 10- 19	0,0,0,TAB	; 10- 19	0,0,0,TAB
197)   0D90 00 0E 09 00 			DB 0,14,9,0,0,0,60,45,46,13	; 20- 29	; 20- 29
197)   0D94 00 00 3C 2D 			DB 0,14,9,0,0,0,60,45,46,13	; 20- 29	; 20- 29
197)   0D98 2E 0D       			DB 0,14,9,0,0,0,60,45,46,13	; 20- 29	; 20- 29
198)   0D9A 08 00 00 3A 			DB 8,0,0,58,59,44,12,6,7,0	; 30- 39	; 30- 39
198)   0D9E 3B 2C 0C 06 			DB 8,0,0,58,59,44,12,6,7,0	; 30- 39	; 30- 39
198)   0DA2 07 00       			DB 8,0,0,58,59,44,12,6,7,0	; 30- 39	; 30- 39
199)   0DA4 00 0F 39 2B 			DB 0,15,57,43,10,11,5,0,0,52	; 40- 49	; 40- 49
199)   0DA8 0A 0B 05 00 			DB 0,15,57,43,10,11,5,0,0,52	; 40- 49	; 40- 49
199)   0DAC 00 34       			DB 0,15,57,43,10,11,5,0,0,52	; 40- 49	; 40- 49
200)   0DAE 38 29 2A 25 			DB 56,41,42,37,4,0,0,0,53,51	; 50- 59	; 50- 59
200)   0DB2 04 00 00 00 			DB 56,41,42,37,4,0,0,0,53,51	; 50- 59	; 50- 59
200)   0DB6 35 33       			DB 56,41,42,37,4,0,0,0,53,51	; 50- 59	; 50- 59
201)   0DB8 23 03 13 00 			DB 35,3,19,0,0,54,62,36,38,21	; 60- 69	; 60- 69
201)   0DBC 00 36 3E 24 			DB 35,3,19,0,0,54,62,36,38,21	; 60- 69	; 60- 69
201)   0DC0 26 15       			DB 35,3,19,0,0,54,62,36,38,21	; 60- 69	; 60- 69
202)   0DC2 14 00 00 37 			DB 20,0,0,55,47,39,40,26,28,0	; 70- 79	; 70- 79
202)   0DC6 2F 27 28 1A 			DB 20,0,0,55,47,39,40,26,28,0	; 70- 79	; 70- 79
202)   0DCA 1C 00       			DB 20,0,0,55,47,39,40,26,28,0	; 70- 79	; 70- 79
203)   0DCC 00 00 43 00 			DB 0,0,67,0,86,27,0,0,0,0	; 80- 89	; 80- 89
203)   0DD0 56 1B 00 00 			DB 0,0,67,0,86,27,0,0,0,0	; 80- 89	; 80- 89
203)   0DD4 00 00       			DB 0,0,67,0,86,27,0,0,0,0	; 80- 89	; 80- 89
204)   0DD6 1E 00 00 00 			DB 30,0,0,0,0,0,0,0,0,0		; 90- 99	; 90- 99
204)   0DDA 00 00 00 00 			DB 30,0,0,0,0,0,0,0,0,0		; 90- 99	; 90- 99
204)   0DDE 00 00       			DB 30,0,0,0,0,0,0,0,0,0		; 90- 99	; 90- 99
205)   0DE0 00 00 40 00 			DB 0,0,64,0,0,26+128,0,2,63,0		;100-109  0,0,64,0,0,END	;100-109  0,0,64,0,0,END
205)   0DE4 00 9A 00 02 			DB 0,0,64,0,0,26+128,0,2,63,0		;100-109  0,0,64,0,0,END	;100-109  0,0,64,0,0,END
205)   0DE8 3F 00       			DB 0,0,64,0,0,26+128,0,2,63,0		;100-109  0,0,64,0,0,END	;100-109  0,0,64,0,0,END
206)   0DEA 00 00 3D A5 			DB 0,0,61,37+128,34,0,18,50,31,25	;110-119  0,0,INS,DEL	;110-119  0,0,INS,DEL
206)   0DEE 22 00 12 32 			DB 0,0,61,37+128,34,0,18,50,31,25	;110-119  0,0,INS,DEL	;110-119  0,0,INS,DEL
206)   0DF2 1F 19       			DB 0,0,61,37+128,34,0,18,50,31,25	;110-119  0,0,INS,DEL	;110-119  0,0,INS,DEL
207)   0DF4 00 1D 07 1C 			DB 0,29,7,28,24,20,0,0,0,0	;120-129												;120-129
207)   0DF8 18 14 00 00 			DB 0,29,7,28,24,20,0,0,0,0	;120-129												;120-129
207)   0DFC 00 00       			DB 0,29,7,28,24,20,0,0,0,0	;120-129												;120-129
 14)   0DFE C9          		      RET	;
 17)   0DFF F5          		DELAYMICROSEC:	PUSH AF	;
 18)   0E00 D5          			PUSH DE	;
 19)   0E01 11 01 00    			LD DE,1	; 30= 0.1 MILISECS = 100 MICROSECS SO 3 IS 10 MICROSECS	; 30= 0.1 MILISECS = 100 MICROSECS SO 3 IS 10 MICROSECS
 20)   0E04 1B          		DEL21:	DEC DE	;
 21)   0E05 7A          			LD A,D            ;TEST FOR DE=00	;TEST FOR DE=00
 22)   0E06 B3          			OR E	;
 23)   0E07 20 FB       			JR NZ,DEL21 		;
 24)   0E09 D1          			POP DE	;
 25)   0E0A F1          			POP AF	;
 26)   0E0B C9          			RET	;
 29)   0E0C CD FF 0D    		S21:	CALL DELAYMICROSEC	;
 30)   0E0F 10 FB       			DJNZ S21		;
 31)   0E11 C9          			RET	;
 35)   0E12 F5          		DELAYMILISEC:	PUSH AF	;
 36)   0E13 D5          			PUSH DE	;
 37)   0E14 11 2C 01    			LD DE,300	;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS	;2000 1 MILISEC =300 ON 8MHZ SO 30= 0.1 MILISECS = 100 MICROSECS
 38)   0E17 1B          		DEL1:	DEC DE	;
 39)   0E18 7A          			LD A,D            ;TEST FOR DE=00	;TEST FOR DE=00
 40)   0E19 B3          			OR E	;
 41)   0E1A 20 FB       			JR NZ,DEL1 		;
 42)   0E1C D1          			POP DE	;
 43)   0E1D F1          			POP AF	;
 44)   0E1E C9          			RET	;
 46)   0E1F 06 50       		DEL2:LD B,80	;
 48)   0E21 CD 12 0E    		S1:	CALL DELAYMILISEC	;
 49)   0E24 10 FB       			DJNZ S1		;
 50)   0E26 C9          			RET	;
 56)   0E27 F5          		OUTASC	PUSH AF	;
 57)   0E28 D5          			PUSH DE	;
 58)   0E29 CD 32 0E    			CALL B2Bcd	;
 59)   0E2C D1          			POP DE	;
 60)   0E2D CD 49 0E    			CALL BCD2HA	;
 61)   0E30 F1          			POP AF	;
 62)   0E31 C9          			RET		;
 75)   0E32 01 00 10    		LD BC, 16*256+0 ; handle 16 bits, one bit per iteration	; handle 16 bits, one bit per iteration
 76)   0E35 11 00 00    		LD DE, 0	;
 78)   0E38 29          		ADD HL, HL	;
 79)   0E39 7B          		LD A, E	;
 80)   0E3A 8F          		ADC A, A	;
 81)   0E3B 27          		DAA	;
 82)   0E3C 5F          		LD E, A	;
 83)   0E3D 7A          		LD A, D	;
 84)   0E3E 8F          		ADC A, A	;
 85)   0E3F 27          		DAA	;
 86)   0E40 57          		LD D, A	;
 87)   0E41 79          		LD A, C	;
 88)   0E42 8F          		ADC A, A	;
 89)   0E43 27          		DAA	;
 90)   0E44 4F          		LD C, A	;
 91)   0E45 10 F1       		DJNZ cvtLp	;
 92)   0E47 EB          		EX DE,HL	;
 93)   0E48 C9          		RET	;
104)   0E49 79          		LD A, C	;
105)   0E4A CD 60 0E    		CALL cvtUN	;
106)   0E4D 79          		LD A, C	;
107)   0E4E CD 64 0E    		CALL cvtLN	;
108)   0E51 7C          		LD A, H	;
109)   0E52 CD 60 0E    		CALL cvtUN	;
110)   0E55 7C          		LD A, H	;
111)   0E56 CD 64 0E    		CALL cvtLN	;
112)   0E59 7D          		LD A, L	;
113)   0E5A CD 60 0E    		CALL cvtUN	;
114)   0E5D 7D          		LD A, L	;
115)   0E5E 18 04       		JR cvtLN	;
117)   0E60 1F          		RRA ; move upper nibble into lower nibble	; move upper nibble into lower nibble
118)   0E61 1F          		RRA	;
119)   0E62 1F          		RRA	;
120)   0E63 1F          		RRA	;
122)   0E64 E6 0F       		AND  0Fh ; isolate lower nibble	; isolate lower nibble
123)   0E66 C6 90       		ADD A, 90h ; old trick	; old trick
124)   0E68 27          		DAA ; for converting	; for converting
125)   0E69 CE 40       		ADC A, 40h ; one nibble	; one nibble
126)   0E6B 27          		DAA ; to hex ASCII	; to hex ASCII
127)   0E6C 12          		LD (DE), A	;
128)   0E6D 13          		INC DE	;
129)   0E6E C9          		RET	;
  2)   0E6F 00 00 00 00 		    ALIGN 256	;
  2)   0E73 00 00 00 00 		    ALIGN 256	;
  2)   0E77 00 00 00 00 		    ALIGN 256	;
  2)   0E7B 00 00 00 00 		    ALIGN 256	;
  2)   0E7F 00 00 00 00 		    ALIGN 256	;
  2)   0E83 00 00 00 00 		    ALIGN 256	;
  2)   0E87 00 00 00 00 		    ALIGN 256	;
  2)   0E8B 00 00 00 00 		    ALIGN 256	;
  2)   0E8F 00 00 00 00 		    ALIGN 256	;
  2)   0E93 00 00 00 00 		    ALIGN 256	;
  2)   0E97 00 00 00 00 		    ALIGN 256	;
  2)   0E9B 00 00 00 00 		    ALIGN 256	;
  2)   0E9F 00 00 00 00 		    ALIGN 256	;
  2)   0EA3 00 00 00 00 		    ALIGN 256	;
  2)   0EA7 00 00 00 00 		    ALIGN 256	;
  2)   0EAB 00 00 00 00 		    ALIGN 256	;
  2)   0EAF 00 00 00 00 		    ALIGN 256	;
  2)   0EB3 00 00 00 00 		    ALIGN 256	;
  2)   0EB7 00 00 00 00 		    ALIGN 256	;
  2)   0EBB 00 00 00 00 		    ALIGN 256	;
  2)   0EBF 00 00 00 00 		    ALIGN 256	;
  2)   0EC3 00 00 00 00 		    ALIGN 256	;
  2)   0EC7 00 00 00 00 		    ALIGN 256	;
  2)   0ECB 00 00 00 00 		    ALIGN 256	;
  2)   0ECF 00 00 00 00 		    ALIGN 256	;
  2)   0ED3 00 00 00 00 		    ALIGN 256	;
  2)   0ED7 00 00 00 00 		    ALIGN 256	;
  2)   0EDB 00 00 00 00 		    ALIGN 256	;
  2)   0EDF 00 00 00 00 		    ALIGN 256	;
  2)   0EE3 00 00 00 00 		    ALIGN 256	;
  2)   0EE7 00 00 00 00 		    ALIGN 256	;
  2)   0EEB 00 00 00 00 		    ALIGN 256	;
  2)   0EEF 00 00 00 00 		    ALIGN 256	;
  2)   0EF3 00 00 00 00 		    ALIGN 256	;
  2)   0EF7 00 00 00 00 		    ALIGN 256	;
  2)   0EFB 00 00 00 00 		    ALIGN 256	;
  2)   0EFF 00          		    ALIGN 256	;
  8)   9300 00          		    @FLAGS		 DEFS	1		; Flags: B7=ESC PRESSED, B6=ESC DISABLED	; Flags: B7=ESC PRESSED, B6=ESC DISABLED
  9)   9301 00 00       		    @FCOLOR   DEFW 0 ;FOREGROUND COLOR	;FOREGROUND COLOR
 10)   9303 00 00       		    @BCOLOR   DEFW 0 ;BACKGROUND COLOR	;BACKGROUND COLOR
 11)   9305 00          		    @CURSORX  DEFB 0    ;0-79	;0-79
 12)   9306 00          		    @CURSORY  DEFB 0    ;0-47	;0-47
 15)   9307 00          		    @LASTCHAR DEFB 0; 	;
 16)   9308 00 00       		    @EDPTR    DEFW 0	;
 17)   930A 00          		    @OPTVAL   DEFB 0	;
 18)   930B 00          		    @INKEY    DEFB 0	;
 19)   930C 00          		    @FCOLSEL  DEFB 0    ; FORECOLOR SELECTED	; FORECOLOR SELECTED
 20)   930D 00          		    @BCOLSEL  DEFB 0    ; BACKCOLOR SELECTED	; BACKCOLOR SELECTED
 21)   930E 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   9312 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   9316 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   931A 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   931E 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   9322 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   9326 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 21)   932A 00 00 00 00 		    @FCOLPAL DEFS 16*2    ; FORECOLOR PALETTE	; FORECOLOR PALETTE
 22)   932E 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   9332 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   9336 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   933A 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   933E 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   9342 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   9346 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
 22)   934A 00 00 00 00 		    @BCOLPAL DEFS 16*2    ; BACKCOLOR PALETTE	; BACKCOLOR PALETTE
